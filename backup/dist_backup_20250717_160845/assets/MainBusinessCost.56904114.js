import{_ as J,d as H,r as _,c as K,B as P,o as Q,b as x,e as u,y as i,A as d,x as T,F as S,g as N,t as c,k as W,h as X,G as Y,v as F,f as U}from"./index.abe6c9df.js";import{_ as Z,l as uu,M as w,r as eu}from"./FormAttachmentAndRemarks.a96f2c40.js";const tu={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},ou={class:"flex justify-between items-center mb-6"},ru={class:"flex items-center space-x-4"},au={class:"overflow-x-auto my-6"},su={class:"w-full border-collapse border border-gray-300"},lu=["rowspan"],nu={class:"border border-gray-300 px-4 py-2"},cu={class:"border border-gray-300 px-4 py-2"},pu=["onUpdate:modelValue"],iu={class:"border border-gray-300 px-4 py-2"},du=["onUpdate:modelValue"],yu={class:"border border-gray-300 px-4 py-2"},Cu=["onUpdate:modelValue"],bu={class:"border border-gray-300 px-4 py-2"},mu={class:"px-2 py-1"},vu={class:"border border-gray-300 px-4 py-2"},Eu=["onUpdate:modelValue"],xu={class:"border border-gray-300 px-4 py-2"},Fu={class:"px-2 py-1"},_u=["rowspan"],gu={class:"border border-gray-300 px-4 py-2"},Bu={class:"border border-gray-300 px-4 py-2"},Du=["onUpdate:modelValue"],hu={class:"border border-gray-300 px-4 py-2"},Mu=["onUpdate:modelValue"],Lu={class:"border border-gray-300 px-4 py-2"},Au=["onUpdate:modelValue"],fu={class:"border border-gray-300 px-4 py-2"},Tu={class:"px-2 py-1"},wu={class:"border border-gray-300 px-4 py-2"},Ru=["onUpdate:modelValue"],Pu={class:"border border-gray-300 px-4 py-2"},Su={class:"px-2 py-1"},Nu=["rowspan"],Uu={class:"border border-gray-300 px-4 py-2"},Vu={class:"border border-gray-300 px-4 py-2"},ju=["onUpdate:modelValue"],ku={class:"border border-gray-300 px-4 py-2"},qu=["onUpdate:modelValue"],$u={class:"border border-gray-300 px-4 py-2"},Iu=["onUpdate:modelValue"],Ou={class:"border border-gray-300 px-4 py-2"},zu={class:"px-2 py-1"},Gu={class:"border border-gray-300 px-4 py-2"},Ju=["onUpdate:modelValue"],Hu={class:"border border-gray-300 px-4 py-2"},Ku={class:"px-2 py-1"},Qu={class:"bg-gray-50 font-bold"},Wu={class:"border border-gray-300 px-4 py-2"},Xu={class:"border border-gray-300 px-4 py-2"},Yu={class:"border border-gray-300 px-4 py-2"},Zu={class:"border border-gray-300 px-4 py-2"},ue={class:"border border-gray-300 px-4 py-2"},ee={class:"border border-gray-300 px-4 py-2"},te=H({__name:"MainBusinessCost",setup(oe){var q;const L=Y(),y=_(((q=L.query.period)==null?void 0:q.toString())||new Date().toISOString().slice(0,7)),V=()=>({equipment:[{customerType:"\u4E0A\u6D77",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u56FD\u7F51",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u6C5F\u82CF",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u8F93\u914D\u7535\u5185\u914D",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u897F\u95E8\u5B50",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u540C\u4E1A",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u7528\u6237",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u5176\u5B83",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0}],component:[{customerType:"\u7528\u6237",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0}],project:[{customerType:"\u4E00\u5305",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u4E8C\u5305",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u57DF\u5185\u5408\u4F5C",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u57DF\u5916\u5408\u4F5C",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0},{customerType:"\u5176\u5B83",yearlyPlan:"0",planExecutionRate:"0.00%",currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0}]}),I=(r,e)=>(!e||typeof e!="object"||(e.equipment&&Array.isArray(e.equipment)&&(r.equipment=r.equipment.map(t=>{const a=e.equipment.find(o=>o.customerType===t.customerType);return a?{...t,yearlyPlan:a.yearlyPlan||"0",planExecutionRate:a.planExecutionRate||"0.00%",currentMaterialCost:Number(a.currentMaterialCost)||0,cumulativeMaterialCost:Number(a.cumulativeMaterialCost)||0,currentLaborCost:Number(a.currentLaborCost)||0,cumulativeLaborCost:Number(a.cumulativeLaborCost)||0}:t})),e.component&&Array.isArray(e.component)&&(r.component=r.component.map(t=>{const a=e.component.find(o=>o.customerType===t.customerType);return a?{...t,yearlyPlan:a.yearlyPlan||"0",planExecutionRate:a.planExecutionRate||"0.00%",currentMaterialCost:Number(a.currentMaterialCost)||0,cumulativeMaterialCost:Number(a.cumulativeMaterialCost)||0,currentLaborCost:Number(a.currentLaborCost)||0,cumulativeLaborCost:Number(a.cumulativeLaborCost)||0}:t})),e.project&&Array.isArray(e.project)&&(r.project=r.project.map(t=>{const a=e.project.find(o=>o.customerType===t.customerType);return a?{...t,yearlyPlan:a.yearlyPlan||"0",planExecutionRate:a.planExecutionRate||"0.00%",currentMaterialCost:Number(a.currentMaterialCost)||0,cumulativeMaterialCost:Number(a.cumulativeMaterialCost)||0,currentLaborCost:Number(a.currentLaborCost)||0,cumulativeLaborCost:Number(a.cumulativeLaborCost)||0}:t}))),r),A=()=>{const r=V();m.value=r.equipment,v.value=r.component,E.value=r.project},m=_([]),v=_([]),E=_([]),g=_(""),B=_(""),O=()=>{const r=[...m.value,...v.value,...E.value];let e=0,t=0;return r.forEach(a=>{a.planExecutionRate&&a.planExecutionRate!=="/"&&(e+=parseFloat(a.planExecutionRate.replace(/%/g,""))||0,t++)}),t===0?"/":(e/t).toFixed(2)+"%"},C=r=>r.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),D=K(()=>{const r={yearlyPlan:0,currentMaterialCost:0,cumulativeMaterialCost:0,currentLaborCost:0,cumulativeLaborCost:0};return m.value.forEach(e=>{e.yearlyPlan!=="/"&&(r.yearlyPlan+=parseFloat(e.yearlyPlan.replace(/,/g,""))||0),r.currentMaterialCost+=e.currentMaterialCost||0,r.cumulativeMaterialCost+=e.cumulativeMaterialCost||0,r.currentLaborCost+=e.currentLaborCost||0,r.cumulativeLaborCost+=e.cumulativeLaborCost||0}),v.value.forEach(e=>{e.yearlyPlan!=="/"&&(r.yearlyPlan+=parseFloat(e.yearlyPlan.replace(/,/g,""))||0),r.currentMaterialCost+=e.currentMaterialCost||0,r.cumulativeMaterialCost+=e.cumulativeMaterialCost||0,r.currentLaborCost+=e.currentLaborCost||0,r.cumulativeLaborCost+=e.cumulativeLaborCost||0}),E.value.forEach(e=>{e.yearlyPlan!=="/"&&(r.yearlyPlan+=parseFloat(e.yearlyPlan.replace(/,/g,""))||0),r.currentMaterialCost+=e.currentMaterialCost||0,r.cumulativeMaterialCost+=e.cumulativeMaterialCost||0,r.currentLaborCost+=e.currentLaborCost||0,r.cumulativeLaborCost+=e.cumulativeLaborCost||0}),r}),j=async r=>{try{console.log(`\u5F00\u59CB\u8BA1\u7B97\u7D2F\u8BA1\u8D39\u7528\uFF0C\u76EE\u6807\u671F\u95F4: ${r}`);const e=r.substring(0,4),t=parseInt(r.substring(5,7)),a=[];for(let s=1;s<=t;s++){const l=s.toString().padStart(2,"0"),h=`${e}-${l}`;console.log(`\u83B7\u53D6\u671F\u95F4 ${h} \u7684\u6570\u636E`),a.push(fetch(`http://47.111.95.19:3000/main-business-cost/${h}`).then(M=>M.ok?M.json():{success:!1}).catch(()=>({success:!1})))}const o=await Promise.all(a);console.log(`\u83B7\u53D6\u5230 ${o.length} \u4E2A\u6708\u4EFD\u7684\u6570\u636E`);const n={equipment:{},component:{},project:{}};o.forEach((s,l)=>{var h,M,$;s.success&&s.data?(console.log(`\u5904\u7406\u7B2C ${l+1} \u4E2A\u6708\u7684\u6570\u636E`),(h=s.data.equipment)==null||h.forEach(b=>{const p=b.customerType;n.equipment[p]||(n.equipment[p]={materialCost:0,laborCost:0}),n.equipment[p].materialCost+=Number(b.currentMaterialCost)||0,n.equipment[p].laborCost+=Number(b.currentLaborCost)||0}),(M=s.data.component)==null||M.forEach(b=>{const p=b.customerType;n.component[p]||(n.component[p]={materialCost:0,laborCost:0}),n.component[p].materialCost+=Number(b.currentMaterialCost)||0,n.component[p].laborCost+=Number(b.currentLaborCost)||0}),($=s.data.project)==null||$.forEach(b=>{const p=b.customerType;n.project[p]||(n.project[p]={materialCost:0,laborCost:0}),n.project[p].materialCost+=Number(b.currentMaterialCost)||0,n.project[p].laborCost+=Number(b.currentLaborCost)||0})):console.log(`\u7B2C ${l+1} \u4E2A\u6708\u7684\u6570\u636E\u65E0\u6548\u6216\u4E0D\u5B58\u5728`)}),console.log("\u7D2F\u8BA1\u6570\u636E\u8BA1\u7B97\u5B8C\u6210:",n),console.log("\u5F00\u59CB\u66F4\u65B0\u7D2F\u8BA1\u6570\u636E\u5230\u754C\u9762"),m.value.forEach(s=>{const l=n.equipment[s.customerType];l?(s.cumulativeMaterialCost=l.materialCost,s.cumulativeLaborCost=l.laborCost,console.log(`\u8BBE\u5907-${s.customerType}: \u6750\u6599\u7D2F\u8BA1=${l.materialCost}, \u4EBA\u5DE5\u7D2F\u8BA1=${l.laborCost}`)):(s.cumulativeMaterialCost=0,s.cumulativeLaborCost=0)}),v.value.forEach(s=>{const l=n.component[s.customerType];l?(s.cumulativeMaterialCost=l.materialCost,s.cumulativeLaborCost=l.laborCost,console.log(`\u5143\u4EF6-${s.customerType}: \u6750\u6599\u7D2F\u8BA1=${l.materialCost}, \u4EBA\u5DE5\u7D2F\u8BA1=${l.laborCost}`)):(s.cumulativeMaterialCost=0,s.cumulativeLaborCost=0)}),E.value.forEach(s=>{const l=n.project[s.customerType];l?(s.cumulativeMaterialCost=l.materialCost,s.cumulativeLaborCost=l.laborCost,console.log(`\u5DE5\u7A0B-${s.customerType}: \u6750\u6599\u7D2F\u8BA1=${l.materialCost}, \u4EBA\u5DE5\u7D2F\u8BA1=${l.laborCost}`)):(s.cumulativeMaterialCost=0,s.cumulativeLaborCost=0)}),console.log("\u7D2F\u8BA1\u8D39\u7528\u8BA1\u7B97\u548C\u66F4\u65B0\u5B8C\u6210")}catch(e){console.error("\u8BA1\u7B97\u7D2F\u8BA1\u8D39\u7528\u5931\u8D25:",e)}},f=async r=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u6570\u636E\uFF0C\u671F\u95F4: ${r}`);const e=await fetch(`http://47.111.95.19:3000/main-business-cost/${r}`);if(!e.ok){if(e.status===404){console.log("\u672A\u627E\u5230\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),A();return}throw new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25")}const t=await e.json();if(console.log("API\u8FD4\u56DE\u6570\u636E:",t),t.success&&t.data){console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76...");const a=V(),o=I(a,t.data);m.value=o.equipment,v.value=o.component,E.value=o.project,console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",{equipmentData:m.value,componentData:v.value,projectData:E.value}),await j(r)}else console.log("\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),A()}catch(e){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",e),A()}},R=async()=>{const{remarks:r,suggestions:e}=await uu(w.MAIN_BUSINESS_COST,y.value);g.value=r,B.value=e};P(()=>L.query.period,r=>{r&&(y.value=r.toString(),f(r.toString()),R())}),P(y,r=>{f(r),R()}),P([m,v,E],()=>{clearTimeout(k.value),k.value=setTimeout(()=>{j(y.value)},300)},{deep:!0});const k=_(null),z=async()=>{try{console.log("=== \u5F00\u59CB\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u6570\u636E ==="),console.log("\u671F\u95F4:",y.value),console.log("\u6A21\u5757ID:",w.MAIN_BUSINESS_COST);const r={equipment:m.value.map(o=>({customerType:o.customerType,yearlyPlan:o.yearlyPlan,planExecutionRate:o.planExecutionRate,currentMaterialCost:o.currentMaterialCost,cumulativeMaterialCost:o.cumulativeMaterialCost,currentLaborCost:o.currentLaborCost,cumulativeLaborCost:o.cumulativeLaborCost})),component:v.value.map(o=>({customerType:o.customerType,yearlyPlan:o.yearlyPlan,planExecutionRate:o.planExecutionRate,currentMaterialCost:o.currentMaterialCost,cumulativeMaterialCost:o.cumulativeMaterialCost,currentLaborCost:o.currentLaborCost,cumulativeLaborCost:o.cumulativeLaborCost})),project:E.value.map(o=>({customerType:o.customerType,yearlyPlan:o.yearlyPlan,planExecutionRate:o.planExecutionRate,currentMaterialCost:o.currentMaterialCost,cumulativeMaterialCost:o.cumulativeMaterialCost,currentLaborCost:o.currentLaborCost,cumulativeLaborCost:o.cumulativeLaborCost}))};console.log("\u8868\u5355\u6570\u636E:",r),console.log("\u6B65\u9AA41\uFF1A\u4FDD\u5B58\u5230\u4E13\u7528\u8868...");const e=await fetch("http://47.111.95.19:3000/main-business-cost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({period:y.value,data:r})});if(!e.ok){const o=await e.text();throw console.error("\u4E13\u7528\u8868\u4FDD\u5B58\u5931\u8D25\uFF0C\u54CD\u5E94:",o),new Error("\u4FDD\u5B58\u5931\u8D25")}const t=await e.json();console.log("\u4E13\u7528\u8868\u4FDD\u5B58\u6210\u529F:",t),console.log("\u6B65\u9AA42\uFF1A\u8BB0\u5F55\u63D0\u4EA4\u72B6\u6001...");const a=await eu(w.MAIN_BUSINESS_COST,y.value,r,g.value,B.value);console.log("\u63D0\u4EA4\u72B6\u6001\u8BB0\u5F55\u7ED3\u679C:",a),a?(console.log("=== \u4FDD\u5B58\u5B8C\u6210\uFF0C\u6240\u6709\u6B65\u9AA4\u6210\u529F ==="),alert("\u4FDD\u5B58\u6210\u529F")):(console.warn("=== \u4E13\u7528\u8868\u4FDD\u5B58\u6210\u529F\uFF0C\u4F46\u63D0\u4EA4\u72B6\u6001\u8BB0\u5F55\u5931\u8D25 ==="),alert("\u4FDD\u5B58\u6210\u529F\uFF0C\u4F46\u63D0\u4EA4\u72B6\u6001\u8BB0\u5F55\u5931\u8D25"))}catch(r){console.error("=== \u4FDD\u5B58\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF ===",r),alert("\u4FDD\u5B58\u5931\u8D25: "+(r instanceof Error?r.message:"\u672A\u77E5\u9519\u8BEF"))}},G=()=>{A(),g.value="",B.value="",console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")};return Q(()=>{console.log("\u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",y.value),L.query.period?f(L.query.period.toString()):f(y.value),R()}),(r,e)=>(F(),x("div",tu,[u("div",ou,[e[3]||(e[3]=u("h1",{class:"text-2xl font-bold"},"\u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u7ED3\u6784\u4E0E\u8D28\u91CF\uFF08\u6309\u5E74\u5EA6\u8BA1\u5212\u53E3\u5F84\u5206\u89E3\uFF09",-1)),u("div",ru,[i(u("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>y.value=t),type:"month",class:"px-3 py-2 border rounded"},null,512),[[d,y.value]])])]),u("div",au,[e[6]||(e[6]=u("h2",{class:"text-xl font-semibold mb-3"},"\u5BF9\u5E94\u5E74\u5EA6\u8BA1\u5212:",-1)),u("table",su,[e[5]||(e[5]=u("thead",{class:"sticky top-0 bg-white"},[u("tr",{class:"bg-gray-50"},[u("th",{class:"border border-gray-300 px-4 py-2"},"\u677F\u5757"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5BA2\u6237\u5C5E\u6027"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u8BA1\u5212\u6267\u884C\u7387"),u("th",{class:"border border-gray-300 px-4 py-2"},[T("\u5F53\u671F\u6750\u6599\u8D39\u7528 "),u("span",{class:"text-xs text-blue-600"},"(\u8F93\u5165)")]),u("th",{class:"border border-gray-300 px-4 py-2"},[T("\u7D2F\u8BA1\u6750\u6599\u8D39\u7528 "),u("span",{class:"text-xs text-green-600"},"(\u81EA\u52A8\u8BA1\u7B97)")]),u("th",{class:"border border-gray-300 px-4 py-2"},[T("\u5F53\u671F\u4EBA\u5DE5\u8D39\u7528 "),u("span",{class:"text-xs text-blue-600"},"(\u8F93\u5165)")]),u("th",{class:"border border-gray-300 px-4 py-2"},[T("\u7D2F\u8BA1\u4EBA\u5DE5\u8D39\u7528 "),u("span",{class:"text-xs text-green-600"},"(\u81EA\u52A8\u8BA1\u7B97)")])])],-1)),u("tbody",null,[(F(!0),x(S,null,N(m.value,(t,a)=>(F(),x("tr",{key:`equipment-${a}`},[a===0?(F(),x("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:m.value.length}," \u8BBE\u5907 ",8,lu)):U("",!0),u("td",nu,c(t.customerType),1),u("td",cu,[i(u("input",{"onUpdate:modelValue":o=>t.yearlyPlan=o,type:"text",class:"w-full px-2 py-1 border rounded"},null,8,pu),[[d,t.yearlyPlan]])]),u("td",iu,[i(u("input",{"onUpdate:modelValue":o=>t.planExecutionRate=o,type:"text",class:"w-full px-2 py-1 border rounded"},null,8,du),[[d,t.planExecutionRate]])]),u("td",yu,[i(u("input",{"onUpdate:modelValue":o=>t.currentMaterialCost=o,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Cu),[[d,t.currentMaterialCost,void 0,{number:!0}]])]),u("td",bu,[u("span",mu,c(C(t.cumulativeMaterialCost)),1)]),u("td",vu,[i(u("input",{"onUpdate:modelValue":o=>t.currentLaborCost=o,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Eu),[[d,t.currentLaborCost,void 0,{number:!0}]])]),u("td",xu,[u("span",Fu,c(C(t.cumulativeLaborCost)),1)])]))),128)),(F(!0),x(S,null,N(v.value,(t,a)=>(F(),x("tr",{key:`component-${a}`},[a===0?(F(),x("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:v.value.length}," \u5143\u4EF6 ",8,_u)):U("",!0),u("td",gu,c(t.customerType),1),u("td",Bu,[i(u("input",{"onUpdate:modelValue":o=>t.yearlyPlan=o,type:"text",class:"w-full px-2 py-1 border rounded"},null,8,Du),[[d,t.yearlyPlan]])]),u("td",hu,[i(u("input",{"onUpdate:modelValue":o=>t.planExecutionRate=o,type:"text",class:"w-full px-2 py-1 border rounded"},null,8,Mu),[[d,t.planExecutionRate]])]),u("td",Lu,[i(u("input",{"onUpdate:modelValue":o=>t.currentMaterialCost=o,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Au),[[d,t.currentMaterialCost,void 0,{number:!0}]])]),u("td",fu,[u("span",Tu,c(C(t.cumulativeMaterialCost)),1)]),u("td",wu,[i(u("input",{"onUpdate:modelValue":o=>t.currentLaborCost=o,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Ru),[[d,t.currentLaborCost,void 0,{number:!0}]])]),u("td",Pu,[u("span",Su,c(C(t.cumulativeLaborCost)),1)])]))),128)),(F(!0),x(S,null,N(E.value,(t,a)=>(F(),x("tr",{key:`project-${a}`},[a===0?(F(),x("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:E.value.length}," \u5DE5\u7A0B ",8,Nu)):U("",!0),u("td",Uu,c(t.customerType),1),u("td",Vu,[i(u("input",{"onUpdate:modelValue":o=>t.yearlyPlan=o,type:"text",class:"w-full px-2 py-1 border rounded"},null,8,ju),[[d,t.yearlyPlan]])]),u("td",ku,[i(u("input",{"onUpdate:modelValue":o=>t.planExecutionRate=o,type:"text",class:"w-full px-2 py-1 border rounded"},null,8,qu),[[d,t.planExecutionRate]])]),u("td",$u,[i(u("input",{"onUpdate:modelValue":o=>t.currentMaterialCost=o,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Iu),[[d,t.currentMaterialCost,void 0,{number:!0}]])]),u("td",Ou,[u("span",zu,c(C(t.cumulativeMaterialCost)),1)]),u("td",Gu,[i(u("input",{"onUpdate:modelValue":o=>t.currentLaborCost=o,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Ju),[[d,t.currentLaborCost,void 0,{number:!0}]])]),u("td",Hu,[u("span",Ku,c(C(t.cumulativeLaborCost)),1)])]))),128)),u("tr",Qu,[e[4]||(e[4]=u("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),u("td",Wu,c(C(D.value.yearlyPlan)),1),u("td",Xu,c(O()),1),u("td",Yu,c(C(D.value.currentMaterialCost)),1),u("td",Zu,c(C(D.value.cumulativeMaterialCost)),1),u("td",ue,c(C(D.value.currentLaborCost)),1),u("td",ee,c(C(D.value.cumulativeLaborCost)),1)])])])]),W(Z,{"module-id":X(w).MAIN_BUSINESS_COST,period:y.value,remarks:g.value,"onUpdate:remarks":e[1]||(e[1]=t=>g.value=t),suggestions:B.value,"onUpdate:suggestions":e[2]||(e[2]=t=>B.value=t)},null,8,["module-id","period","remarks","suggestions"]),u("div",{class:"mt-4 flex justify-end space-x-4"},[u("button",{onClick:z,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),u("button",{onClick:G,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")])]))}});var se=J(te,[["__scopeId","data-v-5402083a"]]);export{se as default};
