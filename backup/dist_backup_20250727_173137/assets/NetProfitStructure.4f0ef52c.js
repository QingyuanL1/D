import{_ as Fu,d as mu,r as _,D as Du,h as ou,B as z,o as Eu,c as D,a as e,y as b,A as F,F as P,l as I,t as d,b as Bu,m as vu,G as xu,f as E,k as H}from"./index.a1c43a78.js";import{_ as hu,r as K,M as A,l as fu}from"./FormAttachmentAndRemarks.e6065ef7.js";const _u={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},Au={class:"flex justify-between items-center mb-6"},wu={class:"flex items-center space-x-4"},Mu={class:"overflow-x-auto my-6"},Cu={class:"w-full border-collapse border border-gray-300"},Vu={class:"border border-gray-300 px-4 py-2"},Tu={class:"border border-gray-300 px-4 py-2"},Su={class:"border border-gray-300 px-4 py-2"},$u={class:"border border-gray-300 px-4 py-2"},Nu={class:"border border-gray-300 px-4 py-2"},ku={class:"border border-gray-300 px-4 py-2"},Uu={class:"border border-gray-300 px-4 py-2"},Pu={class:"border border-gray-300 px-4 py-2"},Iu={class:"bg-gray-50 font-bold"},Ru={class:"border border-gray-300 px-4 py-2"},ju={class:"border border-gray-300 px-4 py-2"},Ou={class:"border border-gray-300 px-4 py-2"},qu={class:"border border-gray-300 px-4 py-2"},Lu={class:"mt-8"},Ju={class:"overflow-x-auto my-6"},Gu={class:"w-full border-collapse border border-gray-300"},zu=["rowspan"],Hu={class:"border border-gray-300 px-4 py-2"},Ku={class:"border border-gray-300 px-4 py-2"},Qu=["onUpdate:modelValue"],Wu={class:"border border-gray-300 px-4 py-2"},Xu={class:"font-medium"},Yu={class:"border border-gray-300 px-4 py-2"},Zu={class:"font-medium"},ut={class:"border border-gray-300 px-4 py-2"},tt=["rowspan"],et={class:"border border-gray-300 px-4 py-2"},rt={class:"border border-gray-300 px-4 py-2"},ot=["onUpdate:modelValue"],at={class:"border border-gray-300 px-4 py-2"},st={class:"font-medium"},nt={class:"border border-gray-300 px-4 py-2"},lt={class:"font-medium"},ct={class:"border border-gray-300 px-4 py-2"},dt=["rowspan"],it={class:"border border-gray-300 px-4 py-2"},pt={class:"border border-gray-300 px-4 py-2"},yt=["onUpdate:modelValue"],gt={class:"border border-gray-300 px-4 py-2"},bt={class:"font-medium"},Ft={class:"border border-gray-300 px-4 py-2"},mt={class:"font-medium"},Dt={class:"border border-gray-300 px-4 py-2"},Et={class:"bg-gray-50 font-bold"},Bt={class:"border border-gray-300 px-4 py-2"},vt={class:"border border-gray-300 px-4 py-2"},xt={class:"border border-gray-300 px-4 py-2"},ht={class:"mt-8"},ft={class:"overflow-x-auto my-6"},_t={class:"w-full border-collapse border border-gray-300"},At={class:"border border-gray-300 px-4 py-2 text-center"},wt={class:"border border-gray-300 px-4 py-2"},Mt={class:"border border-gray-300 px-4 py-2"},Ct={class:"w-full px-2 py-1"},Vt={class:"border border-gray-300 px-4 py-2"},Tt=["onUpdate:modelValue","onInput"],St={class:"border border-gray-300 px-4 py-2"},$t={class:"w-full px-2 py-1"},Nt={class:"border border-gray-300 px-4 py-2"},kt={class:"w-full px-2 py-1"},Ut={class:"bg-gray-50 font-bold"},Pt={class:"border border-gray-300 px-4 py-2"},It={class:"border border-gray-300 px-4 py-2"},Rt={class:"border border-gray-300 px-4 py-2"},jt={class:"border border-gray-300 px-4 py-2"},Ot=mu({__name:"NetProfitStructure",setup(qt){var uu;const Q=xu(),y=_(((uu=Q.query.period)==null?void 0:uu.toString())||new Date().toISOString().slice(0,7)),w=_(""),M=_(""),R=()=>({mainBusiness:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"},nonMainBusiness:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"},total:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"}}),j=()=>[{customerType:"\u4E0A\u6D77",plan:"2145.03",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u56FD\u7F51",plan:"621.55",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u6C5F\u82CF",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u8F93\u914D\u7535\u5185\u914D",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u897F\u95E8\u5B50",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u540C\u4E1A",plan:"553.08",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u7528\u6237",plan:"323.8",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],O=()=>[{customerType:"\u7528\u6237",plan:"-26.21",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],q=()=>[{customerType:"\u4E00\u5305",plan:"328.91",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u4E8C\u5305",plan:"14.4",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5185\u5408\u4F5C",plan:"-35.24",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5916\u5408\u4F5C",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"69.6",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],L=()=>[{id:1,name:"\u56FA\u5E9F\u6536\u5165",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:2,name:"\u623F\u5C4B\u79DF\u91D1",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:3,name:"\u5229\u606F\u6536\u5165",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:4,name:"\u6295\u8D44\u6536\u76CA",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:5,name:"\u8865\u8D34\u6536\u5165",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:6,name:"\u5176\u4ED6",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"}],s=Du(R()),v=_(j()),x=_(O()),h=_(q()),g=_(L()),W=_([]),B=r=>isNaN(r)?"0.00":r.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),C=ou(()=>{let r=0,u=0,t=0;return v.value.forEach(a=>{var o;r+=parseFloat(a.plan.replace(/,/g,""))||0,u+=parseFloat((o=a.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0,t+=parseFloat(a.actual.replace(/,/g,""))||0}),x.value.forEach(a=>{var o;r+=parseFloat(a.plan.replace(/,/g,""))||0,u+=parseFloat((o=a.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0,t+=parseFloat(a.actual.replace(/,/g,""))||0}),h.value.forEach(a=>{var o;r+=parseFloat(a.plan.replace(/,/g,""))||0,u+=parseFloat((o=a.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0,t+=parseFloat(a.actual.replace(/,/g,""))||0}),{plan:r,currentMonthValue:u,actual:t,contribution:"100.00%"}}),V=ou(()=>{let r=0,u=0,t=0;g.value.forEach(o=>{r+=parseFloat(o.plan.replace(/,/g,""))||0,u+=parseFloat(o.currentPeriod.replace(/,/g,""))||0,t+=parseFloat(o.accumulated.replace(/,/g,""))||0});const a=r!==0?(t/r*100).toFixed(2)+"%":"0.00%";return{plan:r,currentPeriod:u,accumulated:t,progress:a}}),T=r=>{const u=parseFloat(s[r].plan.replace(/,/g,"")),t=parseFloat(s[r].cumulative.replace(/,/g,""));if(!isNaN(u)&&!isNaN(t)&&u!==0){const a=(t/u*100).toFixed(2);s[r].progress=`${a}%`}else s[r].progress="0.00%";Y()},X=async r=>{try{const[u,t]=r.split("-"),a=parseInt(t),o=[];for(let l=1;l<=a;l++){const i=`${u}-${l.toString().padStart(2,"0")}`;try{const n=await fetch(`http://47.111.95.19:3000/non-main-business-net-profit/${i}`);if(n.ok){const c=await n.json();c.data&&Array.isArray(c.data)&&o.push({period:i,data:c.data})}}catch(n){console.log(`\u8DF3\u8FC7\u6708\u4EFD ${i}:`,n)}}W.value=o,console.log("\u52A0\u8F7D\u7684\u6240\u6709\u6708\u4EFD\u6570\u636E:",o)}catch(u){console.error("\u52A0\u8F7D\u6240\u6709\u6708\u4EFD\u6570\u636E\u5931\u8D25:",u)}},au=(r,u)=>{let t=0;const a=y.value;for(const l of W.value){if(l.period===a)continue;const i=l.data.find(n=>n.id===r||n.name===u);i&&i.currentPeriod&&(t+=parseFloat(i.currentPeriod.toString().replace(/,/g,""))||0)}const o=g.value.find(l=>l.id===r);return o&&o.currentPeriod&&(t+=parseFloat(o.currentPeriod.toString().replace(/,/g,""))||0),t.toFixed(2)},S=()=>{g.value.forEach(r=>{r.accumulated=au(r.id,r.name)})},su=r=>{S();const u=parseFloat(g.value[r].plan.replace(/,/g,"")),t=parseFloat(g.value[r].accumulated.replace(/,/g,""));if(!isNaN(u)&&!isNaN(t)&&u!==0){const a=(t/u*100).toFixed(2);g.value[r].progress=`${a}%`}else t>0,g.value[r].progress="0.00%"},Y=()=>{const r=parseFloat(s.mainBusiness.plan.replace(/,/g,""))||0,u=parseFloat(s.nonMainBusiness.plan.replace(/,/g,""))||0,t=parseFloat(s.mainBusiness.current.replace(/,/g,""))||0,a=parseFloat(s.nonMainBusiness.current.replace(/,/g,""))||0,o=parseFloat(s.mainBusiness.cumulative.replace(/,/g,""))||0,l=parseFloat(s.nonMainBusiness.cumulative.replace(/,/g,""))||0,i=r+u,n=t+a,c=o+l;if(s.total.plan=i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),s.total.current=n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),s.total.cumulative=c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),i!==0){const m=(c/i*100).toFixed(2);s.total.progress=`${m}%`}else s.total.progress="0.00%"};z(()=>Q.query.period,r=>{r&&(y.value=r.toString(),J(r.toString()))}),z(y,(r,u)=>{r&&r!==u&&(console.log(`\u671F\u95F4\u53D1\u751F\u53D8\u5316: ${u} -> ${r}`),J(r),Z())}),z(()=>[s.mainBusiness.current,s.nonMainBusiness.current],async()=>{await nu()},{deep:!0});const nu=async()=>{var r,u,t,a;try{const[o]=y.value.split("-");let l=0,i=0;for(let n=1;n<=parseInt(y.value.split("-")[1]);n++){const c=`${o}-${n.toString().padStart(2,"0")}`;try{const m=await fetch(`http://47.111.95.19:3000/net-profit-structure/${c}`);if(m.ok){const f=await m.json();if(f.success&&f.data){const $=parseFloat(((r=f.data.mainBusiness)==null?void 0:r.current)||((u=f.data.mainBusiness)==null?void 0:u.actual)||0),N=parseFloat(((t=f.data.nonMainBusiness)==null?void 0:t.current)||((a=f.data.nonMainBusiness)==null?void 0:a.actual)||0);l+=$,i+=N}}}catch(m){console.log(`\u8DF3\u8FC7\u671F\u95F4 ${c} \u7684\u6570\u636E\u8BA1\u7B97:`,m)}}s.mainBusiness.cumulative=l.toFixed(2),s.nonMainBusiness.cumulative=i.toFixed(2),s.total.cumulative=(l+i).toFixed(2),T("mainBusiness"),T("nonMainBusiness")}catch(o){console.error("\u8BA1\u7B97\u7D2F\u8BA1\u503C\u5931\u8D25:",o)}},J=async r=>{var u,t,a,o,l,i,n,c,m,f,$,N,tu,eu,ru;try{console.log(`\u6B63\u5728\u52A0\u8F7D\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E\uFF0C\u671F\u95F4: ${r}`);const k=await fetch(`http://47.111.95.19:3000/net-profit-structure/${r}`);let p=null;if(k.ok){const U=await k.json();console.log("API\u8FD4\u56DE\u6570\u636E:",U),U.success&&U.data&&(p=U.data,console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76..."),s.mainBusiness={plan:((u=p.mainBusiness)==null?void 0:u.plan)||"0",current:((t=p.mainBusiness)==null?void 0:t.current)||((a=p.mainBusiness)==null?void 0:a.actual)||"0",cumulative:((o=p.mainBusiness)==null?void 0:o.cumulative)||"0",progress:((l=p.mainBusiness)==null?void 0:l.progress)||"0.00%"},s.nonMainBusiness={plan:((i=p.nonMainBusiness)==null?void 0:i.plan)||"0",current:((n=p.nonMainBusiness)==null?void 0:n.current)||((c=p.nonMainBusiness)==null?void 0:c.actual)||"0",cumulative:((m=p.nonMainBusiness)==null?void 0:m.cumulative)||"0",progress:((f=p.nonMainBusiness)==null?void 0:f.progress)||"0.00%"},s.total={plan:(($=p.total)==null?void 0:$.plan)||"0",current:((N=p.total)==null?void 0:N.current)||((tu=p.total)==null?void 0:tu.actual)||"0",cumulative:((eu=p.total)==null?void 0:eu.cumulative)||"0",progress:((ru=p.total)==null?void 0:ru.progress)||"0.00%"},Y(),console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",s))}else throw console.log("\u52A0\u8F7D\u6570\u636E\u5931\u8D25"),new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25");await cu(r),await iu(r)}catch(k){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",k);const p=R();s.mainBusiness={...p.mainBusiness},s.nonMainBusiness={...p.nonMainBusiness},s.total={...p.total}}},lu=async r=>{try{const u=await fetch(`http://47.111.95.19:3000/main-business-net-profit/monthly-data/${r}`);if(u.ok){const t=await u.json();if(t.success)return t.data}return console.error(`\u83B7\u53D6${r}\u6708\u5EA6\u6570\u636E\u5931\u8D25:`,u.status),null}catch(u){return console.error(`\u83B7\u53D6${r}\u6708\u5EA6\u6570\u636E\u5931\u8D25:`,u),null}},G=(r,u)=>{var t;if(u){r.plan=((t=u.yearlyPlan)==null?void 0:t.toString())||r.plan,r.currentMonthValue=B(u.currentAmount||0),r.actual=B(u.accumulatedIncome||0);const a=C.value.actual;if(a>0){const o=((parseFloat(r.actual.replace(/,/g,""))||0)/a*100).toFixed(2);r.contribution=`${o}%`}else r.contribution="0.00%"}},cu=async r=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u51C0\u5229\u6DA6\u8D21\u732E\u6570\u636E\uFF0C\u671F\u95F4: ${r}`);const u=await fetch(`http://47.111.95.19:3000/main-business-net-profit/${r}`);let t=[];if(u.ok){const o=await u.json();console.log("API\u8FD4\u56DE\u6570\u636E:",o),o.success&&o.data&&Array.isArray(o.data)&&(t=o.data,console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76..."))}else u.status===404?(console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),v.value=j(),x.value=O(),h.value=q()):console.log("\u52A0\u8F7D\u6570\u636E\u5931\u8D25\uFF0C\u4F7F\u7528\u9884\u7B97\u6570\u636E\u586B\u5145");const a=(o,l,i)=>o.map(n=>{const c=l.find(m=>m.segment===i&&m.customerType===n.customerType);return c?{...n,plan:c.plan||n.plan,currentMonthValue:c.currentMonthValue||n.currentMonthValue,actual:c.actual||n.actual,contribution:c.contribution||n.contribution}:n});v.value=a(v.value,t,"\u8BBE\u5907"),x.value=a(x.value,t,"\u5143\u4EF6"),h.value=a(h.value,t,"\u5DE5\u7A0B"),await du()}catch(u){console.error("\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",u)}},du=async()=>{try{console.log("\u5F00\u59CB\u83B7\u53D6\u6708\u5EA6\u6570\u636E\uFF0C\u671F\u95F4:",y.value);const r=await lu(y.value);if(!r){console.error("\u83B7\u53D6\u6708\u5EA6\u6570\u636E\u5931\u8D25");return}v.value.forEach(u=>{var a;const t=(a=r.equipment)==null?void 0:a.find(o=>o.customer===u.customerType);G(u,t)}),x.value.forEach(u=>{var a;const t=(a=r.components)==null?void 0:a.find(o=>o.customer===u.customerType);G(u,t)}),h.value.forEach(u=>{var a;const t=(a=r.engineering)==null?void 0:a.find(o=>o.customer===u.customerType);G(u,t)}),console.log("\u7D2F\u8BA1\u503C\u8BA1\u7B97\u5B8C\u6210")}catch(r){console.error("\u8BA1\u7B97\u7D2F\u8BA1\u503C\u5931\u8D25:",r)}},iu=async r=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u6570\u636E\uFF0C\u671F\u95F4: ${r}`);const u=await fetch(`http://47.111.95.19:3000/non-main-business-net-profit/${r}`);if(!u.ok){if(u.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4FDD\u6301\u5E74\u5EA6\u8BA1\u5212\u4F46\u6E05\u7A7A\u5F53\u671F\u503C"),g.value=g.value.map(a=>({...a,currentPeriod:"0",accumulated:"0",progress:"0.00%"})),await X(r),S();return}throw new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25")}const t=await u.json();if(console.log("\u975E\u4E3B\u8425\u4E1A\u52A1API\u8FD4\u56DE\u6570\u636E:",t),t.success&&t.data&&Array.isArray(t.data)){const a=t.data;console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76...");const o=(l,i)=>l.map(n=>{const c=i.find(m=>m.id===n.id||m.name===n.name);return c?{...n,plan:c.plan||n.plan,currentPeriod:c.currentPeriod||n.currentPeriod,accumulated:c.accumulated||n.accumulated,progress:c.progress||n.progress}:n});g.value=o(g.value,a),console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",g.value)}await X(r),S()}catch(u){console.error("\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",u);const t=L();g.value=[...t]}},pu=async()=>{try{const r={mainBusiness:s.mainBusiness,nonMainBusiness:s.nonMainBusiness,total:s.total},u={period:y.value,data:r};console.log("\u4FDD\u5B58\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E:",u);const t=await fetch("http://47.111.95.19:3000/net-profit-structure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!t.ok){const a=await t.text();throw new Error(`\u4FDD\u5B58\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E\u5931\u8D25: ${t.status} - ${a}`)}await yu(),await gu(),await K(A.NET_PROFIT_STRUCTURE,y.value,r,w.value,M.value),alert("\u4FDD\u5B58\u6210\u529F")}catch(r){console.error("\u4FDD\u5B58\u5931\u8D25:",r),alert("\u4FDD\u5B58\u5931\u8D25: "+(r instanceof Error?r.message:"\u672A\u77E5\u9519\u8BEF"))}},yu=async()=>{try{const r=[...v.value.map(o=>({...o,segment:"\u8BBE\u5907"})),...x.value.map(o=>({...o,segment:"\u5143\u4EF6"})),...h.value.map(o=>({...o,segment:"\u5DE5\u7A0B"}))],u={period:y.value,data:r};console.log("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",u);const t=await fetch("http://47.111.95.19:3000/main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!t.ok){const o=await t.text();throw new Error(`\u4FDD\u5B58\u5931\u8D25: ${t.status} - ${o}`)}const a={equipment:v.value,component:x.value,project:h.value};await K(A.MAIN_BUSINESS_NET_PROFIT,y.value,a,"","")}catch(r){throw console.error("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",r),r}},gu=async()=>{try{S();const r={period:y.value,data:g.value};console.log("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",r);const u=await fetch("http://47.111.95.19:3000/non-main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!u.ok){const t=await u.text();throw new Error(`\u4FDD\u5B58\u5931\u8D25: ${u.status} - ${t}`)}await K(A.NON_MAIN_BUSINESS_NET_PROFIT,y.value,g.value,"","")}catch(r){throw console.error("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",r),r}},bu=()=>{const r=R();s.mainBusiness={...r.mainBusiness},s.nonMainBusiness={...r.nonMainBusiness},s.total={...r.total},v.value=j(),x.value=O(),h.value=q(),g.value=L(),console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")},Z=async()=>{const{remarks:r,suggestions:u}=await fu(A.NET_PROFIT_STRUCTURE,y.value);w.value=r,M.value=u};return Eu(()=>{console.log("\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",y.value),J(y.value),Z()}),(r,u)=>(E(),D("div",_u,[e("div",Au,[u[17]||(u[17]=e("h1",{class:"text-2xl font-bold"},"\u51C0\u5229\u6DA6\u7ED3\u6784\u4E0E\u8D28\u91CF\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),u[18]||(u[18]=e("div",{class:"text-gray-500"},"(\u6309\u5E74\u5EA6\u8BA1\u5212\u53E3\u5F84\u5206\u89E3)",-1)),e("div",wu,[b(e("input",{"onUpdate:modelValue":u[0]||(u[0]=t=>y.value=t),type:"month",class:"px-3 py-2 border rounded"},null,512),[[F,y.value]])])]),e("div",Mu,[e("table",Cu,[u[24]||(u[24]=e("thead",{class:"sticky top-0 bg-white"},[e("tr",{class:"bg-gray-50"},[e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),e("tbody",null,[e("tr",null,[u[19]||(u[19]=e("td",{class:"border border-gray-300 px-4 py-2 text-center"},"1",-1)),u[20]||(u[20]=e("td",{class:"border border-gray-300 px-4 py-2"},"\u4E3B\u8425\u4E1A\u52A1",-1)),e("td",Vu,[b(e("input",{"onUpdate:modelValue":u[1]||(u[1]=t=>s.mainBusiness.plan=t),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.mainBusiness.plan]])]),e("td",Tu,[b(e("input",{"onUpdate:modelValue":u[2]||(u[2]=t=>s.mainBusiness.current=t),type:"text",class:"w-full px-2 py-1 border rounded",onInput:u[3]||(u[3]=t=>T("mainBusiness"))},null,544),[[F,s.mainBusiness.current]])]),e("td",Su,[b(e("input",{"onUpdate:modelValue":u[4]||(u[4]=t=>s.mainBusiness.cumulative=t),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.mainBusiness.cumulative]])]),e("td",$u,[b(e("input",{"onUpdate:modelValue":u[5]||(u[5]=t=>s.mainBusiness.progress=t),type:"text",class:"w-full px-2 py-1 border rounded"},null,512),[[F,s.mainBusiness.progress]])])]),e("tr",null,[u[21]||(u[21]=e("td",{class:"border border-gray-300 px-4 py-2 text-center"},"2",-1)),u[22]||(u[22]=e("td",{class:"border border-gray-300 px-4 py-2"},"\u975E\u4E3B\u8425\u4E1A\u52A1",-1)),e("td",Nu,[b(e("input",{"onUpdate:modelValue":u[6]||(u[6]=t=>s.nonMainBusiness.plan=t),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.nonMainBusiness.plan]])]),e("td",ku,[b(e("input",{"onUpdate:modelValue":u[7]||(u[7]=t=>s.nonMainBusiness.current=t),type:"text",class:"w-full px-2 py-1 border rounded",onInput:u[8]||(u[8]=t=>T("nonMainBusiness"))},null,544),[[F,s.nonMainBusiness.current]])]),e("td",Uu,[b(e("input",{"onUpdate:modelValue":u[9]||(u[9]=t=>s.nonMainBusiness.cumulative=t),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.nonMainBusiness.cumulative]])]),e("td",Pu,[b(e("input",{"onUpdate:modelValue":u[10]||(u[10]=t=>s.nonMainBusiness.progress=t),type:"text",class:"w-full px-2 py-1 border rounded"},null,512),[[F,s.nonMainBusiness.progress]])])]),e("tr",Iu,[u[23]||(u[23]=e("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),e("td",Ru,[b(e("input",{"onUpdate:modelValue":u[11]||(u[11]=t=>s.total.plan=t),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.plan]])]),e("td",ju,[b(e("input",{"onUpdate:modelValue":u[12]||(u[12]=t=>s.total.current=t),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.current]])]),e("td",Ou,[b(e("input",{"onUpdate:modelValue":u[13]||(u[13]=t=>s.total.cumulative=t),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.cumulative]])]),e("td",qu,[b(e("input",{"onUpdate:modelValue":u[14]||(u[14]=t=>s.total.progress=t),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.progress]])])])])])]),e("div",Lu,[u[28]||(u[28]=e("h2",{class:"text-xl font-bold mb-4"},"\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),e("div",Ju,[e("table",Gu,[u[27]||(u[27]=e("thead",{class:"sticky top-0 bg-white"},[e("tr",{class:"bg-gray-50"},[e("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u677F\u5757"),e("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5BA2\u6237\u5C5E\u6027"),e("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5E74\u5EA6\u8BA1\u5212"),e("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5F53\u6708\u503C"),e("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u7D2F\u8BA1\u503C"),e("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5206\u7C7B\u8D21\u732E\u5360\u6BD4")])],-1)),e("tbody",null,[(E(!0),D(P,null,I(v.value,(t,a)=>{var o;return E(),D("tr",{key:`equipment-${a}`},[a===0?(E(),D("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:v.value.length}," \u8BBE\u5907 ",8,zu)):H("",!0),e("td",Hu,d(t.customerType),1),e("td",Ku,[b(e("input",{"onUpdate:modelValue":l=>t.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,Qu),[[F,t.plan]])]),e("td",Wu,[e("span",Xu,d(B(parseFloat((o=t.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0)),1)]),e("td",Yu,[e("span",Zu,d(t.actual),1)]),e("td",ut,d(t.contribution),1)])}),128)),(E(!0),D(P,null,I(x.value,(t,a)=>{var o;return E(),D("tr",{key:`component-${a}`},[a===0?(E(),D("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:x.value.length}," \u5143\u4EF6 ",8,tt)):H("",!0),e("td",et,d(t.customerType),1),e("td",rt,[b(e("input",{"onUpdate:modelValue":l=>t.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,ot),[[F,t.plan]])]),e("td",at,[e("span",st,d(B(parseFloat((o=t.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0)),1)]),e("td",nt,[e("span",lt,d(t.actual),1)]),e("td",ct,d(t.contribution),1)])}),128)),(E(!0),D(P,null,I(h.value,(t,a)=>{var o;return E(),D("tr",{key:`project-${a}`},[a===0?(E(),D("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:h.value.length}," \u5DE5\u7A0B ",8,dt)):H("",!0),e("td",it,d(t.customerType),1),e("td",pt,[b(e("input",{"onUpdate:modelValue":l=>t.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,yt),[[F,t.plan]])]),e("td",gt,[e("span",bt,d(B(parseFloat((o=t.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0)),1)]),e("td",Ft,[e("span",mt,d(t.actual),1)]),e("td",Dt,d(t.contribution),1)])}),128)),e("tr",Et,[u[25]||(u[25]=e("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),e("td",Bt,d(B(C.value.plan)),1),e("td",vt,d(B(C.value.currentMonthValue)),1),e("td",xt,d(B(C.value.actual)),1),u[26]||(u[26]=e("td",{class:"border border-gray-300 px-4 py-2"}," 100.00% ",-1))])])])])]),e("div",ht,[u[31]||(u[31]=e("h2",{class:"text-xl font-bold mb-4"},"\u975E\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),e("div",ft,[e("table",_t,[u[30]||(u[30]=e("thead",{class:"sticky top-0 bg-white"},[e("tr",{class:"bg-gray-50"},[e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),e("tbody",null,[(E(!0),D(P,null,I(g.value,(t,a)=>(E(),D("tr",{key:a},[e("td",At,d(t.id),1),e("td",wt,d(t.name),1),e("td",Mt,[e("span",Ct,d(t.plan),1)]),e("td",Vt,[b(e("input",{"onUpdate:modelValue":o=>t.currentPeriod=o,type:"text",class:"w-full px-2 py-1 border rounded",onInput:o=>su(a)},null,40,Tt),[[F,t.currentPeriod]])]),e("td",St,[e("span",$t,d(t.accumulated),1)]),e("td",Nt,[e("span",kt,d(t.progress),1)])]))),128)),e("tr",Ut,[u[29]||(u[29]=e("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),e("td",Pt,d(B(V.value.plan)),1),e("td",It,d(B(V.value.currentPeriod)),1),e("td",Rt,d(B(V.value.accumulated)),1),e("td",jt,d(V.value.progress),1)])])])])]),e("div",{class:"mt-4 flex justify-end space-x-4"},[e("button",{onClick:pu,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),e("button",{onClick:bu,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")]),Bu(hu,{"module-id":vu(A).NET_PROFIT_STRUCTURE,period:y.value,remarks:w.value,"onUpdate:remarks":u[15]||(u[15]=t=>w.value=t),suggestions:M.value,"onUpdate:suggestions":u[16]||(u[16]=t=>M.value=t)},null,8,["module-id","period","remarks","suggestions"])]))}});var Gt=Fu(Ot,[["__scopeId","data-v-0c8b9267"]]);export{Gt as default};
