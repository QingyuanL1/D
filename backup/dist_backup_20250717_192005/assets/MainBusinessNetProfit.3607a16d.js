import{_ as eu,d as tu,r as V,c as ou,B as K,o as ru,b as B,e as t,y as q,A as U,F as Y,g as G,t as y,k as au,h as nu,G as su,v as C,f as J}from"./index.783577c6.js";import{_ as lu,r as cu,M as z,l as pu}from"./FormAttachmentAndRemarks.2126132d.js";const iu={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},du={class:"flex justify-between items-center mb-6"},yu={class:"flex items-center space-x-4"},gu={class:"overflow-x-auto my-6"},Fu={class:"w-full border-collapse border border-gray-300"},Eu=["rowspan"],bu={class:"border border-gray-300 px-4 py-2"},Du={class:"border border-gray-300 px-4 py-2"},mu=["onUpdate:modelValue"],hu={class:"border border-gray-300 px-4 py-2"},Bu={class:"font-medium"},Cu={class:"border border-gray-300 px-4 py-2"},Au={class:"font-medium"},_u={class:"border border-gray-300 px-4 py-2"},fu={class:"border border-gray-300 px-4 py-2"},vu={class:"text-blue-600"},xu=["rowspan"],Mu={class:"border border-gray-300 px-4 py-2"},Tu={class:"border border-gray-300 px-4 py-2"},Vu=["onUpdate:modelValue"],wu={class:"border border-gray-300 px-4 py-2"},$u={class:"font-medium"},Iu={class:"border border-gray-300 px-4 py-2"},ku={class:"font-medium"},Nu={class:"border border-gray-300 px-4 py-2"},Su={class:"border border-gray-300 px-4 py-2"},Pu={class:"text-blue-600"},ju=["rowspan"],Lu={class:"border border-gray-300 px-4 py-2"},qu={class:"border border-gray-300 px-4 py-2"},Uu=["onUpdate:modelValue"],Ru={class:"border border-gray-300 px-4 py-2"},Ou={class:"font-medium"},Yu={class:"border border-gray-300 px-4 py-2"},Gu={class:"font-medium"},Ju={class:"border border-gray-300 px-4 py-2"},zu={class:"border border-gray-300 px-4 py-2"},Hu={class:"text-blue-600"},Ku={class:"bg-gray-50 font-bold"},Qu={class:"border border-gray-300 px-4 py-2"},Wu={class:"border border-gray-300 px-4 py-2"},Xu={class:"border border-gray-300 px-4 py-2"},Zu={class:"border border-gray-300 px-4 py-2"},ue=tu({__name:"MainBusinessNetProfit",setup(ee){var H;const P=su(),g=V(((H=P.query.period)==null?void 0:H.toString())||new Date().toISOString().slice(0,7)),w=V(""),$=V(""),I=()=>[{customerType:"\u4E0A\u6D77",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u56FD\u7F51",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u6C5F\u82CF",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u8F93\u914D\u7535\u5185\u914D",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u897F\u95E8\u5B50",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u540C\u4E1A",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u7528\u6237",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],k=()=>[{customerType:"\u7528\u6237",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],N=()=>[{customerType:"\u4E00\u5305",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u4E8C\u5305",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5185\u5408\u4F5C",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5916\u5408\u4F5C",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],F=V(I()),E=V(k()),b=V(N()),A=o=>o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),Q=async o=>{var r,e,s;try{const a=`${o}-01`,[l,p,i]=await Promise.all([fetch(`http://47.111.95.19:3000/main-business-income/${a}`),fetch(`http://47.111.95.19:3000/main-business-cost/${o}`),fetch(`http://47.111.95.19:3000/cost-center-structure/${o}`)]),c=await Promise.all([l.ok?l.json():null,p.ok?p.json():null,i.ok?i.json():null]),n={income:(r=c[0])!=null&&r.success?c[0].data:null,cost:(e=c[1])!=null&&e.success?c[1].data:null,center:(s=c[2])!=null&&s.success?c[2].data:null};return console.log(`${o} API\u54CD\u5E94\u72B6\u6001:`,{\u6536\u5165API:l.ok?"\u6210\u529F":`\u5931\u8D25(${l.status})`,\u6210\u672CAPI:p.ok?"\u6210\u529F":`\u5931\u8D25(${p.status})`,\u6210\u672C\u4E2D\u5FC3API:i.ok?"\u6210\u529F":`\u5931\u8D25(${i.status})`}),console.log(`${o} API\u6570\u636E\u7ED3\u6784:`,{income:n.income?Object.keys(n.income):"null",cost:n.cost?Object.keys(n.cost):"null",center:n.center?Object.keys(n.center):"null"}),n.center&&console.log(`${o} \u6210\u672C\u4E2D\u5FC3\u8BE6\u7EC6\u6570\u636E:`,{equipmentData:n.center.equipmentData?n.center.equipmentData.length:"null",componentData:n.center.componentData?n.center.componentData.length:"null",engineeringData:n.center.engineeringData?n.center.engineeringData.length:"null"}),n}catch(a){return console.error(`\u83B7\u53D6${o}\u6570\u636E\u5931\u8D25:`,a),{income:null,cost:null,center:null}}},R=(o,r,e)=>{try{let s=0,a=0,l=0;if(e.income){const i={\u8BBE\u5907:"equipment",\u5143\u4EF6:"components",\u5DE5\u7A0B:"engineering"},c=e.income[i[r]];if(console.log(`\u6536\u5165\u6570\u636E\u67E5\u627E: ${r} -> ${i[r]}`,{categoryData:c?c.length:"null",lookingFor:o.customerType}),c&&Array.isArray(c)){console.log("\u6536\u5165\u7C7B\u522B\u6570\u636E:",c.map(u=>({customer:u.customer,currentMonthIncome:u.currentMonthIncome})));const n=c.find(u=>u.customer===o.customerType);n&&(s=parseFloat(n.currentMonthIncome)||0,console.log("\u627E\u5230\u6536\u5165\u9879:",n))}}if(e.cost){const i={\u8BBE\u5907:"equipment",\u5143\u4EF6:"component",\u5DE5\u7A0B:"project"},c=e.cost[i[r]];if(console.log(`\u6210\u672C\u6570\u636E\u67E5\u627E: ${r} -> ${i[r]}`,{categoryData:c?c.length:"null",lookingFor:o.customerType}),c&&Array.isArray(c)){console.log("\u6210\u672C\u7C7B\u522B\u6570\u636E:",c.map(u=>({customerType:u.customerType,currentMaterialCost:u.currentMaterialCost,currentLaborCost:u.currentLaborCost})));const n=c.find(u=>u.customerType===o.customerType);if(n){const u=parseFloat(n.currentMaterialCost)||0,D=parseFloat(n.currentLaborCost)||0;a=u,o.currentLaborCost=D,console.log("\u627E\u5230\u6210\u672C\u9879:",{costItem:n,currentMaterialCost:u,currentLaborCost:D,\u76F4\u63A5\u8D39\u7528:a})}}}if(e.center){const i={\u8BBE\u5907:"equipmentData",\u5143\u4EF6:"componentData",\u5DE5\u7A0B:"engineeringData"},c=e.center[i[r]];if(console.log(`\u6210\u672C\u4E2D\u5FC3\u6570\u636E\u67E5\u627E: ${r} -> ${i[r]}`,{categoryData:c?c.length:"null",lookingFor:o.customerType}),c&&Array.isArray(c)){console.log("\u6210\u672C\u4E2D\u5FC3\u7C7B\u522B\u6570\u636E:",c.map(u=>({customerType:u.customerType,currentMonthIncome:u.currentMonthIncome})));let n=c.find(u=>u.customerType===o.customerType);!n&&o.customerType==="\u5176\u5B83"?n=c.find(u=>u.customerType==="\u5176\u4ED6"):!n&&o.customerType==="\u5176\u4ED6"&&(n=c.find(u=>u.customerType==="\u5176\u5B83")),n&&(l=parseFloat(n.currentMonthIncome)||0,console.log("\u627E\u5230\u6210\u672C\u4E2D\u5FC3\u9879:",{centerItem:n,costCenterActual:l}))}}const p=s-a-l;return(s>0||a>0||l>0)&&console.log(`${r} - ${o.customerType} \u51C0\u5229\u6DA6\u8BA1\u7B97:`,{\u516C\u5F0F:"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165 - \u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u76F4\u63A5\u8D39\u7528 - \u6210\u672C\u4E2D\u5FC3\u5F53\u6708\u5B9E\u9645",\u4E3B\u8425\u4E1A\u52A1\u6536\u5165:s,\u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u76F4\u63A5\u8D39\u7528:a,\u6210\u672C\u4E2D\u5FC3\u5F53\u6708\u5B9E\u9645:l,\u51C0\u5229\u6DA6:p,\u8BA1\u7B97\u8FC7\u7A0B:`${s} - ${a} - ${l} = ${p}`}),p}catch(s){return console.error("\u8BA1\u7B97\u5F53\u6708\u51C0\u5229\u6DA6\u5931\u8D25:",s),0}},j=ou(()=>{let o=0,r=0,e=0;F.value.forEach(a=>{var l,p,i;o+=parseFloat((l=a.plan)==null?void 0:l.replace(/,/g,""))||0,r+=parseFloat((p=a.currentMonthValue)==null?void 0:p.replace(/,/g,""))||0,e+=parseFloat((i=a.actual)==null?void 0:i.replace(/,/g,""))||0}),E.value.forEach(a=>{var l,p,i;o+=parseFloat((l=a.plan)==null?void 0:l.replace(/,/g,""))||0,r+=parseFloat((p=a.currentMonthValue)==null?void 0:p.replace(/,/g,""))||0,e+=parseFloat((i=a.actual)==null?void 0:i.replace(/,/g,""))||0}),b.value.forEach(a=>{var l,p,i;o+=parseFloat((l=a.plan)==null?void 0:l.replace(/,/g,""))||0,r+=parseFloat((p=a.currentMonthValue)==null?void 0:p.replace(/,/g,""))||0,e+=parseFloat((i=a.actual)==null?void 0:i.replace(/,/g,""))||0});let s="0.00%";return o!==0&&(s=`${(e/o*100).toFixed(2)}%`),{plan:o,currentMonthValue:r,actual:e,contribution:s}}),T=(o,r,e)=>o.map(s=>{var l;const a=r==null?void 0:r.find(p=>p.segment===e&&p.customerType===s.customerType);return a?{customerType:s.customerType,plan:((l=a.yearlyPlan)==null?void 0:l.toString())||"0",currentMonthValue:"0",actual:"0",contribution:"0.00%",yearlyPlan:a.yearlyPlan||0}:s}),L=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u51C0\u5229\u6DA6\u8D21\u732E\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/main-business-net-profit/${o}`);let e=[];if(r.ok){const s=await r.json();console.log("API\u8FD4\u56DE\u6570\u636E:",s),s.success&&s.data&&Array.isArray(s.data)&&(e=s.data,console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76..."))}else r.status===404?(console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),F.value=I(),E.value=k(),b.value=N()):console.log("\u52A0\u8F7D\u6570\u636E\u5931\u8D25\uFF0C\u4F7F\u7528\u9884\u7B97\u6570\u636E\u586B\u5145");F.value=T(I(),e,"\u8BBE\u5907"),E.value=T(k(),e,"\u5143\u4EF6"),b.value=T(N(),e,"\u5DE5\u7A0B"),console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",{equipmentData:F.value,componentData:E.value,projectData:b.value}),await W()}catch(r){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",r),F.value=T(I(),[],"\u8BBE\u5907"),E.value=T(k(),[],"\u5143\u4EF6"),b.value=T(N(),[],"\u5DE5\u7A0B")}},W=async()=>{var o,r,e,s,a,l;try{const[p]=g.value.split("-"),i=parseInt(g.value.split("-")[1]),c=[];for(let u=1;u<=i;u++){const D=`${p}-${u.toString().padStart(2,"0")}`;c.push(Q(D))}const n=await Promise.all(c);for(const u of F.value){let D=0,_=0;for(let d=0;d<n.length;d++){const v=R(u,"\u8BBE\u5907",n[d]);if(D+=v,d===n.length-1){_=v;const x=n[d];if(x.cost){const h=x.cost.equipment;if(h&&Array.isArray(h)){const M=h.find(S=>S.customerType===u.customerType);M&&(u.currentLaborCost=parseFloat(M.currentLaborCost)||0)}}}}u.currentMonthValue=_.toFixed(2),u.actual=D.toFixed(2);const m=parseFloat(((o=u.plan)==null?void 0:o.replace(/,/g,""))||"0"),f=parseFloat(((r=u.actual)==null?void 0:r.replace(/,/g,""))||"0");if(!isNaN(m)&&!isNaN(f)&&m!==0){const d=(f/m*100).toFixed(2);u.contribution=`${d}%`}else u.contribution="0.00%"}for(const u of E.value){let D=0,_=0;for(let d=0;d<n.length;d++){const v=R(u,"\u5143\u4EF6",n[d]);if(D+=v,d===n.length-1){_=v;const x=n[d];if(x.cost){const h=x.cost.component;if(h&&Array.isArray(h)){const M=h.find(S=>S.customerType===u.customerType);M&&(u.currentLaborCost=parseFloat(M.currentLaborCost)||0)}}}}u.currentMonthValue=_.toFixed(2),u.actual=D.toFixed(2);const m=parseFloat(((e=u.plan)==null?void 0:e.replace(/,/g,""))||"0"),f=parseFloat(((s=u.actual)==null?void 0:s.replace(/,/g,""))||"0");if(!isNaN(m)&&!isNaN(f)&&m!==0){const d=(f/m*100).toFixed(2);u.contribution=`${d}%`}else u.contribution="0.00%"}for(const u of b.value){let D=0,_=0;for(let d=0;d<n.length;d++){const v=R(u,"\u5DE5\u7A0B",n[d]);if(D+=v,d===n.length-1){_=v;const x=n[d];if(x.cost){const h=x.cost.project;if(h&&Array.isArray(h)){const M=h.find(S=>S.customerType===u.customerType);M&&(u.currentLaborCost=parseFloat(M.currentLaborCost)||0)}}}}u.currentMonthValue=_.toFixed(2),u.actual=D.toFixed(2);const m=parseFloat(((a=u.plan)==null?void 0:a.replace(/,/g,""))||"0"),f=parseFloat(((l=u.actual)==null?void 0:l.replace(/,/g,""))||"0");if(!isNaN(m)&&!isNaN(f)&&m!==0){const d=(f/m*100).toFixed(2);u.contribution=`${d}%`}else u.contribution="0.00%"}console.log("=== \u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8BA1\u7B97\u5B8C\u6210 ==="),console.log("\u8BBE\u5907\u677F\u5757:",F.value.map(u=>({\u5BA2\u6237:u.customerType,\u5F53\u6708\u503C:u.currentMonthValue,\u7D2F\u8BA1\u503C:u.actual,\u8D21\u732E\u5360\u6BD4:u.contribution}))),console.log("\u5143\u4EF6\u677F\u5757:",E.value.map(u=>({\u5BA2\u6237:u.customerType,\u5F53\u6708\u503C:u.currentMonthValue,\u7D2F\u8BA1\u503C:u.actual,\u8D21\u732E\u5360\u6BD4:u.contribution}))),console.log("\u5DE5\u7A0B\u677F\u5757:",b.value.map(u=>({\u5BA2\u6237:u.customerType,\u5F53\u6708\u503C:u.currentMonthValue,\u7D2F\u8BA1\u503C:u.actual,\u8D21\u732E\u5360\u6BD4:u.contribution}))),console.log("=== \u8BA1\u7B97\u5B8C\u6210 ===")}catch(p){console.error("\u6279\u91CF\u8BA1\u7B97\u7D2F\u8BA1\u503C\u5931\u8D25:",p)}};K(()=>P.query.period,o=>{o&&(g.value=o.toString(),L(o.toString()),O())}),K(g,o=>{L(o),O()});const X=async()=>{try{const o=[...F.value.map(a=>({...a,segment:"\u8BBE\u5907"})),...E.value.map(a=>({...a,segment:"\u5143\u4EF6"})),...b.value.map(a=>({...a,segment:"\u5DE5\u7A0B"}))],r={period:g.value,data:o};console.log("\u4FDD\u5B58\u6570\u636E:",r);const e=await fetch("http://47.111.95.19:3000/main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){const a=await e.text();throw new Error(`\u4FDD\u5B58\u5931\u8D25: ${e.status} - ${a}`)}const s={equipment:F.value,component:E.value,project:b.value};await cu(z.MAIN_BUSINESS_NET_PROFIT,g.value,s,w.value,$.value),alert("\u4FDD\u5B58\u6210\u529F")}catch(o){console.error("\u4FDD\u5B58\u5931\u8D25:",o),alert("\u4FDD\u5B58\u5931\u8D25: "+(o instanceof Error?o.message:"\u672A\u77E5\u9519\u8BEF"))}},Z=()=>{F.value=I(),E.value=k(),b.value=N(),w.value="",$.value="",console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")},O=async()=>{const{remarks:o,suggestions:r}=await pu(z.MAIN_BUSINESS_NET_PROFIT,g.value);w.value=o,$.value=r},uu=()=>{console.log("=== \u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8BA1\u7B97\u516C\u5F0F\u6D4B\u8BD5 ==="),console.log("\u8BA1\u7B97\u516C\u5F0F\uFF1A\u5F53\u6708\u503C = \u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u5206\u89E3\u4E2D\u7684\u5F53\u6708\u6536\u5165 - \u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u7ED3\u6784\u4E0E\u8D28\u91CF\u4E2D\u7684\u5F53\u671F\u76F4\u63A5\u8D39\u7528 - \u6210\u672C\u4E2D\u5FC3\u7ED3\u6784\u4E2D\u7684\u5F53\u6708\u5B9E\u9645"),console.log("\u7D2F\u8BA1\u503C = \u5404\u4E2A\u5F53\u6708\u503C\u76F8\u52A0\uFF08\u4ECE1\u6708\u5230\u5F53\u524D\u6708\uFF09"),console.log("\u5F53\u524D\u671F\u95F4:",g.value),console.log("\u8BBE\u5907\u677F\u5757\u6570\u636E:",F.value.length,"\u9879"),console.log("\u5143\u4EF6\u677F\u5757\u6570\u636E:",E.value.length,"\u9879"),console.log("\u5DE5\u7A0B\u677F\u5757\u6570\u636E:",b.value.length,"\u9879"),console.log("API\u8C03\u7528\u8BF4\u660E:"),console.log("- \u4E3B\u8425\u4E1A\u52A1\u6536\u5165: /main-business-income/{period}-01 (\u9700\u8981\u65E5\u671F\u683C\u5F0F)"),console.log("- \u4E3B\u8425\u4E1A\u52A1\u6210\u672C: /main-business-cost/{period} (YYYY-MM\u683C\u5F0F)"),console.log("- \u6210\u672C\u4E2D\u5FC3\u7ED3\u6784: /cost-center-structure/{period} (YYYY-MM\u683C\u5F0F)"),console.log("=== \u6D4B\u8BD5\u5B8C\u6210 ===")};return ru(()=>{console.log("\u4E3B\u8425\u51C0\u5229\u6DA6\u8D21\u732E\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",g.value),uu(),P.query.period?L(P.query.period.toString()):L(g.value),O()}),(o,r)=>(C(),B("div",iu,[t("div",du,[r[3]||(r[3]=t("h1",{class:"text-2xl font-bold"},"\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5",-1)),t("div",yu,[q(t("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>g.value=e),type:"month",class:"px-3 py-2 border rounded"},null,512),[[U,g.value]])])]),t("div",gu,[t("table",Fu,[r[5]||(r[5]=t("thead",{class:"sticky top-0 bg-white"},[t("tr",{class:"bg-gray-50"},[t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u677F\u5757"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5BA2\u6237\u5C5E\u6027"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5E74\u5EA6\u8BA1\u5212"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5F53\u6708\u503C"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u7D2F\u8BA1\u503C"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5206\u7C7B\u8D21\u732E\u5360\u6BD4"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5F53\u671F\u4EBA\u5DE5\u8D39")])],-1)),t("tbody",null,[(C(!0),B(Y,null,G(F.value,(e,s)=>{var a;return C(),B("tr",{key:`equipment-${s}`},[s===0?(C(),B("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:F.value.length}," \u8BBE\u5907 ",8,Eu)):J("",!0),t("td",bu,y(e.customerType),1),t("td",Du,[q(t("input",{"onUpdate:modelValue":l=>e.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,mu),[[U,e.plan]])]),t("td",hu,[t("span",Bu,y(A(parseFloat((a=e.currentMonthValue)==null?void 0:a.replace(/,/g,""))||0)),1)]),t("td",Cu,[t("span",Au,y(e.actual),1)]),t("td",_u,y(e.contribution),1),t("td",fu,[t("span",vu,y(A(e.currentLaborCost||0)),1)])])}),128)),(C(!0),B(Y,null,G(E.value,(e,s)=>{var a;return C(),B("tr",{key:`component-${s}`},[s===0?(C(),B("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:E.value.length}," \u5143\u4EF6 ",8,xu)):J("",!0),t("td",Mu,y(e.customerType),1),t("td",Tu,[q(t("input",{"onUpdate:modelValue":l=>e.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,Vu),[[U,e.plan]])]),t("td",wu,[t("span",$u,y(A(parseFloat((a=e.currentMonthValue)==null?void 0:a.replace(/,/g,""))||0)),1)]),t("td",Iu,[t("span",ku,y(e.actual),1)]),t("td",Nu,y(e.contribution),1),t("td",Su,[t("span",Pu,y(A(e.currentLaborCost||0)),1)])])}),128)),(C(!0),B(Y,null,G(b.value,(e,s)=>{var a;return C(),B("tr",{key:`project-${s}`},[s===0?(C(),B("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:b.value.length}," \u5DE5\u7A0B ",8,ju)):J("",!0),t("td",Lu,y(e.customerType),1),t("td",qu,[q(t("input",{"onUpdate:modelValue":l=>e.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,Uu),[[U,e.plan]])]),t("td",Ru,[t("span",Ou,y(A(parseFloat((a=e.currentMonthValue)==null?void 0:a.replace(/,/g,""))||0)),1)]),t("td",Yu,[t("span",Gu,y(e.actual),1)]),t("td",Ju,y(e.contribution),1),t("td",zu,[t("span",Hu,y(A(e.currentLaborCost||0)),1)])])}),128)),t("tr",Ku,[r[4]||(r[4]=t("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),t("td",Qu,y(A(j.value.plan)),1),t("td",Wu,y(A(j.value.currentMonthValue)),1),t("td",Xu,y(A(j.value.actual)),1),t("td",Zu,y(j.value.contribution),1)])])])]),t("div",{class:"mt-4 flex justify-end space-x-4"},[t("button",{onClick:X,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),t("button",{onClick:Z,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")]),au(lu,{"module-id":nu(z).MAIN_BUSINESS_NET_PROFIT,period:g.value,remarks:w.value,"onUpdate:remarks":r[1]||(r[1]=e=>w.value=e),suggestions:$.value,"onUpdate:suggestions":r[2]||(r[2]=e=>$.value=e)},null,8,["module-id","period","remarks","suggestions"])]))}});var re=eu(ue,[["__scopeId","data-v-3d9609a8"]]);export{re as default};
