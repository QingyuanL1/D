import{_ as $,d as V,r as D,c as b,B as v,o as U,b as d,e as a,y as F,z as f,F as j,g as C,C as q,t as N,G as O,v as y,f as M,A as h}from"./index.23f10bf8.js";const R={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},J={class:"flex justify-between items-center mb-6"},L={class:"flex items-center space-x-4"},z=["value"],G={key:0,class:"overflow-x-auto my-6"},I={class:"w-full border-collapse border border-gray-300"},P={class:"sticky top-0 bg-white"},H={class:"bg-gray-50"},Y={class:"border border-gray-300 px-4 py-2"},Q={key:0},W={key:1},X=["rowspan"],Z={class:"border border-gray-300 px-4 py-2"},K={class:"border border-gray-300 px-4 py-2 text-right"},ee={key:0,class:"flex items-center"},ue=["onUpdate:modelValue"],te=["onUpdate:modelValue"],ae={class:"bg-blue-100 font-bold text-lg"},re={class:"border border-gray-300 px-4 py-2 text-right"},de={key:0},ye={key:1},oe={key:2},ie={key:1,class:"text-center py-12 text-gray-500"},le=V({__name:"BudgetPlanning",setup(me){var _;const n=O(),B=D(((_=n.query.period)==null?void 0:_.toString())||new Date().getFullYear().toString()),o=D(""),p=[{key:"new_orders",name:"\u65B0\u7B7E\u8BA2\u5355\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u8BBE\u5907",items:[{id:1,projectName:"\u4E0A\u6D77\u9879\u76EE",yearlyBudget:3e4},{id:2,projectName:"\u56FD\u7F51\u9879\u76EE",yearlyBudget:8e3},{id:3,projectName:"\u6C5F\u82CF\u9879\u76EE",yearlyBudget:5e3},{id:4,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:4e3},{id:5,projectName:"\u897F\u95E8\u5B50\u9879\u76EE",yearlyBudget:5e3},{id:6,projectName:"\u540C\u4E1A\u9879\u76EE",yearlyBudget:5e3},{id:7,projectName:"\u7528\u6237\u9879\u76EE",yearlyBudget:5e3},{id:8,projectName:"\u5176\u5B83\u9879\u76EE",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:9,projectName:"\u7528\u6237\u9879\u76EE",yearlyBudget:4e3}]},{name:"\u5DE5\u7A0B",items:[{id:10,projectName:"\u4E00\u5305\u9879\u76EE",yearlyBudget:3900},{id:11,projectName:"\u4E8C\u5305\u9879\u76EE",yearlyBudget:2200},{id:12,projectName:"\u57DF\u5185\u5408\u4F5C\u9879\u76EE",yearlyBudget:5e3},{id:13,projectName:"\u57DF\u5916\u5408\u4F5C\u9879\u76EE",yearlyBudget:1e3},{id:14,projectName:"\u5176\u5B83\u9879\u76EE",yearlyBudget:1900}]}]},{key:"project_tracking",name:"\u9879\u76EE\u8DDF\u8E2A\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:15,projectName:"\u4E0A\u6D77",yearlyBudget:5e5},{id:16,projectName:"\u56FD\u7F51",yearlyBudget:105e4},{id:17,projectName:"\u6C5F\u82CF",yearlyBudget:3e5},{id:18,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:19,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:20,projectName:"\u540C\u4E1A",yearlyBudget:0},{id:21,projectName:"\u7528\u6237",yearlyBudget:2e4},{id:22,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:23,projectName:"\u7528\u6237",yearlyBudget:0}]},{name:"\u5DE5\u7A0B",items:[{id:24,projectName:"\u4E00\u5305",yearlyBudget:15e4},{id:25,projectName:"\u4E8C\u5305",yearlyBudget:600},{id:26,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:95e3},{id:27,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:5e3},{id:28,projectName:"\u5176\u5B83",yearlyBudget:2e3}]}]},{key:"business_income_structure",name:"\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u8425\u4E1A\u6536\u5165",items:[{id:29,projectName:"\u4E3B\u8425\u4E1A\u52A1",yearlyBudget:59400},{id:30,projectName:"\u975E\u4E3B\u8425\u4E1A\u52A1",yearlyBudget:600}]}]},{key:"main_business_income_breakdown",name:"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u5206\u89E3\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:31,projectName:"\u4E0A\u6D77",yearlyBudget:22e3},{id:32,projectName:"\u56FD\u7F51",yearlyBudget:5e3},{id:33,projectName:"\u6C5F\u82CF",yearlyBudget:3e3},{id:34,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:2e3},{id:35,projectName:"\u897F\u95E8\u5B50",yearlyBudget:1e3},{id:36,projectName:"\u540C\u4E1A",yearlyBudget:3e3},{id:37,projectName:"\u7528\u6237",yearlyBudget:2e3},{id:38,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:39,projectName:"\u7528\u6237",yearlyBudget:1e3}]},{name:"\u5DE5\u7A0B",items:[{id:40,projectName:"\u4E00\u5305",yearlyBudget:3800},{id:41,projectName:"\u4E8C\u5305",yearlyBudget:700},{id:42,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:1e4},{id:43,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:0},{id:44,projectName:"\u5176\u5B83",yearlyBudget:1500}]}]},{key:"current_year_order_to_income",name:"\u4E3B\u8425\u4E1A\u52A1\u2014\u2014\u5F53\u5E74\u8BA2\u5355\u8F6C\u6536\u5165",data:[{name:"\u8BBE\u5907",items:[{id:45,projectName:"\u4E0A\u6D77",yearlyBudget:5593.15},{id:46,projectName:"\u56FD\u7F51",yearlyBudget:1358.11},{id:47,projectName:"\u6C5F\u82CF",yearlyBudget:1132.24},{id:48,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:49,projectName:"\u897F\u95E8\u5B50",yearlyBudget:9.94},{id:50,projectName:"\u540C\u4E1A",yearlyBudget:765.74},{id:51,projectName:"\u7528\u6237",yearlyBudget:90.95},{id:52,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:53,projectName:"\u7528\u6237",yearlyBudget:97.86}]},{name:"\u5DE5\u7A0B",items:[{id:54,projectName:"\u4E00\u5305",yearlyBudget:2029.79},{id:55,projectName:"\u4E8C\u5305",yearlyBudget:7.94},{id:56,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:1744.52},{id:57,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:12.7},{id:58,projectName:"\u5176\u5B83",yearlyBudget:238.62}]}]},{key:"stock_order_to_income",name:"\u4E3B\u8425\u4E1A\u52A1\u2014\u2014\u5B58\u91CF\u8BA2\u5355\u8F6C\u6536\u5165",data:[{name:"\u8BBE\u5907",items:[{id:59,projectName:"\u4E0A\u6D77",yearlyBudget:39050.53},{id:60,projectName:"\u56FD\u7F51",yearlyBudget:7802.2},{id:61,projectName:"\u6C5F\u82CF",yearlyBudget:6341.95},{id:62,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:63,projectName:"\u897F\u95E8\u5B50",yearlyBudget:14.11},{id:64,projectName:"\u540C\u4E1A",yearlyBudget:1003.79},{id:65,projectName:"\u7528\u6237",yearlyBudget:535.45},{id:66,projectName:"\u5176\u5B83",yearlyBudget:221.15}]},{name:"\u5143\u4EF6",items:[{id:67,projectName:"\u7528\u6237",yearlyBudget:34.95}]},{name:"\u5DE5\u7A0B",items:[{id:68,projectName:"\u4E00\u5305",yearlyBudget:13327.25},{id:69,projectName:"\u4E8C\u5305",yearlyBudget:954.35},{id:70,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:1906.28},{id:71,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:7590.69},{id:72,projectName:"\u5176\u5B83",yearlyBudget:1677.3}]}]},{key:"non_main_business",name:"\u975E\u4E3B\u8425\u4E1A\u52A1\u60C5\u51B5",data:[{name:"\u975E\u4E3B\u8425\u4E1A\u52A1",items:[{id:73,projectName:"\u56FA\u5E9F\u6536\u5165",yearlyBudget:100},{id:74,projectName:"\u623F\u5C4B\u79DF\u91D1",yearlyBudget:100},{id:75,projectName:"\u5229\u606F\u6536\u5165",yearlyBudget:100},{id:76,projectName:"\u6295\u8D44\u6536\u76CA",yearlyBudget:130},{id:77,projectName:"\u8865\u8D34\u6536\u5165",yearlyBudget:130},{id:78,projectName:"\u5176\u4ED6",yearlyBudget:40}]}]},{key:"inventory_structure_quality",name:"\u5B58\u91CF\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u8BBE\u5907",items:[{id:79,projectName:"\u4E0A\u6D77",yearlyBudget:39151.53},{id:80,projectName:"\u56FD\u7F51",yearlyBudget:7841.48},{id:81,projectName:"\u6C5F\u82CF",yearlyBudget:6793.01},{id:82,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:83,projectName:"\u897F\u95E8\u5B50",yearlyBudget:28.46},{id:84,projectName:"\u540C\u4E1A",yearlyBudget:821.55},{id:85,projectName:"\u7528\u6237",yearlyBudget:577.37},{id:86,projectName:"\u5176\u5B83",yearlyBudget:220.08}]},{name:"\u5143\u4EF6",items:[{id:87,projectName:"\u7528\u6237",yearlyBudget:26.6}]},{name:"\u5DE5\u7A0B",items:[{id:88,projectName:"\u4E00\u5305",yearlyBudget:12720.17},{id:89,projectName:"\u4E8C\u5305",yearlyBudget:960.55},{id:90,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:1818.79},{id:91,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:8063.91},{id:92,projectName:"\u5176\u5B83",yearlyBudget:1973.08}]}]},{key:"bid_fulfillment_status",name:"\u4E2D\u6807\u672A\u5C65\u7EA6\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:93,projectName:"\u4E0A\u6D77",yearlyBudget:31055.26},{id:94,projectName:"\u56FD\u7F51",yearlyBudget:2798.76},{id:95,projectName:"\u6C5F\u82CF",yearlyBudget:5085.93},{id:96,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:97,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:98,projectName:"\u540C\u4E1A",yearlyBudget:0},{id:99,projectName:"\u7528\u6237",yearlyBudget:0},{id:100,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:101,projectName:"\u7528\u6237",yearlyBudget:0}]},{name:"\u5DE5\u7A0B",items:[{id:102,projectName:"\u4E00\u5305",yearlyBudget:8281.13},{id:103,projectName:"\u4E8C\u5305",yearlyBudget:444.83},{id:104,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:702.04},{id:105,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:0},{id:106,projectName:"\u5176\u5B83",yearlyBudget:21.93}]}]},{key:"work_in_progress",name:"\u5728\u4EA7\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:107,projectName:"\u4E0A\u6D77",yearlyBudget:4726.55},{id:108,projectName:"\u56FD\u7F51",yearlyBudget:5036.79},{id:109,projectName:"\u6C5F\u82CF",yearlyBudget:1603.09},{id:110,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:111,projectName:"\u897F\u95E8\u5B50",yearlyBudget:28.46},{id:112,projectName:"\u540C\u4E1A",yearlyBudget:749.99},{id:113,projectName:"\u7528\u6237",yearlyBudget:520.4},{id:114,projectName:"\u5176\u5B83",yearlyBudget:205.32}]},{name:"\u5143\u4EF6",items:[{id:115,projectName:"\u7528\u6237",yearlyBudget:26.6}]},{name:"\u5DE5\u7A0B",items:[{id:116,projectName:"\u4E00\u5305",yearlyBudget:4388.98},{id:117,projectName:"\u4E8C\u5305",yearlyBudget:421.2},{id:118,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:4062.14},{id:119,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:1603.51},{id:120,projectName:"\u5176\u5B83",yearlyBudget:2492.58}]}]},{key:"contract_inventory",name:"\u5E93\u5B58\u60C5\u51B5(\u5408\u540C\u5B58\u91CF)",data:[{name:"\u8BBE\u5907",items:[{id:121,projectName:"\u4E0A\u6D77",yearlyBudget:1924.96},{id:122,projectName:"\u56FD\u7F51",yearlyBudget:0},{id:123,projectName:"\u6C5F\u82CF",yearlyBudget:0},{id:124,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:125,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:126,projectName:"\u540C\u4E1A",yearlyBudget:71.56},{id:127,projectName:"\u7528\u6237",yearlyBudget:56.97},{id:128,projectName:"\u5176\u5B83",yearlyBudget:14.76}]},{name:"\u5143\u4EF6",items:[{id:129,projectName:"\u7528\u6237",yearlyBudget:0}]},{name:"\u5DE5\u7A0B",items:[{id:130,projectName:"\u4E00\u5305",yearlyBudget:50.06},{id:131,projectName:"\u4E8C\u5305",yearlyBudget:94.52},{id:132,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:825.8},{id:133,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:11.81},{id:134,projectName:"\u5176\u5B83",yearlyBudget:1299.29}]}]},{key:"main_business_cost_structure",name:"\u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u8BBE\u5907",items:[{id:135,projectName:"\u4E0A\u6D77",yearlyBudget:17398.82},{id:136,projectName:"\u56FD\u7F51",yearlyBudget:6890.12},{id:137,projectName:"\u6C5F\u82CF",yearlyBudget:3534.29},{id:138,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:139,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:140,projectName:"\u540C\u4E1A",yearlyBudget:2828.35},{id:141,projectName:"\u7528\u6237",yearlyBudget:4658.44},{id:142,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:143,projectName:"\u7528\u6237",yearlyBudget:0}]},{name:"\u5DE5\u7A0B",items:[{id:144,projectName:"\u4E00\u5305",yearlyBudget:3283.3},{id:145,projectName:"\u4E8C\u5305",yearlyBudget:659.15},{id:146,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:9700},{id:147,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:0},{id:148,projectName:"\u5176\u5B83",yearlyBudget:1366.9}]}]},{key:"department_cost_center_profit_loss",name:"\u90E8\u95E8\u6210\u672C\u4E2D\u5FC3\u8BA1\u5165\u635F\u76CA\u60C5\u51B5",data:[{name:"\u90E8\u95E8\u6210\u672C\u4E2D\u5FC3",items:[{id:149,projectName:"\u603B\u7ECF\u7406\u5BA4",yearlyBudget:736.83},{id:150,projectName:"\u4F01\u7BA1\u90E8",yearlyBudget:501.3},{id:151,projectName:"\u8D22\u52A1\u90E8",yearlyBudget:0},{id:152,projectName:"\u9500\u552E\u90E8",yearlyBudget:1614.28},{id:153,projectName:"\u5E02\u573A\u90E8",yearlyBudget:0},{id:154,projectName:"\u8425\u8FD0\u90E8",yearlyBudget:906.4},{id:155,projectName:"\u7814\u6280\u90E8",yearlyBudget:1069.78},{id:156,projectName:"C-GIS\u4E8B\u4E1A\u90E8",yearlyBudget:1894.69},{id:157,projectName:"\u5DE5\u7A0B\u4E8B\u4E1A\u90E8",yearlyBudget:1620.43}]}]},{key:"main_business_contribution_rate_structure",name:"\u4E3B\u8425\u4E1A\u52A1\u8FB9\u9645\u8D21\u732E\u7387\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u8BBE\u5907",items:[{id:158,projectName:"\u4E0A\u6D77",yearlyBudget:28.22},{id:159,projectName:"\u56FD\u7F51",yearlyBudget:20.19},{id:160,projectName:"\u6C5F\u82CF",yearlyBudget:8},{id:161,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:162,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:163,projectName:"\u540C\u4E1A",yearlyBudget:25.92},{id:164,projectName:"\u7528\u6237",yearlyBudget:0},{id:165,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:166,projectName:"\u7528\u6237",yearlyBudget:0}]},{name:"\u5DE5\u7A0B",items:[{id:167,projectName:"\u4E00\u5305",yearlyBudget:26},{id:168,projectName:"\u4E8C\u5305",yearlyBudget:15},{id:169,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:8},{id:170,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:6},{id:171,projectName:"\u5176\u5B83",yearlyBudget:15}]}]},{key:"cost_estimate_personnel_withdrawals",name:"\u6210\u672C\u6682\u4F30\u4EBA\u5E93\u548C\u8BA1\u63D0\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:172,projectName:"\u4E0A\u6D77",yearlyBudget:586.5},{id:173,projectName:"\u56FD\u7F51",yearlyBudget:0},{id:174,projectName:"\u6C5F\u82CF",yearlyBudget:0},{id:175,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:176,projectName:"\u897F\u95E8\u5B50",yearlyBudget:62.13},{id:177,projectName:"\u540C\u4E1A",yearlyBudget:0},{id:178,projectName:"\u7528\u6237",yearlyBudget:199.74},{id:179,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:180,projectName:"\u7528\u6237",yearlyBudget:0}]},{name:"\u5DE5\u7A0B",items:[{id:181,projectName:"\u4E00\u5305",yearlyBudget:3644.44},{id:182,projectName:"\u4E8C\u5305",yearlyBudget:2341.8},{id:183,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:1023.15},{id:184,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:487.1},{id:185,projectName:"\u5176\u5B83",yearlyBudget:788.07}]}]},{key:"main_business_gross_profit_rate_structure",name:"\u4E3B\u8425\u4E1A\u52A1\u6BDB\u5229\u7387\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u8BBE\u5907",items:[{id:186,projectName:"\u4E0A\u6D77",yearlyBudget:21.99},{id:187,projectName:"\u56FD\u7F51",yearlyBudget:13.83},{id:188,projectName:"\u6C5F\u82CF",yearlyBudget:8},{id:189,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:190,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:191,projectName:"\u540C\u4E1A",yearlyBudget:22.43},{id:192,projectName:"\u7528\u6237",yearlyBudget:11.68},{id:193,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:194,projectName:"\u7528\u6237",yearlyBudget:0}]},{name:"\u5DE5\u7A0B",items:[{id:195,projectName:"\u4E00\u5305",yearlyBudget:26},{id:196,projectName:"\u4E8C\u5305",yearlyBudget:15},{id:197,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:8},{id:198,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:6},{id:199,projectName:"\u5176\u5B83",yearlyBudget:15}]}]},{key:"net_profit_structure_quality",name:"\u51C0\u5229\u6DA6\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u51C0\u5229\u6DA6",items:[{id:200,projectName:"\u4E3B\u8425\u4E1A\u52A1",yearlyBudget:3871.58},{id:201,projectName:"\u975E\u4E3B\u8425\u4E1A\u52A1",yearlyBudget:128.42}]}]},{key:"main_business_net_profit_contribution",name:"\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:202,projectName:"\u4E0A\u6D77",yearlyBudget:2145.03},{id:203,projectName:"\u56FD\u7F51",yearlyBudget:621.55},{id:204,projectName:"\u6C5F\u82CF",yearlyBudget:0},{id:205,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:0},{id:206,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:207,projectName:"\u540C\u4E1A",yearlyBudget:553.08},{id:208,projectName:"\u7528\u6237",yearlyBudget:323.8},{id:209,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:210,projectName:"\u7528\u6237",yearlyBudget:-26.21}]},{name:"\u5DE5\u7A0B",items:[{id:211,projectName:"\u4E00\u5305",yearlyBudget:328.91},{id:212,projectName:"\u4E8C\u5305",yearlyBudget:14.4},{id:213,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:-35.24},{id:214,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:0},{id:215,projectName:"\u5176\u5B83",yearlyBudget:69.6}]}]},{key:"non_main_business_net_profit_contribution",name:"\u975E\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5",data:[{name:"\u975E\u4E3B\u8425\u4E1A\u52A1",items:[{id:216,projectName:"\u56FA\u5E9F\u6536\u5165",yearlyBudget:12.83},{id:217,projectName:"\u623F\u5C4B\u79DF\u91D1",yearlyBudget:25.58},{id:218,projectName:"\u5229\u606F\u6536\u5165",yearlyBudget:25.58},{id:219,projectName:"\u6295\u8D44\u6536\u76CA",yearlyBudget:33.25},{id:220,projectName:"\u8865\u8D34\u6536\u5165",yearlyBudget:33.25},{id:221,projectName:"\u5176\u4ED6",yearlyBudget:10.23}]}]},{key:"payment_structure_quality",name:"\u6536\u6B3E\u7ED3\u6784\u4E0E\u8D28\u91CF",data:[{name:"\u8BBE\u5907",items:[{id:222,projectName:"\u4E0A\u6D77",yearlyBudget:25e3},{id:223,projectName:"\u56FD\u7F51",yearlyBudget:5e3},{id:224,projectName:"\u6C5F\u82CF",yearlyBudget:3500},{id:225,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:3e3},{id:226,projectName:"\u897F\u95E8\u5B50",yearlyBudget:3500},{id:227,projectName:"\u540C\u4E1A",yearlyBudget:3500},{id:228,projectName:"\u7528\u6237",yearlyBudget:3500},{id:229,projectName:"\u5176\u5B83",yearlyBudget:0}]},{name:"\u5143\u4EF6",items:[{id:230,projectName:"\u7528\u6237",yearlyBudget:3e3}]},{name:"\u5DE5\u7A0B",items:[{id:231,projectName:"\u4E00\u5305",yearlyBudget:2800},{id:232,projectName:"\u4E8C\u5305",yearlyBudget:1700},{id:233,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:4e3},{id:234,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:1e3},{id:235,projectName:"\u5176\u5B83",yearlyBudget:1500}]}]},{key:"accounts_receivable_situation",name:"\u5E94\u6536\u8D26\u6B3E\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:236,projectName:"\u4E0A\u6D77",yearlyBudget:3558.98},{id:237,projectName:"\u56FD\u7F51",yearlyBudget:5190.93},{id:238,projectName:"\u6C5F\u82CF",yearlyBudget:1154.56},{id:239,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:176.86},{id:240,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:241,projectName:"\u540C\u4E1A",yearlyBudget:2028.53},{id:242,projectName:"\u7528\u6237",yearlyBudget:1727.31},{id:243,projectName:"\u5176\u5B83",yearlyBudget:303.55}]},{name:"\u5143\u4EF6",items:[{id:244,projectName:"\u7528\u6237",yearlyBudget:458.54}]},{name:"\u5DE5\u7A0B",items:[{id:245,projectName:"\u4E00\u5305",yearlyBudget:385.47},{id:246,projectName:"\u4E8C\u5305",yearlyBudget:189.12},{id:247,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:2772.83},{id:248,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:752.14},{id:249,projectName:"\u5176\u5B83",yearlyBudget:488.67}]}]},{key:"overdue_accounts_receivable_situation",name:"\u903E\u671F\u5E94\u6536\u8D26\u6B3E\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:250,projectName:"\u4E0A\u6D77",yearlyBudget:1349.6},{id:251,projectName:"\u56FD\u7F51",yearlyBudget:462.01},{id:252,projectName:"\u6C5F\u82CF",yearlyBudget:1123.94},{id:253,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:176.86},{id:254,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:255,projectName:"\u540C\u4E1A",yearlyBudget:46.23},{id:256,projectName:"\u7528\u6237",yearlyBudget:1705.24},{id:257,projectName:"\u5176\u5B83",yearlyBudget:391.31}]},{name:"\u5143\u4EF6",items:[{id:258,projectName:"\u7528\u6237",yearlyBudget:380.94}]},{name:"\u5DE5\u7A0B",items:[{id:259,projectName:"\u4E00\u5305",yearlyBudget:106.86},{id:260,projectName:"\u4E8C\u5305",yearlyBudget:189.12},{id:261,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:358.51},{id:262,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:564.23},{id:263,projectName:"\u5176\u5B83",yearlyBudget:324.3}]}]},{key:"bad_debt_provision_situation",name:"\u574F\u8D26\u51C6\u5907\u60C5\u51B5",data:[{name:"\u8BBE\u5907",items:[{id:264,projectName:"\u4E0A\u6D77",yearlyBudget:235.75},{id:265,projectName:"\u56FD\u7F51",yearlyBudget:76.77},{id:266,projectName:"\u6C5F\u82CF",yearlyBudget:79.63},{id:267,projectName:"\u8F93\u914D\u7535\u5185\u914D",yearlyBudget:163.42},{id:268,projectName:"\u897F\u95E8\u5B50",yearlyBudget:0},{id:269,projectName:"\u540C\u4E1A",yearlyBudget:10.33},{id:270,projectName:"\u7528\u6237",yearlyBudget:1490.63},{id:271,projectName:"\u5176\u5B83",yearlyBudget:381.37}]},{name:"\u5143\u4EF6",items:[{id:272,projectName:"\u7528\u6237",yearlyBudget:14.76}]},{name:"\u5DE5\u7A0B",items:[{id:273,projectName:"\u4E00\u5305",yearlyBudget:13.94},{id:274,projectName:"\u4E8C\u5305",yearlyBudget:66.5},{id:275,projectName:"\u57DF\u5185\u5408\u4F5C",yearlyBudget:71.29},{id:276,projectName:"\u57DF\u5916\u5408\u4F5C",yearlyBudget:76.52},{id:277,projectName:"\u5176\u5B83",yearlyBudget:16.89}]}]}],k=b(()=>p),c=D([]),A=b(()=>{let t=0;return c.value.forEach(e=>{e.items.forEach(u=>{t+=u.yearlyBudget||0})}),t}),g=()=>{if(!o.value){c.value=[];return}const t=p.find(e=>e.key===o.value);t&&(c.value=JSON.parse(JSON.stringify(t.data)))},E=async t=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u9884\u7B97\u8BA1\u5212\u6570\u636E\uFF0C\u671F\u95F4: ${t}`);const e=await fetch(`http://47.111.95.19:3000/budget-planning/${t}`);if(!e.ok){if(e.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E");return}throw new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25")}const u=await e.json();console.log("API\u8FD4\u56DE\u6570\u636E:",u),u.success&&u.data&&(u.data.selectedTable&&(o.value=u.data.selectedTable,g()),u.data.modifications&&x(u.data.modifications))}catch(e){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",e)}},x=t=>{Object.keys(t).forEach(e=>{const u=p.find(r=>r.key===e);u&&t[e]&&t[e].forEach(r=>{const l=u.data.find(i=>i.name===r.name);l&&r.items.forEach(i=>{const m=l.items.find(s=>s.id===i.id);m&&(m.yearlyBudget=i.yearlyBudget)})})}),o.value&&g()};v(()=>n.query.period,t=>{t&&(B.value=t.toString(),E(t.toString()))}),v(B,t=>{E(t)});const w=async()=>{try{const t={};p.forEach(r=>{const l=[];r.data.forEach(i=>{const m={name:i.name,items:i.items.map(s=>({id:s.id,projectName:s.projectName,yearlyBudget:s.yearlyBudget}))};l.push(m)}),t[r.key]=l});const e={period:B.value,data:{selectedTable:o.value,modifications:t,timestamp:new Date().toISOString()}};console.log("\u4FDD\u5B58\u9884\u7B97\u8BA1\u5212\u6570\u636E:",e);const u=await fetch("http://47.111.95.19:3000/budget-planning",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!u.ok){const r=await u.text();throw new Error(`\u4FDD\u5B58\u5931\u8D25: ${u.status} - ${r}`)}alert("\u9884\u7B97\u8BA1\u5212\u4FDD\u5B58\u6210\u529F")}catch(t){console.error("\u4FDD\u5B58\u5931\u8D25:",t),alert("\u4FDD\u5B58\u5931\u8D25: "+(t instanceof Error?t.message:"\u672A\u77E5\u9519\u8BEF"))}},S=()=>{confirm("\u786E\u5B9A\u8981\u91CD\u7F6E\u5F53\u524D\u8868\u683C\u7684\u9884\u7B97\u6570\u636E\u5417\uFF1F")&&o.value&&(g(),console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E"))},T=()=>{if(!o.value){alert("\u8BF7\u5148\u9009\u62E9\u8981\u5BFC\u51FA\u7684\u8868\u683C");return}const t=p.find(i=>i.key===o.value);if(!t)return;let e=`\u677F\u5757\u5C5E\u6027,\u5BA2\u6237\u5C5E\u6027,\u5E74\u5EA6\u8BA1\u5212\uFF08\u4E07\u5143\uFF09
`;c.value.forEach(i=>{i.items.forEach(m=>{e+=`${i.name},${m.projectName},${m.yearlyBudget}
`})}),e+=`\u5408\u8BA1,,${A.value.toFixed(2)}
`;const u=new Blob(["\uFEFF"+e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),l=URL.createObjectURL(u);r.setAttribute("href",l),r.setAttribute("download",`${t.name}_${B.value}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)};return U(()=>{console.log("\u9884\u7B97\u8BA1\u5212\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",B.value),n.query.period?E(n.query.period.toString()):E(B.value)}),(t,e)=>(y(),d("div",R,[a("div",J,[e[4]||(e[4]=a("h1",{class:"text-2xl font-bold"},"\u5E74\u5EA6\u9884\u7B97\u8BA1\u5212\u8868",-1)),a("div",L,[F(a("select",{"onUpdate:modelValue":e[0]||(e[0]=u=>o.value=u),class:"px-3 py-2 border rounded",onChange:g},[e[2]||(e[2]=a("option",{value:""},"\u8BF7\u9009\u62E9\u8868\u683C",-1)),(y(!0),d(j,null,C(k.value,u=>(y(),d("option",{key:u.key,value:u.key},N(u.name),9,z))),128))],544),[[f,o.value]]),F(a("select",{"onUpdate:modelValue":e[1]||(e[1]=u=>B.value=u),class:"px-3 py-2 border rounded"},e[3]||(e[3]=[q('<option value="2020" data-v-6e634b8a>2020\u5E74</option><option value="2021" data-v-6e634b8a>2021\u5E74</option><option value="2022" data-v-6e634b8a>2022\u5E74</option><option value="2023" data-v-6e634b8a>2023\u5E74</option><option value="2024" data-v-6e634b8a>2024\u5E74</option><option value="2025" data-v-6e634b8a>2025\u5E74</option><option value="2026" data-v-6e634b8a>2026\u5E74</option><option value="2027" data-v-6e634b8a>2027\u5E74</option><option value="2028" data-v-6e634b8a>2028\u5E74</option><option value="2029" data-v-6e634b8a>2029\u5E74</option><option value="2030" data-v-6e634b8a>2030\u5E74</option>',11)]),512),[[f,B.value]])])]),c.value.length>0?(y(),d("div",G,[a("table",I,[a("thead",P,[a("tr",H,[e[5]||(e[5]=a("th",{class:"border border-gray-300 px-4 py-2"},"\u677F\u5757\u5C5E\u6027",-1)),e[6]||(e[6]=a("th",{class:"border border-gray-300 px-4 py-2"},"\u5BA2\u6237\u5C5E\u6027",-1)),a("th",Y,[o.value==="main_business_contribution_rate_structure"||o.value==="main_business_gross_profit_rate_structure"?(y(),d("span",Q,"\u5E74\u5EA6\u8BA1\u5212\uFF08%\uFF09")):(y(),d("span",W,"\u5E74\u5EA6\u8BA1\u5212\uFF08\u4E07\u5143\uFF09"))])])]),a("tbody",null,[(y(!0),d(j,null,C(c.value,(u,r)=>(y(),d(j,{key:u.name},[(y(!0),d(j,null,C(u.items,(l,i)=>(y(),d("tr",{key:`${r}-${i}`},[i===0?(y(),d("td",{key:0,rowspan:u.items.length,class:"border border-gray-300 px-4 py-2 font-medium text-center bg-gray-50"},N(u.name),9,X)):M("",!0),a("td",Z,N(l.projectName),1),a("td",K,[o.value==="main_business_contribution_rate_structure"||o.value==="main_business_gross_profit_rate_structure"?(y(),d("div",ee,[F(a("input",{"onUpdate:modelValue":m=>l.yearlyBudget=m,type:"number",class:"flex-1 px-2 py-1 border rounded text-right",step:"0.01"},null,8,ue),[[h,l.yearlyBudget,void 0,{number:!0}]]),e[7]||(e[7]=a("span",{class:"ml-1"},"%",-1))])):F((y(),d("input",{key:1,"onUpdate:modelValue":m=>l.yearlyBudget=m,type:"number",class:"w-full px-2 py-1 border rounded text-right",step:"0.01"},null,8,te)),[[h,l.yearlyBudget,void 0,{number:!0}]])])]))),128))],64))),128)),a("tr",ae,[e[8]||(e[8]=a("td",{colspan:"2",class:"border border-gray-300 px-4 py-2 text-center"},"\u5408\u8BA1",-1)),a("td",re,[o.value==="main_business_contribution_rate_structure"?(y(),d("span",de,"21.98%")):o.value==="main_business_gross_profit_rate_structure"?(y(),d("span",ye,"24.00%")):(y(),d("span",oe,N(A.value.toFixed(2)),1))])])])])])):(y(),d("div",ie,e[9]||(e[9]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),a("p",{class:"text-lg"},"\u8BF7\u9009\u62E9\u8981\u7F16\u8F91\u7684\u8868\u683C",-1)]))),a("div",{class:"mt-6 flex justify-end space-x-4"},[a("button",{onClick:w,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58\u9884\u7B97\u8BA1\u5212 "),a("button",{onClick:S,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E "),a("button",{onClick:T,class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"}," \u5BFC\u51FAExcel ")])]))}});var ce=$(le,[["__scopeId","data-v-6e634b8a"]]);export{ce as default};
