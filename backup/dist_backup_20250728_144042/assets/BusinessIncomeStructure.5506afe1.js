import{_ as K,d as Q,r as m,h as U,B as V,o as W,c,a as e,y as g,A as b,F as x,l as v,t as s,b as X,m as Z,G as ee,f as d,k as T}from"./index.52709b64.js";import{_ as ue,r as q,M as D,l as re}from"./FormAttachmentAndRemarks.9def71bd.js";const oe={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},te={class:"flex justify-between items-center mb-6"},ae={class:"flex items-center space-x-4"},se={class:"overflow-x-auto my-6"},ne={class:"w-full border-collapse border border-gray-300"},le={class:"border border-gray-300 px-4 py-2 text-center"},ce={class:"border border-gray-300 px-4 py-2"},de={class:"border border-gray-300 px-4 py-2"},ye={class:"border border-gray-300 px-4 py-2"},ie={class:"border border-gray-300 px-4 py-2"},pe={class:"border border-gray-300 px-4 py-2"},me={class:"text-sm font-medium"},ge={class:"bg-gray-50 font-bold"},be={class:"border border-gray-300 px-4 py-2"},Ee={class:"border border-gray-300 px-4 py-2"},Fe={class:"border border-gray-300 px-4 py-2"},he={class:"border border-gray-300 px-4 py-2"},_e={class:"mt-8"},xe={class:"overflow-x-auto my-6"},ve={class:"w-full border-collapse border border-gray-300"},De=["rowspan"],Ae={class:"border border-gray-300 px-4 py-2"},Be={class:"border border-gray-300 px-4 py-2"},Ie={class:"border border-gray-300 px-4 py-2"},fe=["onUpdate:modelValue"],Pe={class:"border border-gray-300 px-4 py-2"},we={class:"font-medium"},Me={class:"border border-gray-300 px-4 py-2"},Ce=["rowspan"],Se={class:"border border-gray-300 px-4 py-2"},ke={class:"border border-gray-300 px-4 py-2"},Ne={class:"border border-gray-300 px-4 py-2"},Ue=["onUpdate:modelValue"],Te={class:"border border-gray-300 px-4 py-2"},qe={class:"font-medium"},$e={class:"border border-gray-300 px-4 py-2"},Ve=["rowspan"],Oe={class:"border border-gray-300 px-4 py-2"},Re={class:"border border-gray-300 px-4 py-2"},je={class:"border border-gray-300 px-4 py-2"},Je=["onUpdate:modelValue"],Le={class:"border border-gray-300 px-4 py-2"},Ye={class:"font-medium"},Ge={class:"border border-gray-300 px-4 py-2"},ze={class:"bg-gray-50 font-bold"},He={class:"border border-gray-300 px-4 py-2"},Ke={class:"border border-gray-300 px-4 py-2"},Qe={class:"border border-gray-300 px-4 py-2"},We={class:"border border-gray-300 px-4 py-2"},Xe={class:"mt-8"},Ze={class:"overflow-x-auto my-6"},eu={class:"w-full border-collapse border border-gray-300"},uu={class:"border border-gray-300 px-4 py-2 text-center"},ru={class:"border border-gray-300 px-4 py-2"},ou={class:"border border-gray-300 px-4 py-2"},tu=["onUpdate:modelValue"],au={class:"border border-gray-300 px-4 py-2"},su=["onUpdate:modelValue"],nu={class:"border border-gray-300 px-4 py-2"},lu={class:"font-medium"},cu={class:"border border-gray-300 px-4 py-2"},du={class:"bg-gray-50 font-bold"},yu={class:"border border-gray-300 px-4 py-2"},iu={class:"border border-gray-300 px-4 py-2"},pu={class:"border border-gray-300 px-4 py-2"},mu={class:"border border-gray-300 px-4 py-2"},gu=Q({__name:"BusinessIncomeStructure",setup(bu){var $;const A=ee(),l=m((($=A.query.period)==null?void 0:$.toString())||new Date().toISOString().slice(0,7)),E=()=>[{id:1,category:"\u4E3B\u8425\u4E1A\u52A1",yearlyPlan:59400,currentMonthIncome:0,accumulatedIncome:0},{id:2,category:"\u975E\u4E3B\u8425\u4E1A\u52A1",yearlyPlan:600,currentMonthIncome:0,accumulatedIncome:0}],B=()=>({equipment:[{customer:"\u4E0A\u6D77",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u56FD\u7F51",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u6C5F\u82CF",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u8F93\u914D\u7535\u5185\u914D",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u897F\u95E8\u5B50",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u540C\u4E1A",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u7528\u6237",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u5176\u5B83",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"}],components:[{customer:"\u7528\u6237",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"}],engineering:[{customer:"\u4E00\u5305",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u4E8C\u5305",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u57DF\u5185\u5408\u4F5C",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u57DF\u5916\u5408\u4F5C",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"},{customer:"\u5176\u5B83",yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:"0.00%"}]}),I=()=>[{id:1,category:"\u56FA\u5B9A\u6536\u5165",yearlyPlan:100,currentPeriod:0,cumulative:0},{id:2,category:"\u623F\u5C4B\u79DF\u91D1",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:3,category:"\u5229\u606F\u6536\u5165",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:4,category:"\u6295\u8D44\u6536\u76CA",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:5,category:"\u8865\u8D34\u6536\u5165",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:6,category:"\u5176\u4ED6",yearlyPlan:0,currentPeriod:0,cumulative:0}],y=m(E()),n=m(B()),i=m(I()),F=m(""),h=m(""),f=o=>isNaN(o)?"0.00":o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),O=(o,r)=>!o||o===0?"0.00":(r/o*100).toFixed(2),R=(o,r)=>!o||o===0?"0.00":(r/o*100).toFixed(2),P=U(()=>{let o=0,r=0,u=0;n.value.equipment.forEach(t=>{o+=typeof t.yearlyPlan=="number"?t.yearlyPlan:0,r+=t.currentMonthIncome||0,u+=t.accumulatedIncome||0}),n.value.components.forEach(t=>{o+=typeof t.yearlyPlan=="number"?t.yearlyPlan:0,r+=t.currentMonthIncome||0,u+=t.accumulatedIncome||0}),n.value.engineering.forEach(t=>{o+=typeof t.yearlyPlan=="number"?t.yearlyPlan:0,r+=t.currentMonthIncome||0,u+=t.accumulatedIncome||0});const a=o>0?(u/o*100).toFixed(2)+"%":"0.00%";return{yearlyPlan:o,currentMonthIncome:r,accumulatedIncome:u,progress:a}}),w=U(()=>{let o=0,r=0,u=0;i.value.forEach(t=>{o+=t.yearlyPlan||0,r+=t.currentPeriod||0,u+=t.cumulative||0});const a=o>0?(u/o*100).toFixed(2):"0.00";return{yearlyPlan:o,currentPeriod:r,cumulative:u,progress:a}}),M=U(()=>{const o={yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:0};return y.value.forEach(r=>{o.yearlyPlan+=r.yearlyPlan||0,o.currentMonthIncome+=r.currentMonthIncome||0,o.accumulatedIncome+=r.accumulatedIncome||0}),o.progress=o.yearlyPlan>0?o.accumulatedIncome/o.yearlyPlan*100:0,o.progress=parseFloat(o.progress.toFixed(2)),o}),C=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/business-income/${o}`);if(!r.ok){if(r.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),y.value=E();return}throw new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25")}const u=await r.json();console.log("API\u8FD4\u56DE\u6570\u636E:",u),u.success&&u.data&&Array.isArray(u.data)?(console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u76F4\u63A5\u4F7F\u7528\u540E\u7AEF\u8BA1\u7B97\u7684\u7ED3\u679C"),y.value=u.data.map(a=>({id:a.id,category:a.category,yearlyPlan:a.id===1?59400:600,currentMonthIncome:a.currentMonthIncome||0,accumulatedIncome:a.accumulatedIncome||0})),console.log("\u5904\u7406\u540E\u7684\u6570\u636E:",y.value)):(console.log("\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),y.value=E()),await j(o),await J(o)}catch(r){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",r),y.value=E()}},j=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/main-business-income/${o}`);if(!r.ok){if(r.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),n.value=B();return}throw new Error("\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25")}const u=await r.json();if(console.log("\u4E3B\u8425\u4E1A\u52A1\u6536\u5165API\u8FD4\u56DE\u6570\u636E:",u),u.success&&u.data){const a=u.data;console.log("API\u8FD4\u56DE\u7684\u6570\u636E\u7ED3\u6784:",a);const t=(p,N)=>p.map(S=>{const _=N.find(H=>H.customer===S.customer);return _?{...S,yearlyPlan:_.yearlyPlan||S.yearlyPlan,currentMonthIncome:_.currentMonthIncome||0,accumulatedIncome:_.accumulatedIncome||0,progress:_.progress||"0.00%"}:S});a.equipment&&Array.isArray(a.equipment)&&(n.value.equipment=t(n.value.equipment,a.equipment)),a.components&&Array.isArray(a.components)&&(n.value.components=t(n.value.components,a.components)),a.engineering&&Array.isArray(a.engineering)&&(n.value.engineering=t(n.value.engineering,a.engineering)),console.log("\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5408\u5E76\u5B8C\u6210:",n.value)}}catch(r){console.error("\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25:",r),n.value=B()}},J=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/non-main-business/${o}`);if(!r.ok){if(r.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),i.value=I();return}throw new Error("\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25")}const u=await r.json();if(console.log("\u975E\u4E3B\u8425\u4E1A\u52A1API\u8FD4\u56DE\u6570\u636E:",u),u.success&&u.data&&Array.isArray(u.data)){const a=u.data;i.value=i.value.map(t=>{const p=a.find(N=>N.id===t.id);return p?{...t,yearlyPlan:p.yearlyPlan||t.yearlyPlan,currentPeriod:p.currentPeriod||0,cumulative:p.cumulative||0}:t}),console.log("\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5408\u5E76\u5B8C\u6210:",i.value)}}catch(r){console.error("\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",r),i.value=I()}};V(()=>A.query.period,o=>{o&&(l.value=o.toString(),C(o.toString()),k())}),V(l,o=>{C(o),k()});const L=async()=>{try{console.log("\u4FDD\u5B58\u6570\u636E:",{period:l.value,data:y.value});const o=await fetch("http://47.111.95.19:3000/business-income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({period:l.value,data:y.value})});if(!o.ok){const r=await o.text();throw new Error(`\u4FDD\u5B58\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u6570\u636E\u5931\u8D25: ${o.status} - ${r}`)}await Y(),await G(),await q(D.BUSINESS_INCOME_STRUCTURE,l.value,y.value,F.value,h.value),alert("\u4FDD\u5B58\u6210\u529F")}catch(o){console.error("\u4FDD\u5B58\u5931\u8D25:",o),alert("\u4FDD\u5B58\u5931\u8D25: "+(o instanceof Error?o.message:"\u672A\u77E5\u9519\u8BEF"))}},Y=async()=>{try{const o=[...n.value.equipment.map(t=>({...t,segment:"\u8BBE\u5907"})),...n.value.components.map(t=>({...t,segment:"\u5143\u4EF6"})),...n.value.engineering.map(t=>({...t,segment:"\u5DE5\u7A0B"}))],r={period:l.value,data:o};console.log("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E:",r);const u=await fetch("http://47.111.95.19:3000/main-business-income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!u.ok){const t=await u.text();throw new Error(`\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25: ${u.status} - ${t}`)}const a={equipment:n.value.equipment,components:n.value.components,engineering:n.value.engineering};await q(D.MAIN_BUSINESS_INCOME,l.value,a,"","")}catch(o){throw console.error("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25:",o),o}},G=async()=>{try{const o={period:l.value,data:i.value};console.log("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",o);const r=await fetch("http://47.111.95.19:3000/non-main-business",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok){const u=await r.text();throw new Error(`\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25: ${r.status} - ${u}`)}await q(D.NON_MAIN_BUSINESS,l.value,i.value,"","")}catch(o){throw console.error("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",o),o}},z=()=>{y.value=E(),n.value=B(),i.value=I(),F.value="",h.value="",console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")},k=async()=>{const{remarks:o,suggestions:r}=await re(D.BUSINESS_INCOME_STRUCTURE,l.value);F.value=o,h.value=r};return W(()=>{console.log("\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",l.value),A.query.period?C(A.query.period.toString()):C(l.value),k()}),(o,r)=>(d(),c("div",oe,[e("div",te,[r[3]||(r[3]=e("h1",{class:"text-2xl font-bold"},"\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u4E0E\u8D28\u91CF\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),e("div",ae,[g(e("input",{"onUpdate:modelValue":r[0]||(r[0]=u=>l.value=u),type:"month",class:"px-3 py-2 border rounded"},null,512),[[b,l.value]])])]),e("div",se,[e("table",ne,[r[6]||(r[6]=e("thead",{class:"sticky top-0 bg-white"},[e("tr",{class:"bg-gray-50"},[e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u6708\u6536\u5165"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1\u6536\u5165"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),e("tbody",null,[(d(!0),c(x,null,v(y.value,(u,a)=>(d(),c("tr",{key:a},[e("td",le,s(u.id),1),e("td",ce,s(u.category),1),e("td",de,s(u.yearlyPlan.toFixed(2)),1),e("td",ye,s(u.currentMonthIncome.toFixed(2)),1),e("td",ie,s(u.accumulatedIncome.toFixed(2)),1),e("td",pe,[e("span",me,s(O(u.yearlyPlan,u.accumulatedIncome))+"%",1)])]))),128)),e("tr",ge,[r[4]||(r[4]=e("td",{class:"border border-gray-300 px-4 py-2 text-center"},"\u5408\u8BA1",-1)),r[5]||(r[5]=e("td",{class:"border border-gray-300 px-4 py-2"},null,-1)),e("td",be,s(M.value.yearlyPlan.toFixed(2)),1),e("td",Ee,s(M.value.currentMonthIncome.toFixed(2)),1),e("td",Fe,s(M.value.accumulatedIncome.toFixed(2)),1),e("td",he,s(M.value.progress.toFixed(2))+"% ",1)])])])]),e("div",_e,[r[9]||(r[9]=e("h2",{class:"text-xl font-bold mb-4"},"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u5206\u89E3\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),e("div",xe,[e("table",ve,[r[8]||(r[8]=e("thead",{class:"sticky top-0 bg-white"},[e("tr",{class:"bg-gray-50"},[e("th",{class:"border border-gray-300 px-4 py-2"},"\u677F\u5757"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5BA2\u6237\u5C5E\u6027"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u6708\u6536\u5165"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1\u6536\u5165"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),e("tbody",null,[(d(!0),c(x,null,v(n.value.equipment,(u,a)=>(d(),c("tr",{key:`equipment-${a}`},[a===0?(d(),c("td",{key:0,rowspan:n.value.equipment.length,class:"border border-gray-300 px-4 py-2 font-medium text-center"}," \u8BBE\u5907 ",8,De)):T("",!0),e("td",Ae,s(u.customer),1),e("td",Be,s(typeof u.yearlyPlan=="number"?f(u.yearlyPlan):u.yearlyPlan),1),e("td",Ie,[g(e("input",{"onUpdate:modelValue":t=>u.currentMonthIncome=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,fe),[[b,u.currentMonthIncome,void 0,{number:!0}]])]),e("td",Pe,[e("span",we,s(u.accumulatedIncome.toFixed(2)),1)]),e("td",Me,s(u.progress),1)]))),128)),(d(!0),c(x,null,v(n.value.components,(u,a)=>(d(),c("tr",{key:`components-${a}`},[a===0?(d(),c("td",{key:0,rowspan:n.value.components.length,class:"border border-gray-300 px-4 py-2 font-medium text-center"}," \u5143\u4EF6 ",8,Ce)):T("",!0),e("td",Se,s(u.customer),1),e("td",ke,s(typeof u.yearlyPlan=="number"?f(u.yearlyPlan):u.yearlyPlan),1),e("td",Ne,[g(e("input",{"onUpdate:modelValue":t=>u.currentMonthIncome=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Ue),[[b,u.currentMonthIncome,void 0,{number:!0}]])]),e("td",Te,[e("span",qe,s(u.accumulatedIncome.toFixed(2)),1)]),e("td",$e,s(u.progress),1)]))),128)),(d(!0),c(x,null,v(n.value.engineering,(u,a)=>(d(),c("tr",{key:`engineering-${a}`},[a===0?(d(),c("td",{key:0,rowspan:n.value.engineering.length,class:"border border-gray-300 px-4 py-2 font-medium text-center"}," \u5DE5\u7A0B ",8,Ve)):T("",!0),e("td",Oe,s(u.customer),1),e("td",Re,s(typeof u.yearlyPlan=="number"?f(u.yearlyPlan):u.yearlyPlan),1),e("td",je,[g(e("input",{"onUpdate:modelValue":t=>u.currentMonthIncome=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Je),[[b,u.currentMonthIncome,void 0,{number:!0}]])]),e("td",Le,[e("span",Ye,s(u.accumulatedIncome.toFixed(2)),1)]),e("td",Ge,s(u.progress),1)]))),128)),e("tr",ze,[r[7]||(r[7]=e("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),e("td",He,s(P.value.yearlyPlan.toFixed(2)),1),e("td",Ke,s(P.value.currentMonthIncome.toFixed(2)),1),e("td",Qe,s(P.value.accumulatedIncome.toFixed(2)),1),e("td",We,s(P.value.progress),1)])])])])]),e("div",Xe,[r[13]||(r[13]=e("h2",{class:"text-xl font-bold mb-4"},"\u975E\u4E3B\u8425\u4E1A\u52A1\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),e("div",Ze,[e("table",eu,[r[12]||(r[12]=e("thead",{class:"sticky top-0 bg-white"},[e("tr",{class:"bg-gray-50"},[e("th",{class:"border border-gray-300 px-4 py-2 w-24"},"\u5E8F\u53F7"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),e("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),e("tbody",null,[(d(!0),c(x,null,v(i.value,(u,a)=>(d(),c("tr",{key:a},[e("td",uu,s(u.id),1),e("td",ru,s(u.category),1),e("td",ou,[g(e("input",{"onUpdate:modelValue":t=>u.yearlyPlan=t,type:"number",class:"w-full px-2 py-1 border rounded bg-gray-100",step:"0.01",readonly:""},null,8,tu),[[b,u.yearlyPlan,void 0,{number:!0}]])]),e("td",au,[g(e("input",{"onUpdate:modelValue":t=>u.currentPeriod=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,su),[[b,u.currentPeriod,void 0,{number:!0}]])]),e("td",nu,[e("span",lu,s(f(u.cumulative)),1)]),e("td",cu,s(R(u.yearlyPlan,u.cumulative))+"% ",1)]))),128)),e("tr",du,[r[10]||(r[10]=e("td",{class:"border border-gray-300 px-4 py-2 text-center"},"\u5408\u8BA1",-1)),r[11]||(r[11]=e("td",{class:"border border-gray-300 px-4 py-2"},null,-1)),e("td",yu,s(w.value.yearlyPlan.toFixed(2)),1),e("td",iu,s(w.value.currentPeriod.toFixed(2)),1),e("td",pu,s(w.value.cumulative.toFixed(2)),1),e("td",mu,s(w.value.progress)+"% ",1)])])])])]),X(ue,{"module-id":Z(D).BUSINESS_INCOME_STRUCTURE,period:l.value,remarks:F.value,"onUpdate:remarks":r[1]||(r[1]=u=>F.value=u),suggestions:h.value,"onUpdate:suggestions":r[2]||(r[2]=u=>h.value=u)},null,8,["module-id","period","remarks","suggestions"]),e("div",{class:"mt-4 flex justify-end space-x-4"},[e("button",{onClick:L,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),e("button",{onClick:z,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")])]))}});var hu=K(gu,[["__scopeId","data-v-b0278806"]]);export{hu as default};
