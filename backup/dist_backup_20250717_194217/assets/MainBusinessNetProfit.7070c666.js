import{_ as tu,d as ou,r as w,c as ru,B as Q,o as au,b as C,e as t,y as U,A as R,F as G,g as J,t as g,k as nu,h as su,G as lu,v as A,f as z}from"./index.62a10462.js";import{_ as cu,r as pu,M as H,l as iu}from"./FormAttachmentAndRemarks.84ddfd3d.js";const du={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},yu={class:"flex justify-between items-center mb-6"},gu={class:"flex items-center space-x-4"},Fu={class:"overflow-x-auto my-6"},Eu={class:"w-full border-collapse border border-gray-300"},Du=["rowspan"],bu={class:"border border-gray-300 px-4 py-2"},hu={class:"border border-gray-300 px-4 py-2"},mu=["onUpdate:modelValue"],Bu={class:"border border-gray-300 px-4 py-2"},Cu={class:"font-medium"},Au={class:"border border-gray-300 px-4 py-2"},_u={class:"font-medium"},fu={class:"border border-gray-300 px-4 py-2"},vu={class:"border border-gray-300 px-4 py-2"},xu={class:"text-blue-600"},Mu=["rowspan"],Tu={class:"border border-gray-300 px-4 py-2"},Vu={class:"border border-gray-300 px-4 py-2"},wu=["onUpdate:modelValue"],$u={class:"border border-gray-300 px-4 py-2"},Iu={class:"font-medium"},ku={class:"border border-gray-300 px-4 py-2"},Nu={class:"font-medium"},Su={class:"border border-gray-300 px-4 py-2"},Lu={class:"border border-gray-300 px-4 py-2"},Pu={class:"text-blue-600"},ju=["rowspan"],qu={class:"border border-gray-300 px-4 py-2"},Uu={class:"border border-gray-300 px-4 py-2"},Ru=["onUpdate:modelValue"],Ou={class:"border border-gray-300 px-4 py-2"},Yu={class:"font-medium"},Gu={class:"border border-gray-300 px-4 py-2"},Ju={class:"font-medium"},zu={class:"border border-gray-300 px-4 py-2"},Hu={class:"border border-gray-300 px-4 py-2"},Ku={class:"text-blue-600"},Qu={class:"bg-gray-50 font-bold"},Wu={class:"border border-gray-300 px-4 py-2"},Xu={class:"border border-gray-300 px-4 py-2"},Zu={class:"border border-gray-300 px-4 py-2"},ue={class:"border border-gray-300 px-4 py-2"},ee=ou({__name:"MainBusinessNetProfit",setup(te){var K;const P=lu(),F=w(((K=P.query.period)==null?void 0:K.toString())||new Date().toISOString().slice(0,7)),$=w(""),I=w(""),k=()=>[{customerType:"\u4E0A\u6D77",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u56FD\u7F51",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u6C5F\u82CF",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u8F93\u914D\u7535\u5185\u914D",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u897F\u95E8\u5B50",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u540C\u4E1A",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u7528\u6237",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],N=()=>[{customerType:"\u7528\u6237",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],S=()=>[{customerType:"\u4E00\u5305",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u4E8C\u5305",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5185\u5408\u4F5C",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5916\u5408\u4F5C",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],E=w(k()),D=w(N()),b=w(S()),_=o=>o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),W=async o=>{var r,u,s;try{const a=`${o}-01`,[l,i,d]=await Promise.all([fetch(`http://47.111.95.19:3000/main-business-income/${a}`),fetch(`http://47.111.95.19:3000/main-business-cost/${o}`),fetch(`http://47.111.95.19:3000/cost-center-structure/${o}`)]),c=await Promise.all([l.ok?l.json():null,i.ok?i.json():null,d.ok?d.json():null]),n={income:(r=c[0])!=null&&r.success?c[0].data:null,cost:(u=c[1])!=null&&u.success?c[1].data:null,center:(s=c[2])!=null&&s.success?c[2].data:null};return console.log(`${o} API\u54CD\u5E94\u72B6\u6001:`,{\u6536\u5165API:l.ok?"\u6210\u529F":`\u5931\u8D25(${l.status})`,\u6210\u672CAPI:i.ok?"\u6210\u529F":`\u5931\u8D25(${i.status})`,\u6210\u672C\u4E2D\u5FC3API:d.ok?"\u6210\u529F":`\u5931\u8D25(${d.status})`}),console.log(`${o} API\u6570\u636E\u7ED3\u6784:`,{income:n.income?Object.keys(n.income):"null",cost:n.cost?Object.keys(n.cost):"null",center:n.center?Object.keys(n.center):"null"}),n.center&&console.log(`${o} \u6210\u672C\u4E2D\u5FC3\u8BE6\u7EC6\u6570\u636E:`,{equipmentData:n.center.equipmentData?n.center.equipmentData.length:"null",componentData:n.center.componentData?n.center.componentData.length:"null",engineeringData:n.center.engineeringData?n.center.engineeringData.length:"null"}),n}catch(a){return console.error(`\u83B7\u53D6${o}\u6570\u636E\u5931\u8D25:`,a),{income:null,cost:null,center:null}}},O=(o,r,u)=>{try{let s=0,a=0,l=0;if(u.income){const d={\u8BBE\u5907:"equipment",\u5143\u4EF6:"components",\u5DE5\u7A0B:"engineering"},c=u.income[d[r]];if(console.log(`\u6536\u5165\u6570\u636E\u67E5\u627E: ${r} -> ${d[r]}`,{categoryData:c?c.length:"null",lookingFor:o.customerType}),c&&Array.isArray(c)){console.log("\u6536\u5165\u7C7B\u522B\u6570\u636E:",c.map(p=>({customer:p.customer,currentMonthIncome:p.currentMonthIncome})));const n=c.find(p=>p.customer===o.customerType);n&&(s=parseFloat(n.currentMonthIncome)||0,console.log("\u627E\u5230\u6536\u5165\u9879:",n))}}if(u.cost){const d={\u8BBE\u5907:"equipment",\u5143\u4EF6:"component",\u5DE5\u7A0B:"project"},c=u.cost[d[r]];if(console.log(`\u6210\u672C\u6570\u636E\u67E5\u627E: ${r} -> ${d[r]}`,{categoryData:c?c.length:"null",lookingFor:o.customerType}),c&&Array.isArray(c)){console.log("\u6210\u672C\u7C7B\u522B\u6570\u636E:",c.map(p=>({customerType:p.customerType,currentMaterialCost:p.currentMaterialCost,currentLaborCost:p.currentLaborCost})));const n=c.find(p=>p.customerType===o.customerType);if(n){const p=parseFloat(n.currentMaterialCost)||0,e=parseFloat(n.currentLaborCost)||0;a=p,o.currentLaborCost=e,console.log("\u627E\u5230\u6210\u672C\u9879:",{costItem:n,currentMaterialCost:p,currentLaborCost:e,\u76F4\u63A5\u8D39\u7528:a})}}}if(u.center){const d={\u8BBE\u5907:"equipmentData",\u5143\u4EF6:"componentData",\u5DE5\u7A0B:"engineeringData"},c=u.center[d[r]];if(console.log(`\u6210\u672C\u4E2D\u5FC3\u6570\u636E\u67E5\u627E: ${r} -> ${d[r]}`,{categoryData:c?c.length:"null",lookingFor:o.customerType}),c&&Array.isArray(c)){console.log("\u6210\u672C\u4E2D\u5FC3\u7C7B\u522B\u6570\u636E:",c.map(p=>({customerType:p.customerType,currentMonthIncome:p.currentMonthIncome})));let n=c.find(p=>p.customerType===o.customerType);!n&&o.customerType==="\u5176\u5B83"?n=c.find(p=>p.customerType==="\u5176\u4ED6"):!n&&o.customerType==="\u5176\u4ED6"&&(n=c.find(p=>p.customerType==="\u5176\u5B83")),n&&(l=parseFloat(n.currentMonthIncome)||0,console.log("\u627E\u5230\u6210\u672C\u4E2D\u5FC3\u9879:",{centerItem:n,costCenterActual:l}))}}const i=s-a-l;return(s>0||a>0||l>0)&&console.log(`${r} - ${o.customerType} \u51C0\u5229\u6DA6\u8BA1\u7B97:`,{\u516C\u5F0F:"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165 - \u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u76F4\u63A5\u8D39\u7528 - \u6210\u672C\u4E2D\u5FC3\u5F53\u6708\u5B9E\u9645",\u4E3B\u8425\u4E1A\u52A1\u6536\u5165:s,\u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u76F4\u63A5\u8D39\u7528:a,\u6210\u672C\u4E2D\u5FC3\u5F53\u6708\u5B9E\u9645:l,\u51C0\u5229\u6DA6:i,\u8BA1\u7B97\u8FC7\u7A0B:`${s} - ${a} - ${l} = ${i}`}),i}catch(s){return console.error("\u8BA1\u7B97\u5F53\u6708\u51C0\u5229\u6DA6\u5931\u8D25:",s),0}},j=ru(()=>{let o=0,r=0,u=0;E.value.forEach(a=>{var l,i,d;o+=parseFloat((l=a.plan)==null?void 0:l.replace(/,/g,""))||0,r+=parseFloat((i=a.currentMonthValue)==null?void 0:i.replace(/,/g,""))||0,u+=parseFloat((d=a.actual)==null?void 0:d.replace(/,/g,""))||0}),D.value.forEach(a=>{var l,i,d;o+=parseFloat((l=a.plan)==null?void 0:l.replace(/,/g,""))||0,r+=parseFloat((i=a.currentMonthValue)==null?void 0:i.replace(/,/g,""))||0,u+=parseFloat((d=a.actual)==null?void 0:d.replace(/,/g,""))||0}),b.value.forEach(a=>{var l,i,d;o+=parseFloat((l=a.plan)==null?void 0:l.replace(/,/g,""))||0,r+=parseFloat((i=a.currentMonthValue)==null?void 0:i.replace(/,/g,""))||0,u+=parseFloat((d=a.actual)==null?void 0:d.replace(/,/g,""))||0});let s="0.00%";return o!==0&&(s=`${(u/o*100).toFixed(2)}%`),{plan:o,currentMonthValue:r,actual:u,contribution:s}}),V=(o,r,u)=>o.map(s=>{var l;const a=r==null?void 0:r.find(i=>i.segment===u&&i.customerType===s.customerType);return a?{customerType:s.customerType,plan:((l=a.yearlyPlan)==null?void 0:l.toString())||"0",currentMonthValue:"0",actual:"0",contribution:"0.00%",yearlyPlan:a.yearlyPlan||0}:s}),q=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u51C0\u5229\u6DA6\u8D21\u732E\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/main-business-net-profit/${o}`);let u=[];if(r.ok){const s=await r.json();console.log("API\u8FD4\u56DE\u6570\u636E:",s),s.success&&s.data&&Array.isArray(s.data)&&(u=s.data,console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76..."))}else r.status===404?(console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),E.value=k(),D.value=N(),b.value=S()):console.log("\u52A0\u8F7D\u6570\u636E\u5931\u8D25\uFF0C\u4F7F\u7528\u9884\u7B97\u6570\u636E\u586B\u5145");E.value=V(k(),u,"\u8BBE\u5907"),D.value=V(N(),u,"\u5143\u4EF6"),b.value=V(S(),u,"\u5DE5\u7A0B"),console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",{equipmentData:E.value,componentData:D.value,projectData:b.value}),await X()}catch(r){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",r),E.value=V(k(),[],"\u8BBE\u5907"),D.value=V(N(),[],"\u5143\u4EF6"),b.value=V(S(),[],"\u5DE5\u7A0B")}},X=async()=>{var o,r,u,s,a,l;try{const[i]=F.value.split("-"),d=parseInt(F.value.split("-")[1]),c=[];for(let e=1;e<=d;e++){const B=`${i}-${e.toString().padStart(2,"0")}`;c.push(W(B))}const n=await Promise.all(c);for(const e of E.value){let B=0,f=0;for(let y=0;y<n.length;y++){const x=O(e,"\u8BBE\u5907",n[y]);if(B+=x,y===n.length-1){f=x;const M=n[y];if(M.cost){const m=M.cost.equipment;if(m&&Array.isArray(m)){const T=m.find(L=>L.customerType===e.customerType);T&&(e.currentLaborCost=parseFloat(T.currentLaborCost)||0)}}}}e.currentMonthValue=f.toFixed(2),e.actual=B.toFixed(2);const h=parseFloat(((o=e.plan)==null?void 0:o.replace(/,/g,""))||"0"),v=parseFloat(((r=e.actual)==null?void 0:r.replace(/,/g,""))||"0");if(!isNaN(h)&&!isNaN(v)&&h!==0){const y=(v/h*100).toFixed(2);e.contribution=`${y}%`}else e.contribution="0.00%"}for(const e of D.value){let B=0,f=0;for(let y=0;y<n.length;y++){const x=O(e,"\u5143\u4EF6",n[y]);if(B+=x,y===n.length-1){f=x;const M=n[y];if(M.cost){const m=M.cost.component;if(m&&Array.isArray(m)){const T=m.find(L=>L.customerType===e.customerType);T&&(e.currentLaborCost=parseFloat(T.currentLaborCost)||0)}}}}e.currentMonthValue=f.toFixed(2),e.actual=B.toFixed(2);const h=parseFloat(((u=e.plan)==null?void 0:u.replace(/,/g,""))||"0"),v=parseFloat(((s=e.actual)==null?void 0:s.replace(/,/g,""))||"0");if(!isNaN(h)&&!isNaN(v)&&h!==0){const y=(v/h*100).toFixed(2);e.contribution=`${y}%`}else e.contribution="0.00%"}for(const e of b.value){let B=0,f=0;for(let y=0;y<n.length;y++){const x=O(e,"\u5DE5\u7A0B",n[y]);if(B+=x,y===n.length-1){f=x;const M=n[y];if(M.cost){const m=M.cost.project;if(m&&Array.isArray(m)){const T=m.find(L=>L.customerType===e.customerType);T&&(e.currentLaborCost=parseFloat(T.currentLaborCost)||0)}}}}e.currentMonthValue=f.toFixed(2),e.actual=B.toFixed(2);const h=parseFloat(((a=e.plan)==null?void 0:a.replace(/,/g,""))||"0"),v=parseFloat(((l=e.actual)==null?void 0:l.replace(/,/g,""))||"0");if(!isNaN(h)&&!isNaN(v)&&h!==0){const y=(v/h*100).toFixed(2);e.contribution=`${y}%`}else e.contribution="0.00%"}console.log("=== \u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8BA1\u7B97\u5B8C\u6210 ==="),console.log("\u5F53\u524D\u671F\u95F4:",F.value),console.log("\u8BBE\u5907\u677F\u5757:",E.value.map(e=>({\u5BA2\u6237:e.customerType,\u5F53\u6708\u503C:e.currentMonthValue,\u7D2F\u8BA1\u503C:e.actual,\u8D21\u732E\u5360\u6BD4:e.contribution,\u4EBA\u5DE5\u8D39:e.currentLaborCost}))),console.log("\u5143\u4EF6\u677F\u5757:",D.value.map(e=>({\u5BA2\u6237:e.customerType,\u5F53\u6708\u503C:e.currentMonthValue,\u7D2F\u8BA1\u503C:e.actual,\u8D21\u732E\u5360\u6BD4:e.contribution,\u4EBA\u5DE5\u8D39:e.currentLaborCost}))),console.log("\u5DE5\u7A0B\u677F\u5757:",b.value.map(e=>({\u5BA2\u6237:e.customerType,\u5F53\u6708\u503C:e.currentMonthValue,\u7D2F\u8BA1\u503C:e.actual,\u8D21\u732E\u5360\u6BD4:e.contribution,\u4EBA\u5DE5\u8D39:e.currentLaborCost})));const p=E.value.find(e=>e.customerType==="\u4E0A\u6D77");p&&(console.log("=== \u4E0A\u6D77\u5BA2\u6237\u9A8C\u8BC1 ==="),console.log("\u671F\u671B\u7ED3\u679C: 430.57 - 233.86 - 0 = 196.71"),console.log("\u5B9E\u9645\u5F53\u6708\u503C:",p.currentMonthValue),console.log("\u5B9E\u9645\u4EBA\u5DE5\u8D39:",p.currentLaborCost)),console.log("=== \u8BA1\u7B97\u5B8C\u6210 ===")}catch(i){console.error("\u6279\u91CF\u8BA1\u7B97\u7D2F\u8BA1\u503C\u5931\u8D25:",i)}};Q(()=>P.query.period,o=>{o&&(F.value=o.toString(),q(o.toString()),Y())}),Q(F,o=>{q(o),Y()});const Z=async()=>{try{const o=[...E.value.map(a=>({...a,segment:"\u8BBE\u5907"})),...D.value.map(a=>({...a,segment:"\u5143\u4EF6"})),...b.value.map(a=>({...a,segment:"\u5DE5\u7A0B"}))],r={period:F.value,data:o};console.log("\u4FDD\u5B58\u6570\u636E:",r);const u=await fetch("http://47.111.95.19:3000/main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!u.ok){const a=await u.text();throw new Error(`\u4FDD\u5B58\u5931\u8D25: ${u.status} - ${a}`)}const s={equipment:E.value,component:D.value,project:b.value};await pu(H.MAIN_BUSINESS_NET_PROFIT,F.value,s,$.value,I.value),alert("\u4FDD\u5B58\u6210\u529F")}catch(o){console.error("\u4FDD\u5B58\u5931\u8D25:",o),alert("\u4FDD\u5B58\u5931\u8D25: "+(o instanceof Error?o.message:"\u672A\u77E5\u9519\u8BEF"))}},uu=()=>{E.value=k(),D.value=N(),b.value=S(),$.value="",I.value="",console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")},Y=async()=>{const{remarks:o,suggestions:r}=await iu(H.MAIN_BUSINESS_NET_PROFIT,F.value);$.value=o,I.value=r},eu=()=>{console.log("=== \u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8BA1\u7B97\u516C\u5F0F\u6D4B\u8BD5 ==="),console.log("\u8BA1\u7B97\u516C\u5F0F\uFF1A\u5F53\u6708\u503C = \u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u5206\u89E3\u4E2D\u7684\u5F53\u6708\u6536\u5165 - \u4E3B\u8425\u4E1A\u52A1\u6210\u672C\u7ED3\u6784\u4E0E\u8D28\u91CF\u4E2D\u7684\u5F53\u671F\u76F4\u63A5\u8D39\u7528 - \u6210\u672C\u4E2D\u5FC3\u7ED3\u6784\u4E2D\u7684\u5F53\u6708\u5B9E\u9645"),console.log("\u7D2F\u8BA1\u503C = \u5404\u4E2A\u5F53\u6708\u503C\u76F8\u52A0\uFF08\u4ECE1\u6708\u5230\u5F53\u524D\u6708\uFF09"),console.log("\u5F53\u524D\u671F\u95F4:",F.value),console.log("\u8BBE\u5907\u677F\u5757\u6570\u636E:",E.value.length,"\u9879"),console.log("\u5143\u4EF6\u677F\u5757\u6570\u636E:",D.value.length,"\u9879"),console.log("\u5DE5\u7A0B\u677F\u5757\u6570\u636E:",b.value.length,"\u9879"),console.log("API\u8C03\u7528\u8BF4\u660E:"),console.log("- \u4E3B\u8425\u4E1A\u52A1\u6536\u5165: /main-business-income/{period}-01 (\u9700\u8981\u65E5\u671F\u683C\u5F0F)"),console.log("- \u4E3B\u8425\u4E1A\u52A1\u6210\u672C: /main-business-cost/{period} (YYYY-MM\u683C\u5F0F)"),console.log("- \u6210\u672C\u4E2D\u5FC3\u7ED3\u6784: /cost-center-structure/{period} (YYYY-MM\u683C\u5F0F)"),console.log("=== \u6D4B\u8BD5\u5B8C\u6210 ===")};return au(()=>{console.log("\u4E3B\u8425\u51C0\u5229\u6DA6\u8D21\u732E\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",F.value),eu(),P.query.period?q(P.query.period.toString()):q(F.value),Y()}),(o,r)=>(A(),C("div",du,[t("div",yu,[r[3]||(r[3]=t("h1",{class:"text-2xl font-bold"},"\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5",-1)),t("div",gu,[U(t("input",{"onUpdate:modelValue":r[0]||(r[0]=u=>F.value=u),type:"month",class:"px-3 py-2 border rounded"},null,512),[[R,F.value]])])]),t("div",Fu,[t("table",Eu,[r[5]||(r[5]=t("thead",{class:"sticky top-0 bg-white"},[t("tr",{class:"bg-gray-50"},[t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u677F\u5757"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5BA2\u6237\u5C5E\u6027"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5E74\u5EA6\u8BA1\u5212"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5F53\u6708\u503C"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u7D2F\u8BA1\u503C"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5206\u7C7B\u8D21\u732E\u5360\u6BD4"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5F53\u671F\u4EBA\u5DE5\u8D39")])],-1)),t("tbody",null,[(A(!0),C(G,null,J(E.value,(u,s)=>{var a;return A(),C("tr",{key:`equipment-${s}`},[s===0?(A(),C("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:E.value.length}," \u8BBE\u5907 ",8,Du)):z("",!0),t("td",bu,g(u.customerType),1),t("td",hu,[U(t("input",{"onUpdate:modelValue":l=>u.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,mu),[[R,u.plan]])]),t("td",Bu,[t("span",Cu,g(_(parseFloat((a=u.currentMonthValue)==null?void 0:a.replace(/,/g,""))||0)),1)]),t("td",Au,[t("span",_u,g(u.actual),1)]),t("td",fu,g(u.contribution),1),t("td",vu,[t("span",xu,g(_(u.currentLaborCost||0)),1)])])}),128)),(A(!0),C(G,null,J(D.value,(u,s)=>{var a;return A(),C("tr",{key:`component-${s}`},[s===0?(A(),C("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:D.value.length}," \u5143\u4EF6 ",8,Mu)):z("",!0),t("td",Tu,g(u.customerType),1),t("td",Vu,[U(t("input",{"onUpdate:modelValue":l=>u.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,wu),[[R,u.plan]])]),t("td",$u,[t("span",Iu,g(_(parseFloat((a=u.currentMonthValue)==null?void 0:a.replace(/,/g,""))||0)),1)]),t("td",ku,[t("span",Nu,g(u.actual),1)]),t("td",Su,g(u.contribution),1),t("td",Lu,[t("span",Pu,g(_(u.currentLaborCost||0)),1)])])}),128)),(A(!0),C(G,null,J(b.value,(u,s)=>{var a;return A(),C("tr",{key:`project-${s}`},[s===0?(A(),C("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:b.value.length}," \u5DE5\u7A0B ",8,ju)):z("",!0),t("td",qu,g(u.customerType),1),t("td",Uu,[U(t("input",{"onUpdate:modelValue":l=>u.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,Ru),[[R,u.plan]])]),t("td",Ou,[t("span",Yu,g(_(parseFloat((a=u.currentMonthValue)==null?void 0:a.replace(/,/g,""))||0)),1)]),t("td",Gu,[t("span",Ju,g(u.actual),1)]),t("td",zu,g(u.contribution),1),t("td",Hu,[t("span",Ku,g(_(u.currentLaborCost||0)),1)])])}),128)),t("tr",Qu,[r[4]||(r[4]=t("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),t("td",Wu,g(_(j.value.plan)),1),t("td",Xu,g(_(j.value.currentMonthValue)),1),t("td",Zu,g(_(j.value.actual)),1),t("td",ue,g(j.value.contribution),1)])])])]),t("div",{class:"mt-4 flex justify-end space-x-4"},[t("button",{onClick:Z,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),t("button",{onClick:uu,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")]),nu(cu,{"module-id":su(H).MAIN_BUSINESS_NET_PROFIT,period:F.value,remarks:$.value,"onUpdate:remarks":r[1]||(r[1]=u=>$.value=u),suggestions:I.value,"onUpdate:suggestions":r[2]||(r[2]=u=>I.value=u)},null,8,["module-id","period","remarks","suggestions"])]))}});var ae=tu(ee,[["__scopeId","data-v-7193e88c"]]);export{ae as default};
