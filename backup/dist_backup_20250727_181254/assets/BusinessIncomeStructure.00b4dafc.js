import{_ as Q,d as W,r as g,h as U,B as O,o as X,c,a as u,y as b,A as E,F as v,l as D,t as a,b as Z,m as uu,G as eu,f as d,k as T}from"./index.3bd45b70.js";import{_ as ru,r as $,M as A,l as ou}from"./FormAttachmentAndRemarks.59ca49fe.js";const tu={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},au={class:"flex justify-between items-center mb-6"},su={class:"flex items-center space-x-4"},nu={class:"overflow-x-auto my-6"},lu={class:"w-full border-collapse border border-gray-300"},cu={class:"border border-gray-300 px-4 py-2 text-center"},du={class:"border border-gray-300 px-4 py-2"},yu={class:"border border-gray-300 px-4 py-2"},iu={class:"border border-gray-300 px-4 py-2"},pu={class:"border border-gray-300 px-4 py-2"},mu={class:"border border-gray-300 px-4 py-2"},gu={class:"text-sm font-medium"},bu={class:"bg-gray-50 font-bold"},Eu={class:"border border-gray-300 px-4 py-2"},Fu={class:"border border-gray-300 px-4 py-2"},hu={class:"border border-gray-300 px-4 py-2"},_u={class:"border border-gray-300 px-4 py-2"},xu={class:"mt-8"},vu={class:"overflow-x-auto my-6"},Du={class:"w-full border-collapse border border-gray-300"},Au=["rowspan"],Bu={class:"border border-gray-300 px-4 py-2"},Iu={class:"border border-gray-300 px-4 py-2"},fu={class:"border border-gray-300 px-4 py-2"},Pu=["onUpdate:modelValue"],Cu={class:"border border-gray-300 px-4 py-2"},wu={class:"font-medium"},Mu={class:"border border-gray-300 px-4 py-2"},Su=["rowspan"],ku={class:"border border-gray-300 px-4 py-2"},Nu={class:"border border-gray-300 px-4 py-2"},Uu={class:"border border-gray-300 px-4 py-2"},Tu=["onUpdate:modelValue"],$u={class:"border border-gray-300 px-4 py-2"},qu={class:"font-medium"},Vu={class:"border border-gray-300 px-4 py-2"},Ou=["rowspan"],Ru={class:"border border-gray-300 px-4 py-2"},ju={class:"border border-gray-300 px-4 py-2"},Ju={class:"border border-gray-300 px-4 py-2"},Lu=["onUpdate:modelValue"],Yu={class:"border border-gray-300 px-4 py-2"},Gu={class:"font-medium"},zu={class:"border border-gray-300 px-4 py-2"},Hu={class:"bg-gray-50 font-bold"},Ku={class:"border border-gray-300 px-4 py-2"},Qu={class:"border border-gray-300 px-4 py-2"},Wu={class:"border border-gray-300 px-4 py-2"},Xu={class:"border border-gray-300 px-4 py-2"},Zu={class:"mt-8"},ue={class:"overflow-x-auto my-6"},ee={class:"w-full border-collapse border border-gray-300"},re={class:"border border-gray-300 px-4 py-2 text-center"},oe={class:"border border-gray-300 px-4 py-2"},te={class:"border border-gray-300 px-4 py-2"},ae=["onUpdate:modelValue"],se={class:"border border-gray-300 px-4 py-2"},ne=["onUpdate:modelValue"],le={class:"border border-gray-300 px-4 py-2"},ce={class:"font-medium"},de={class:"border border-gray-300 px-4 py-2"},ye={class:"bg-gray-50 font-bold"},ie={class:"border border-gray-300 px-4 py-2"},pe={class:"border border-gray-300 px-4 py-2"},me={class:"border border-gray-300 px-4 py-2"},ge={class:"border border-gray-300 px-4 py-2"},be=W({__name:"BusinessIncomeStructure",setup(Ee){var q;const B=eu(),l=g(((q=B.query.period)==null?void 0:q.toString())||new Date().toISOString().slice(0,7)),F=()=>[{id:1,category:"\u4E3B\u8425\u4E1A\u52A1",yearlyPlan:59400,currentMonthIncome:0,accumulatedIncome:0},{id:2,category:"\u975E\u4E3B\u8425\u4E1A\u52A1",yearlyPlan:600,currentMonthIncome:0,accumulatedIncome:0}],I=()=>({equipment:[{customer:"\u4E0A\u6D77",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u56FD\u7F51",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u6C5F\u82CF",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u8F93\u914D\u7535\u5185\u914D",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u897F\u95E8\u5B50",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u540C\u4E1A",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u7528\u6237",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u5176\u5B83",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"}],components:[{customer:"\u7528\u6237",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"}],engineering:[{customer:"\u4E00\u5305",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u4E8C\u5305",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u57DF\u5185\u5408\u4F5C",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u57DF\u5916\u5408\u4F5C",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"},{customer:"\u5176\u5B83",yearlyPlan:"\u7F3A\u5C11\u6570\u636E",currentMonthIncome:0,accumulatedIncome:0,progress:"/"}]}),f=()=>[{id:1,category:"\u56FA\u5B9A\u6536\u5165",yearlyPlan:100,currentPeriod:0,cumulative:0},{id:2,category:"\u623F\u5C4B\u79DF\u91D1",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:3,category:"\u5229\u606F\u6536\u5165",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:4,category:"\u6295\u8D44\u6536\u76CA",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:5,category:"\u8865\u8D34\u6536\u5165",yearlyPlan:0,currentPeriod:0,cumulative:0},{id:6,category:"\u5176\u4ED6",yearlyPlan:0,currentPeriod:0,cumulative:0}],y=g(F()),n=g(I()),p=g(f()),h=g(""),_=g(""),R=o=>isNaN(o)?"0.00":o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),j=(o,r)=>!o||o===0?"0.00":(r/o*100).toFixed(2),J=(o,r)=>!o||o===0?"0.00":(r/o*100).toFixed(2),P=U(()=>{let o=0,r=0,e=0;n.value.equipment.forEach(t=>{o+=typeof t.yearlyPlan=="number"?t.yearlyPlan:0,r+=t.currentMonthIncome||0,e+=t.accumulatedIncome||0}),n.value.components.forEach(t=>{o+=typeof t.yearlyPlan=="number"?t.yearlyPlan:0,r+=t.currentMonthIncome||0,e+=t.accumulatedIncome||0}),n.value.engineering.forEach(t=>{o+=typeof t.yearlyPlan=="number"?t.yearlyPlan:0,r+=t.currentMonthIncome||0,e+=t.accumulatedIncome||0});const s=o>0?(e/o*100).toFixed(2)+"%":"0.00%";return{yearlyPlan:o,currentMonthIncome:r,accumulatedIncome:e,progress:s}}),C=U(()=>{let o=0,r=0,e=0;p.value.forEach(t=>{o+=t.yearlyPlan||0,r+=t.currentPeriod||0,e+=t.cumulative||0});const s=o>0?(e/o*100).toFixed(2):"0.00";return{yearlyPlan:o,currentPeriod:r,cumulative:e,progress:s}}),w=U(()=>{const o={yearlyPlan:0,currentMonthIncome:0,accumulatedIncome:0,progress:0};return y.value.forEach(r=>{o.yearlyPlan+=r.yearlyPlan||0,o.currentMonthIncome+=r.currentMonthIncome||0,o.accumulatedIncome+=r.accumulatedIncome||0}),o.progress=o.yearlyPlan>0?o.accumulatedIncome/o.yearlyPlan*100:0,o.progress=parseFloat(o.progress.toFixed(2)),o}),M=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/business-income/${o}`);if(!r.ok){if(r.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),y.value=F();return}throw new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25")}const e=await r.json();console.log("API\u8FD4\u56DE\u6570\u636E:",e),e.success&&e.data&&Array.isArray(e.data)?(console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u76F4\u63A5\u4F7F\u7528\u540E\u7AEF\u8BA1\u7B97\u7684\u7ED3\u679C"),y.value=e.data.map(s=>({id:s.id,category:s.category,yearlyPlan:s.id===1?59400:600,currentMonthIncome:s.currentMonthIncome||0,accumulatedIncome:s.accumulatedIncome||0})),console.log("\u5904\u7406\u540E\u7684\u6570\u636E:",y.value)):(console.log("\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),y.value=F()),await L(o),await Y(o)}catch(r){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",r),y.value=F()}},L=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/main-business-income/${o}`);if(!r.ok){if(r.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),n.value=I();return}throw new Error("\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25")}const e=await r.json();if(console.log("\u4E3B\u8425\u4E1A\u52A1\u6536\u5165API\u8FD4\u56DE\u6570\u636E:",e),e.success&&e.data){const s=e.data,t=(i,x,N)=>i.map(m=>{const S=x.find(V=>V.segment===N&&V.customer===m.customer);return S?{...m,currentMonthIncome:S.currentMonthIncome||0,accumulatedIncome:S.accumulatedIncome||0,progress:S.progress||"0.00%"}:m});if(Array.isArray(s)){const i=s.filter(m=>m.segment==="\u8BBE\u5907"),x=s.filter(m=>m.segment==="\u5143\u4EF6"),N=s.filter(m=>m.segment==="\u5DE5\u7A0B");n.value.equipment=t(n.value.equipment,i,"\u8BBE\u5907"),n.value.components=t(n.value.components,x,"\u5143\u4EF6"),n.value.engineering=t(n.value.engineering,N,"\u5DE5\u7A0B")}console.log("\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5408\u5E76\u5B8C\u6210:",n.value)}}catch(r){console.error("\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25:",r),n.value=I()}},Y=async o=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\uFF0C\u671F\u95F4: ${o}`);const r=await fetch(`http://47.111.95.19:3000/non-main-business/${o}`);if(!r.ok){if(r.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),p.value=f();return}throw new Error("\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25")}const e=await r.json();if(console.log("\u975E\u4E3B\u8425\u4E1A\u52A1API\u8FD4\u56DE\u6570\u636E:",e),e.success&&e.data&&Array.isArray(e.data)){const s=e.data;p.value=p.value.map(t=>{const i=s.find(x=>x.id===t.id);return i?{...t,yearlyPlan:i.yearlyPlan||t.yearlyPlan,currentPeriod:i.currentPeriod||0,cumulative:i.cumulative||0}:t}),console.log("\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5408\u5E76\u5B8C\u6210:",p.value)}}catch(r){console.error("\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",r),p.value=f()}};O(()=>B.query.period,o=>{o&&(l.value=o.toString(),M(o.toString()),k())}),O(l,o=>{M(o),k()});const G=async()=>{try{console.log("\u4FDD\u5B58\u6570\u636E:",{period:l.value,data:y.value});const o=await fetch("http://47.111.95.19:3000/business-income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({period:l.value,data:y.value})});if(!o.ok){const r=await o.text();throw new Error(`\u4FDD\u5B58\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u6570\u636E\u5931\u8D25: ${o.status} - ${r}`)}await z(),await H(),await $(A.BUSINESS_INCOME_STRUCTURE,l.value,y.value,h.value,_.value),alert("\u4FDD\u5B58\u6210\u529F")}catch(o){console.error("\u4FDD\u5B58\u5931\u8D25:",o),alert("\u4FDD\u5B58\u5931\u8D25: "+(o instanceof Error?o.message:"\u672A\u77E5\u9519\u8BEF"))}},z=async()=>{try{const o=[...n.value.equipment.map(t=>({...t,segment:"\u8BBE\u5907"})),...n.value.components.map(t=>({...t,segment:"\u5143\u4EF6"})),...n.value.engineering.map(t=>({...t,segment:"\u5DE5\u7A0B"}))],r={period:l.value,data:o};console.log("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E:",r);const e=await fetch("http://47.111.95.19:3000/main-business-income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){const t=await e.text();throw new Error(`\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25: ${e.status} - ${t}`)}const s={equipment:n.value.equipment,components:n.value.components,engineering:n.value.engineering};await $(A.MAIN_BUSINESS_INCOME,l.value,s,"","")}catch(o){throw console.error("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u6570\u636E\u5931\u8D25:",o),o}},H=async()=>{try{const o={period:l.value,data:p.value};console.log("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",o);const r=await fetch("http://47.111.95.19:3000/non-main-business",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok){const e=await r.text();throw new Error(`\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25: ${r.status} - ${e}`)}await $(A.NON_MAIN_BUSINESS,l.value,p.value,"","")}catch(o){throw console.error("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",o),o}},K=()=>{y.value=F(),n.value=I(),p.value=f(),h.value="",_.value="",console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")},k=async()=>{const{remarks:o,suggestions:r}=await ou(A.BUSINESS_INCOME_STRUCTURE,l.value);h.value=o,_.value=r};return X(()=>{console.log("\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",l.value),B.query.period?M(B.query.period.toString()):M(l.value),k()}),(o,r)=>(d(),c("div",tu,[u("div",au,[r[3]||(r[3]=u("h1",{class:"text-2xl font-bold"},"\u8425\u4E1A\u6536\u5165\u7ED3\u6784\u4E0E\u8D28\u91CF\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),u("div",su,[b(u("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>l.value=e),type:"month",class:"px-3 py-2 border rounded"},null,512),[[E,l.value]])])]),u("div",nu,[u("table",lu,[r[6]||(r[6]=u("thead",{class:"sticky top-0 bg-white"},[u("tr",{class:"bg-gray-50"},[u("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u6708\u6536\u5165"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1\u6536\u5165"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),u("tbody",null,[(d(!0),c(v,null,D(y.value,(e,s)=>(d(),c("tr",{key:s},[u("td",cu,a(e.id),1),u("td",du,a(e.category),1),u("td",yu,a(e.yearlyPlan.toFixed(2)),1),u("td",iu,a(e.currentMonthIncome.toFixed(2)),1),u("td",pu,a(e.accumulatedIncome.toFixed(2)),1),u("td",mu,[u("span",gu,a(j(e.yearlyPlan,e.accumulatedIncome))+"%",1)])]))),128)),u("tr",bu,[r[4]||(r[4]=u("td",{class:"border border-gray-300 px-4 py-2 text-center"},"\u5408\u8BA1",-1)),r[5]||(r[5]=u("td",{class:"border border-gray-300 px-4 py-2"},null,-1)),u("td",Eu,a(w.value.yearlyPlan.toFixed(2)),1),u("td",Fu,a(w.value.currentMonthIncome.toFixed(2)),1),u("td",hu,a(w.value.accumulatedIncome.toFixed(2)),1),u("td",_u,a(w.value.progress.toFixed(2))+"% ",1)])])])]),u("div",xu,[r[9]||(r[9]=u("h2",{class:"text-xl font-bold mb-4"},"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\u5206\u89E3\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),u("div",vu,[u("table",Du,[r[8]||(r[8]=u("thead",{class:"sticky top-0 bg-white"},[u("tr",{class:"bg-gray-50"},[u("th",{class:"border border-gray-300 px-4 py-2"},"\u677F\u5757"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5BA2\u6237\u5C5E\u6027"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u6708\u6536\u5165"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1\u6536\u5165"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),u("tbody",null,[(d(!0),c(v,null,D(n.value.equipment,(e,s)=>(d(),c("tr",{key:`equipment-${s}`},[s===0?(d(),c("td",{key:0,rowspan:n.value.equipment.length,class:"border border-gray-300 px-4 py-2 font-medium text-center"}," \u8BBE\u5907 ",8,Au)):T("",!0),u("td",Bu,a(e.customer),1),u("td",Iu,a(e.yearlyPlan),1),u("td",fu,[b(u("input",{"onUpdate:modelValue":t=>e.currentMonthIncome=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Pu),[[E,e.currentMonthIncome,void 0,{number:!0}]])]),u("td",Cu,[u("span",wu,a(e.accumulatedIncome.toFixed(2)),1)]),u("td",Mu,a(e.progress),1)]))),128)),(d(!0),c(v,null,D(n.value.components,(e,s)=>(d(),c("tr",{key:`components-${s}`},[s===0?(d(),c("td",{key:0,rowspan:n.value.components.length,class:"border border-gray-300 px-4 py-2 font-medium text-center"}," \u5143\u4EF6 ",8,Su)):T("",!0),u("td",ku,a(e.customer),1),u("td",Nu,a(e.yearlyPlan),1),u("td",Uu,[b(u("input",{"onUpdate:modelValue":t=>e.currentMonthIncome=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Tu),[[E,e.currentMonthIncome,void 0,{number:!0}]])]),u("td",$u,[u("span",qu,a(e.accumulatedIncome.toFixed(2)),1)]),u("td",Vu,a(e.progress),1)]))),128)),(d(!0),c(v,null,D(n.value.engineering,(e,s)=>(d(),c("tr",{key:`engineering-${s}`},[s===0?(d(),c("td",{key:0,rowspan:n.value.engineering.length,class:"border border-gray-300 px-4 py-2 font-medium text-center"}," \u5DE5\u7A0B ",8,Ou)):T("",!0),u("td",Ru,a(e.customer),1),u("td",ju,a(e.yearlyPlan),1),u("td",Ju,[b(u("input",{"onUpdate:modelValue":t=>e.currentMonthIncome=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,Lu),[[E,e.currentMonthIncome,void 0,{number:!0}]])]),u("td",Yu,[u("span",Gu,a(e.accumulatedIncome.toFixed(2)),1)]),u("td",zu,a(e.progress),1)]))),128)),u("tr",Hu,[r[7]||(r[7]=u("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),u("td",Ku,a(P.value.yearlyPlan.toFixed(2)),1),u("td",Qu,a(P.value.currentMonthIncome.toFixed(2)),1),u("td",Wu,a(P.value.accumulatedIncome.toFixed(2)),1),u("td",Xu,a(P.value.progress),1)])])])])]),u("div",Zu,[r[13]||(r[13]=u("h2",{class:"text-xl font-bold mb-4"},"\u975E\u4E3B\u8425\u4E1A\u52A1\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),u("div",ue,[u("table",ee,[r[12]||(r[12]=u("thead",{class:"sticky top-0 bg-white"},[u("tr",{class:"bg-gray-50"},[u("th",{class:"border border-gray-300 px-4 py-2 w-24"},"\u5E8F\u53F7"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),u("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),u("tbody",null,[(d(!0),c(v,null,D(p.value,(e,s)=>(d(),c("tr",{key:s},[u("td",re,a(e.id),1),u("td",oe,a(e.category),1),u("td",te,[b(u("input",{"onUpdate:modelValue":t=>e.yearlyPlan=t,type:"number",class:"w-full px-2 py-1 border rounded bg-gray-100",step:"0.01",readonly:""},null,8,ae),[[E,e.yearlyPlan,void 0,{number:!0}]])]),u("td",se,[b(u("input",{"onUpdate:modelValue":t=>e.currentPeriod=t,type:"number",class:"w-full px-2 py-1 border rounded",step:"0.01"},null,8,ne),[[E,e.currentPeriod,void 0,{number:!0}]])]),u("td",le,[u("span",ce,a(R(e.cumulative)),1)]),u("td",de,a(J(e.yearlyPlan,e.cumulative))+"% ",1)]))),128)),u("tr",ye,[r[10]||(r[10]=u("td",{class:"border border-gray-300 px-4 py-2 text-center"},"\u5408\u8BA1",-1)),r[11]||(r[11]=u("td",{class:"border border-gray-300 px-4 py-2"},null,-1)),u("td",ie,a(C.value.yearlyPlan.toFixed(2)),1),u("td",pe,a(C.value.currentPeriod.toFixed(2)),1),u("td",me,a(C.value.cumulative.toFixed(2)),1),u("td",ge,a(C.value.progress)+"% ",1)])])])])]),Z(ru,{"module-id":uu(A).BUSINESS_INCOME_STRUCTURE,period:l.value,remarks:h.value,"onUpdate:remarks":r[1]||(r[1]=e=>h.value=e),suggestions:_.value,"onUpdate:suggestions":r[2]||(r[2]=e=>_.value=e)},null,8,["module-id","period","remarks","suggestions"]),u("div",{class:"mt-4 flex justify-end space-x-4"},[u("button",{onClick:G,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),u("button",{onClick:K,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")])]))}});var _e=Q(be,[["__scopeId","data-v-1813c7ae"]]);export{_e as default};
