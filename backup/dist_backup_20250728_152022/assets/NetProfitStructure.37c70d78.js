import{_ as Fu,d as mu,r as _,D as Du,c as ou,B as z,o as Eu,b as D,e as t,y as b,A as F,F as U,g as P,t as c,k as Bu,h as vu,G as xu,v as E,f as H}from"./index.9596b90d.js";import{_ as hu,r as K,M as A,l as fu}from"./FormAttachmentAndRemarks.cf274d2f.js";const _u={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},Au={class:"flex justify-between items-center mb-6"},wu={class:"flex items-center space-x-4"},Mu={class:"overflow-x-auto my-6"},Cu={class:"w-full border-collapse border border-gray-300"},Vu={class:"border border-gray-300 px-4 py-2"},Tu={class:"border border-gray-300 px-4 py-2"},Su={class:"border border-gray-300 px-4 py-2"},Nu={class:"border border-gray-300 px-4 py-2"},$u={class:"border border-gray-300 px-4 py-2"},ku={class:"border border-gray-300 px-4 py-2"},Uu={class:"border border-gray-300 px-4 py-2"},Pu={class:"border border-gray-300 px-4 py-2"},Iu={class:"bg-gray-50 font-bold"},Ru={class:"border border-gray-300 px-4 py-2"},ju={class:"border border-gray-300 px-4 py-2"},Ou={class:"border border-gray-300 px-4 py-2"},qu={class:"border border-gray-300 px-4 py-2"},Lu={class:"mt-8"},Ju={class:"overflow-x-auto my-6"},Gu={class:"w-full border-collapse border border-gray-300"},zu=["rowspan"],Hu={class:"border border-gray-300 px-4 py-2"},Ku={class:"border border-gray-300 px-4 py-2"},Qu=["onUpdate:modelValue"],Wu={class:"border border-gray-300 px-4 py-2"},Xu={class:"font-medium"},Yu={class:"border border-gray-300 px-4 py-2"},Zu={class:"font-medium"},ut={class:"border border-gray-300 px-4 py-2"},tt=["rowspan"],et={class:"border border-gray-300 px-4 py-2"},rt={class:"border border-gray-300 px-4 py-2"},ot=["onUpdate:modelValue"],at={class:"border border-gray-300 px-4 py-2"},st={class:"font-medium"},nt={class:"border border-gray-300 px-4 py-2"},lt={class:"font-medium"},ct={class:"border border-gray-300 px-4 py-2"},it=["rowspan"],dt={class:"border border-gray-300 px-4 py-2"},pt={class:"border border-gray-300 px-4 py-2"},yt=["onUpdate:modelValue"],gt={class:"border border-gray-300 px-4 py-2"},bt={class:"font-medium"},Ft={class:"border border-gray-300 px-4 py-2"},mt={class:"font-medium"},Dt={class:"border border-gray-300 px-4 py-2"},Et={class:"bg-gray-50 font-bold"},Bt={class:"border border-gray-300 px-4 py-2"},vt={class:"border border-gray-300 px-4 py-2"},xt={class:"border border-gray-300 px-4 py-2"},ht={class:"mt-8"},ft={class:"overflow-x-auto my-6"},_t={class:"w-full border-collapse border border-gray-300"},At={class:"border border-gray-300 px-4 py-2 text-center"},wt={class:"border border-gray-300 px-4 py-2"},Mt={class:"border border-gray-300 px-4 py-2"},Ct={class:"w-full px-2 py-1"},Vt={class:"border border-gray-300 px-4 py-2"},Tt=["onUpdate:modelValue","onInput"],St={class:"border border-gray-300 px-4 py-2"},Nt={class:"w-full px-2 py-1"},$t={class:"border border-gray-300 px-4 py-2"},kt={class:"w-full px-2 py-1"},Ut={class:"bg-gray-50 font-bold"},Pt={class:"border border-gray-300 px-4 py-2"},It={class:"border border-gray-300 px-4 py-2"},Rt={class:"border border-gray-300 px-4 py-2"},jt={class:"border border-gray-300 px-4 py-2"},Ot=mu({__name:"NetProfitStructure",setup(qt){var uu;const Q=xu(),y=_(((uu=Q.query.period)==null?void 0:uu.toString())||new Date().toISOString().slice(0,7)),w=_(""),M=_(""),I=()=>({mainBusiness:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"},nonMainBusiness:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"},total:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"}}),R=()=>[{customerType:"\u4E0A\u6D77",plan:"2145.03",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u56FD\u7F51",plan:"621.55",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u6C5F\u82CF",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u8F93\u914D\u7535\u5185\u914D",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u897F\u95E8\u5B50",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u540C\u4E1A",plan:"553.08",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u7528\u6237",plan:"323.8",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],j=()=>[{customerType:"\u7528\u6237",plan:"-26.21",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],O=()=>[{customerType:"\u4E00\u5305",plan:"328.91",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u4E8C\u5305",plan:"14.4",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5185\u5408\u4F5C",plan:"-35.24",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u57DF\u5916\u5408\u4F5C",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u5176\u5B83",plan:"69.6",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],q=()=>[{id:1,name:"\u56FA\u5E9F\u6536\u5165",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:2,name:"\u623F\u5C4B\u79DF\u91D1",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:3,name:"\u5229\u606F\u6536\u5165",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:4,name:"\u6295\u8D44\u6536\u76CA",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:5,name:"\u8865\u8D34\u6536\u5165",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:6,name:"\u5176\u4ED6",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"}],s=Du(I()),v=_(R()),x=_(j()),h=_(O()),g=_(q()),W=_([]),B=r=>isNaN(r)?"0.00":r.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),L=ou(()=>{let r=0,u=0,e=0;return v.value.forEach(a=>{var o;r+=parseFloat(a.plan.replace(/,/g,""))||0,u+=parseFloat((o=a.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0,e+=parseFloat(a.actual.replace(/,/g,""))||0}),x.value.forEach(a=>{var o;r+=parseFloat(a.plan.replace(/,/g,""))||0,u+=parseFloat((o=a.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0,e+=parseFloat(a.actual.replace(/,/g,""))||0}),h.value.forEach(a=>{var o;r+=parseFloat(a.plan.replace(/,/g,""))||0,u+=parseFloat((o=a.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0,e+=parseFloat(a.actual.replace(/,/g,""))||0}),{plan:r,currentMonthValue:u,actual:e,contribution:"100.00%"}}),C=ou(()=>{let r=0,u=0,e=0;g.value.forEach(o=>{r+=parseFloat(o.plan.replace(/,/g,""))||0,u+=parseFloat(o.currentPeriod.replace(/,/g,""))||0,e+=parseFloat(o.accumulated.replace(/,/g,""))||0});const a=r!==0?(e/r*100).toFixed(2)+"%":"0.00%";return{plan:r,currentPeriod:u,accumulated:e,progress:a}}),V=r=>{const u=parseFloat(s[r].plan.replace(/,/g,"")),e=parseFloat(s[r].cumulative.replace(/,/g,""));if(!isNaN(u)&&!isNaN(e)&&u!==0){const a=(e/u*100).toFixed(2);s[r].progress=`${a}%`}else s[r].progress="0.00%";Y()},X=async r=>{try{const[u,e]=r.split("-"),a=parseInt(e),o=[];for(let l=1;l<=a;l++){const d=`${u}-${l.toString().padStart(2,"0")}`;try{const n=await fetch(`http://47.111.95.19:3000/non-main-business-net-profit/${d}`);if(n.ok){const i=await n.json();i.data&&Array.isArray(i.data)&&o.push({period:d,data:i.data})}}catch(n){console.log(`\u8DF3\u8FC7\u6708\u4EFD ${d}:`,n)}}W.value=o,console.log("\u52A0\u8F7D\u7684\u6240\u6709\u6708\u4EFD\u6570\u636E:",o)}catch(u){console.error("\u52A0\u8F7D\u6240\u6709\u6708\u4EFD\u6570\u636E\u5931\u8D25:",u)}},au=(r,u)=>{let e=0;const a=y.value;for(const l of W.value){if(l.period===a)continue;const d=l.data.find(n=>n.id===r||n.name===u);d&&d.currentPeriod&&(e+=parseFloat(d.currentPeriod.toString().replace(/,/g,""))||0)}const o=g.value.find(l=>l.id===r);return o&&o.currentPeriod&&(e+=parseFloat(o.currentPeriod.toString().replace(/,/g,""))||0),e.toFixed(2)},T=()=>{g.value.forEach(r=>{r.accumulated=au(r.id,r.name)})},su=r=>{T();const u=parseFloat(g.value[r].plan.replace(/,/g,"")),e=parseFloat(g.value[r].accumulated.replace(/,/g,""));if(!isNaN(u)&&!isNaN(e)&&u!==0){const a=(e/u*100).toFixed(2);g.value[r].progress=`${a}%`}else e>0,g.value[r].progress="0.00%"},Y=()=>{const r=parseFloat(s.mainBusiness.plan.replace(/,/g,""))||0,u=parseFloat(s.nonMainBusiness.plan.replace(/,/g,""))||0,e=parseFloat(s.mainBusiness.current.replace(/,/g,""))||0,a=parseFloat(s.nonMainBusiness.current.replace(/,/g,""))||0,o=parseFloat(s.mainBusiness.cumulative.replace(/,/g,""))||0,l=parseFloat(s.nonMainBusiness.cumulative.replace(/,/g,""))||0,d=r+u,n=e+a,i=o+l;if(s.total.plan=d.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),s.total.current=n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),s.total.cumulative=i.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),d!==0){const m=(i/d*100).toFixed(2);s.total.progress=`${m}%`}else s.total.progress="0.00%"};z(()=>Q.query.period,r=>{r&&(y.value=r.toString(),J(r.toString()))}),z(y,(r,u)=>{r&&r!==u&&(console.log(`\u671F\u95F4\u53D1\u751F\u53D8\u5316: ${u} -> ${r}`),J(r),Z())}),z(()=>[s.mainBusiness.current,s.nonMainBusiness.current],async()=>{await nu()},{deep:!0});const nu=async()=>{var r,u,e,a;try{const[o]=y.value.split("-");let l=0,d=0;for(let n=1;n<=parseInt(y.value.split("-")[1]);n++){const i=`${o}-${n.toString().padStart(2,"0")}`;try{const m=await fetch(`http://47.111.95.19:3000/net-profit-structure/${i}`);if(m.ok){const f=await m.json();if(f.success&&f.data){const S=parseFloat(((r=f.data.mainBusiness)==null?void 0:r.current)||((u=f.data.mainBusiness)==null?void 0:u.actual)||0),N=parseFloat(((e=f.data.nonMainBusiness)==null?void 0:e.current)||((a=f.data.nonMainBusiness)==null?void 0:a.actual)||0);l+=S,d+=N}}}catch(m){console.log(`\u8DF3\u8FC7\u671F\u95F4 ${i} \u7684\u6570\u636E\u8BA1\u7B97:`,m)}}s.mainBusiness.cumulative=l.toFixed(2),s.nonMainBusiness.cumulative=d.toFixed(2),s.total.cumulative=(l+d).toFixed(2),V("mainBusiness"),V("nonMainBusiness")}catch(o){console.error("\u8BA1\u7B97\u7D2F\u8BA1\u503C\u5931\u8D25:",o)}},J=async r=>{var u,e,a,o,l,d,n,i,m,f,S,N,tu,eu,ru;try{console.log(`\u6B63\u5728\u52A0\u8F7D\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E\uFF0C\u671F\u95F4: ${r}`);const $=await fetch(`http://47.111.95.19:3000/net-profit-structure/${r}`);let p=null;if($.ok){const k=await $.json();console.log("API\u8FD4\u56DE\u6570\u636E:",k),k.success&&k.data&&(p=k.data,console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76..."),s.mainBusiness={plan:((u=p.mainBusiness)==null?void 0:u.plan)||"0",current:((e=p.mainBusiness)==null?void 0:e.current)||((a=p.mainBusiness)==null?void 0:a.actual)||"0",cumulative:((o=p.mainBusiness)==null?void 0:o.cumulative)||"0",progress:((l=p.mainBusiness)==null?void 0:l.progress)||"0.00%"},s.nonMainBusiness={plan:((d=p.nonMainBusiness)==null?void 0:d.plan)||"0",current:((n=p.nonMainBusiness)==null?void 0:n.current)||((i=p.nonMainBusiness)==null?void 0:i.actual)||"0",cumulative:((m=p.nonMainBusiness)==null?void 0:m.cumulative)||"0",progress:((f=p.nonMainBusiness)==null?void 0:f.progress)||"0.00%"},s.total={plan:((S=p.total)==null?void 0:S.plan)||"0",current:((N=p.total)==null?void 0:N.current)||((tu=p.total)==null?void 0:tu.actual)||"0",cumulative:((eu=p.total)==null?void 0:eu.cumulative)||"0",progress:((ru=p.total)==null?void 0:ru.progress)||"0.00%"},Y(),console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",s))}else throw console.log("\u52A0\u8F7D\u6570\u636E\u5931\u8D25"),new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25");await cu(r),await du(r)}catch($){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",$);const p=I();s.mainBusiness={...p.mainBusiness},s.nonMainBusiness={...p.nonMainBusiness},s.total={...p.total}}},lu=async r=>{try{const u=await fetch(`http://47.111.95.19:3000/main-business-net-profit/monthly-data/${r}`);if(u.ok){const e=await u.json();if(e.success)return e.data}return console.error(`\u83B7\u53D6${r}\u6708\u5EA6\u6570\u636E\u5931\u8D25:`,u.status),null}catch(u){return console.error(`\u83B7\u53D6${r}\u6708\u5EA6\u6570\u636E\u5931\u8D25:`,u),null}},G=(r,u)=>{u&&(r.currentMonthValue=B(u.currentMonthValue||0),r.actual=B(u.cumulativeValue||0),r.contribution=u.contribution||"0.00%")},cu=async r=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u51C0\u5229\u6DA6\u8D21\u732E\u6570\u636E\uFF0C\u671F\u95F4: ${r}`);const u=await fetch(`http://47.111.95.19:3000/main-business-net-profit/${r}`);let e=[];if(u.ok){const o=await u.json();console.log("API\u8FD4\u56DE\u6570\u636E:",o),o.success&&o.data&&Array.isArray(o.data)&&(e=o.data,console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76..."))}else u.status===404?(console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F"),v.value=R(),x.value=j(),h.value=O()):console.log("\u52A0\u8F7D\u6570\u636E\u5931\u8D25\uFF0C\u4F7F\u7528\u9884\u7B97\u6570\u636E\u586B\u5145");const a=(o,l,d)=>o.map(n=>{const i=l.find(m=>m.segment===d&&m.customerType===n.customerType);return i?{...n,currentMonthValue:i.currentMonthValue||n.currentMonthValue,actual:i.actual||n.actual,contribution:i.contribution||n.contribution}:n});v.value=a(v.value,e,"\u8BBE\u5907"),x.value=a(x.value,e,"\u5143\u4EF6"),h.value=a(h.value,e,"\u5DE5\u7A0B"),await iu()}catch(u){console.error("\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",u)}},iu=async()=>{try{console.log("\u5F00\u59CB\u83B7\u53D6\u6708\u5EA6\u6570\u636E\uFF0C\u671F\u95F4:",y.value);const r=await lu(y.value);if(!r){console.error("\u83B7\u53D6\u6708\u5EA6\u6570\u636E\u5931\u8D25");return}v.value.forEach(u=>{var a;const e=(a=r.equipment)==null?void 0:a.find(o=>o.customer===u.customerType);G(u,e)}),x.value.forEach(u=>{var a;const e=(a=r.components)==null?void 0:a.find(o=>o.customer===u.customerType);G(u,e)}),h.value.forEach(u=>{var a;const e=(a=r.engineering)==null?void 0:a.find(o=>o.customer===u.customerType);G(u,e)}),console.log("\u7D2F\u8BA1\u503C\u8BA1\u7B97\u5B8C\u6210")}catch(r){console.error("\u8BA1\u7B97\u7D2F\u8BA1\u503C\u5931\u8D25:",r)}},du=async r=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u6570\u636E\uFF0C\u671F\u95F4: ${r}`);const u=await fetch(`http://47.111.95.19:3000/non-main-business-net-profit/${r}`);if(!u.ok){if(u.status===404){console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u6570\u636E\uFF0C\u4FDD\u6301\u5E74\u5EA6\u8BA1\u5212\u4F46\u6E05\u7A7A\u5F53\u671F\u503C"),g.value=g.value.map(a=>({...a,currentPeriod:"0",accumulated:"0",progress:"0.00%"})),await X(r),T();return}throw new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25")}const e=await u.json();if(console.log("\u975E\u4E3B\u8425\u4E1A\u52A1API\u8FD4\u56DE\u6570\u636E:",e),e.success&&e.data&&Array.isArray(e.data)){const a=e.data;console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76...");const o=(l,d)=>l.map(n=>{const i=d.find(m=>m.id===n.id||m.name===n.name);return i?{...n,plan:i.plan||n.plan,currentPeriod:i.currentPeriod||n.currentPeriod,accumulated:i.accumulated||n.accumulated,progress:i.progress||n.progress}:n});g.value=o(g.value,a),console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",g.value)}await X(r),T()}catch(u){console.error("\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",u);const e=q();g.value=[...e]}},pu=async()=>{try{const r={mainBusiness:s.mainBusiness,nonMainBusiness:s.nonMainBusiness,total:s.total},u={period:y.value,data:r};console.log("\u4FDD\u5B58\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E:",u);const e=await fetch("http://47.111.95.19:3000/net-profit-structure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!e.ok){const a=await e.text();throw new Error(`\u4FDD\u5B58\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E\u5931\u8D25: ${e.status} - ${a}`)}await yu(),await gu(),await K(A.NET_PROFIT_STRUCTURE,y.value,r,w.value,M.value),alert("\u4FDD\u5B58\u6210\u529F")}catch(r){console.error("\u4FDD\u5B58\u5931\u8D25:",r),alert("\u4FDD\u5B58\u5931\u8D25: "+(r instanceof Error?r.message:"\u672A\u77E5\u9519\u8BEF"))}},yu=async()=>{try{const r=[...v.value.map(o=>({...o,segment:"\u8BBE\u5907"})),...x.value.map(o=>({...o,segment:"\u5143\u4EF6"})),...h.value.map(o=>({...o,segment:"\u5DE5\u7A0B"}))],u={period:y.value,data:r};console.log("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",u);const e=await fetch("http://47.111.95.19:3000/main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!e.ok){const o=await e.text();throw new Error(`\u4FDD\u5B58\u5931\u8D25: ${e.status} - ${o}`)}const a={equipment:v.value,component:x.value,project:h.value};await K(A.MAIN_BUSINESS_NET_PROFIT,y.value,a,"","")}catch(r){throw console.error("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",r),r}},gu=async()=>{try{T();const r={period:y.value,data:g.value};console.log("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",r);const u=await fetch("http://47.111.95.19:3000/non-main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!u.ok){const e=await u.text();throw new Error(`\u4FDD\u5B58\u5931\u8D25: ${u.status} - ${e}`)}await K(A.NON_MAIN_BUSINESS_NET_PROFIT,y.value,g.value,"","")}catch(r){throw console.error("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",r),r}},bu=()=>{const r=I();s.mainBusiness={...r.mainBusiness},s.nonMainBusiness={...r.nonMainBusiness},s.total={...r.total},v.value=R(),x.value=j(),h.value=O(),g.value=q(),console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")},Z=async()=>{const{remarks:r,suggestions:u}=await fu(A.NET_PROFIT_STRUCTURE,y.value);w.value=r,M.value=u};return Eu(()=>{console.log("\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",y.value),J(y.value),Z()}),(r,u)=>(E(),D("div",_u,[t("div",Au,[u[17]||(u[17]=t("h1",{class:"text-2xl font-bold"},"\u51C0\u5229\u6DA6\u7ED3\u6784\u4E0E\u8D28\u91CF\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),u[18]||(u[18]=t("div",{class:"text-gray-500"},"(\u6309\u5E74\u5EA6\u8BA1\u5212\u53E3\u5F84\u5206\u89E3)",-1)),t("div",wu,[b(t("input",{"onUpdate:modelValue":u[0]||(u[0]=e=>y.value=e),type:"month",class:"px-3 py-2 border rounded"},null,512),[[F,y.value]])])]),t("div",Mu,[t("table",Cu,[u[24]||(u[24]=t("thead",{class:"sticky top-0 bg-white"},[t("tr",{class:"bg-gray-50"},[t("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),t("tbody",null,[t("tr",null,[u[19]||(u[19]=t("td",{class:"border border-gray-300 px-4 py-2 text-center"},"1",-1)),u[20]||(u[20]=t("td",{class:"border border-gray-300 px-4 py-2"},"\u4E3B\u8425\u4E1A\u52A1",-1)),t("td",Vu,[b(t("input",{"onUpdate:modelValue":u[1]||(u[1]=e=>s.mainBusiness.plan=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.mainBusiness.plan]])]),t("td",Tu,[b(t("input",{"onUpdate:modelValue":u[2]||(u[2]=e=>s.mainBusiness.current=e),type:"text",class:"w-full px-2 py-1 border rounded",onInput:u[3]||(u[3]=e=>V("mainBusiness"))},null,544),[[F,s.mainBusiness.current]])]),t("td",Su,[b(t("input",{"onUpdate:modelValue":u[4]||(u[4]=e=>s.mainBusiness.cumulative=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.mainBusiness.cumulative]])]),t("td",Nu,[b(t("input",{"onUpdate:modelValue":u[5]||(u[5]=e=>s.mainBusiness.progress=e),type:"text",class:"w-full px-2 py-1 border rounded"},null,512),[[F,s.mainBusiness.progress]])])]),t("tr",null,[u[21]||(u[21]=t("td",{class:"border border-gray-300 px-4 py-2 text-center"},"2",-1)),u[22]||(u[22]=t("td",{class:"border border-gray-300 px-4 py-2"},"\u975E\u4E3B\u8425\u4E1A\u52A1",-1)),t("td",$u,[b(t("input",{"onUpdate:modelValue":u[6]||(u[6]=e=>s.nonMainBusiness.plan=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.nonMainBusiness.plan]])]),t("td",ku,[b(t("input",{"onUpdate:modelValue":u[7]||(u[7]=e=>s.nonMainBusiness.current=e),type:"text",class:"w-full px-2 py-1 border rounded",onInput:u[8]||(u[8]=e=>V("nonMainBusiness"))},null,544),[[F,s.nonMainBusiness.current]])]),t("td",Uu,[b(t("input",{"onUpdate:modelValue":u[9]||(u[9]=e=>s.nonMainBusiness.cumulative=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[F,s.nonMainBusiness.cumulative]])]),t("td",Pu,[b(t("input",{"onUpdate:modelValue":u[10]||(u[10]=e=>s.nonMainBusiness.progress=e),type:"text",class:"w-full px-2 py-1 border rounded"},null,512),[[F,s.nonMainBusiness.progress]])])]),t("tr",Iu,[u[23]||(u[23]=t("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),t("td",Ru,[b(t("input",{"onUpdate:modelValue":u[11]||(u[11]=e=>s.total.plan=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.plan]])]),t("td",ju,[b(t("input",{"onUpdate:modelValue":u[12]||(u[12]=e=>s.total.current=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.current]])]),t("td",Ou,[b(t("input",{"onUpdate:modelValue":u[13]||(u[13]=e=>s.total.cumulative=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.cumulative]])]),t("td",qu,[b(t("input",{"onUpdate:modelValue":u[14]||(u[14]=e=>s.total.progress=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[F,s.total.progress]])])])])])]),t("div",Lu,[u[28]||(u[28]=t("h2",{class:"text-xl font-bold mb-4"},"\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),t("div",Ju,[t("table",Gu,[u[27]||(u[27]=t("thead",{class:"sticky top-0 bg-white"},[t("tr",{class:"bg-gray-50"},[t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u677F\u5757"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5BA2\u6237\u5C5E\u6027"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5E74\u5EA6\u8BA1\u5212"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5F53\u6708\u503C"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u7D2F\u8BA1\u503C"),t("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5206\u7C7B\u8D21\u732E\u5360\u6BD4")])],-1)),t("tbody",null,[(E(!0),D(U,null,P(v.value,(e,a)=>{var o;return E(),D("tr",{key:`equipment-${a}`},[a===0?(E(),D("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:v.value.length}," \u8BBE\u5907 ",8,zu)):H("",!0),t("td",Hu,c(e.customerType),1),t("td",Ku,[b(t("input",{"onUpdate:modelValue":l=>e.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,Qu),[[F,e.plan]])]),t("td",Wu,[t("span",Xu,c(B(parseFloat((o=e.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0)),1)]),t("td",Yu,[t("span",Zu,c(e.actual),1)]),t("td",ut,c(e.contribution),1)])}),128)),(E(!0),D(U,null,P(x.value,(e,a)=>{var o;return E(),D("tr",{key:`component-${a}`},[a===0?(E(),D("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:x.value.length}," \u5143\u4EF6 ",8,tt)):H("",!0),t("td",et,c(e.customerType),1),t("td",rt,[b(t("input",{"onUpdate:modelValue":l=>e.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,ot),[[F,e.plan]])]),t("td",at,[t("span",st,c(B(parseFloat((o=e.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0)),1)]),t("td",nt,[t("span",lt,c(e.actual),1)]),t("td",ct,c(e.contribution),1)])}),128)),(E(!0),D(U,null,P(h.value,(e,a)=>{var o;return E(),D("tr",{key:`project-${a}`},[a===0?(E(),D("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:h.value.length}," \u5DE5\u7A0B ",8,it)):H("",!0),t("td",dt,c(e.customerType),1),t("td",pt,[b(t("input",{"onUpdate:modelValue":l=>e.plan=l,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,yt),[[F,e.plan]])]),t("td",gt,[t("span",bt,c(B(parseFloat((o=e.currentMonthValue)==null?void 0:o.replace(/,/g,""))||0)),1)]),t("td",Ft,[t("span",mt,c(e.actual),1)]),t("td",Dt,c(e.contribution),1)])}),128)),t("tr",Et,[u[25]||(u[25]=t("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),t("td",Bt,c(B(L.value.plan)),1),t("td",vt,c(B(L.value.currentMonthValue)),1),t("td",xt,c(B(L.value.actual)),1),u[26]||(u[26]=t("td",{class:"border border-gray-300 px-4 py-2"}," 100.00% ",-1))])])])])]),t("div",ht,[u[31]||(u[31]=t("h2",{class:"text-xl font-bold mb-4"},"\u975E\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),t("div",ft,[t("table",_t,[u[30]||(u[30]=t("thead",{class:"sticky top-0 bg-white"},[t("tr",{class:"bg-gray-50"},[t("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),t("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),t("tbody",null,[(E(!0),D(U,null,P(g.value,(e,a)=>(E(),D("tr",{key:a},[t("td",At,c(e.id),1),t("td",wt,c(e.name),1),t("td",Mt,[t("span",Ct,c(e.plan),1)]),t("td",Vt,[b(t("input",{"onUpdate:modelValue":o=>e.currentPeriod=o,type:"text",class:"w-full px-2 py-1 border rounded",onInput:o=>su(a)},null,40,Tt),[[F,e.currentPeriod]])]),t("td",St,[t("span",Nt,c(e.accumulated),1)]),t("td",$t,[t("span",kt,c(e.progress),1)])]))),128)),t("tr",Ut,[u[29]||(u[29]=t("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),t("td",Pt,c(B(C.value.plan)),1),t("td",It,c(B(C.value.currentPeriod)),1),t("td",Rt,c(B(C.value.accumulated)),1),t("td",jt,c(C.value.progress),1)])])])])]),t("div",{class:"mt-4 flex justify-end space-x-4"},[t("button",{onClick:pu,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),t("button",{onClick:bu,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")]),Bu(hu,{"module-id":vu(A).NET_PROFIT_STRUCTURE,period:y.value,remarks:w.value,"onUpdate:remarks":u[15]||(u[15]=e=>w.value=e),suggestions:M.value,"onUpdate:suggestions":u[16]||(u[16]=e=>M.value=e)},null,8,["module-id","period","remarks","suggestions"])]))}});var Gt=Fu(Ot,[["__scopeId","data-v-3759ed1a"]]);export{Gt as default};
