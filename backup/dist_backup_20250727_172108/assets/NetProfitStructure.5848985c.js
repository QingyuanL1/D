import{_ as rt,d as nt,r as U,D as k,B as T,o as lt,c as B,a,y as m,A as D,F as S,l as N,t as c,b as it,m as ct,G as pt,f as x,k as P}from"./index.4101c804.js";import{_ as dt,r as j,M as h,l as yt}from"./FormAttachmentAndRemarks.3bd75927.js";const gt={class:"max-w-[1500px] mx-auto bg-white rounded-lg shadow-lg p-6"},bt={class:"flex justify-between items-center mb-6"},mt={class:"flex items-center space-x-4"},Dt={class:"overflow-x-auto my-6"},Ft={class:"w-full border-collapse border border-gray-300"},Et={class:"border border-gray-300 px-4 py-2"},Bt={class:"border border-gray-300 px-4 py-2"},xt={class:"border border-gray-300 px-4 py-2"},ft={class:"border border-gray-300 px-4 py-2"},ht={class:"border border-gray-300 px-4 py-2"},_t={class:"border border-gray-300 px-4 py-2"},At={class:"border border-gray-300 px-4 py-2"},vt={class:"border border-gray-300 px-4 py-2"},wt={class:"bg-gray-50 font-bold"},Mt={class:"border border-gray-300 px-4 py-2"},Ct={class:"border border-gray-300 px-4 py-2"},Vt={class:"border border-gray-300 px-4 py-2"},Tt={class:"border border-gray-300 px-4 py-2"},St={class:"mt-8"},Nt={class:"overflow-x-auto my-6"},$t={class:"w-full border-collapse border border-gray-300"},It=["rowspan"],Ut={class:"border border-gray-300 px-4 py-2"},kt={class:"border border-gray-300 px-4 py-2"},Pt=["onUpdate:modelValue"],jt={class:"border border-gray-300 px-4 py-2"},Rt={class:"font-medium"},qt={class:"border border-gray-300 px-4 py-2"},Ot={class:"font-medium"},Lt={class:"border border-gray-300 px-4 py-2"},Jt=["rowspan"],Gt={class:"border border-gray-300 px-4 py-2"},zt={class:"border border-gray-300 px-4 py-2"},Ht=["onUpdate:modelValue"],Kt={class:"border border-gray-300 px-4 py-2"},Qt={class:"font-medium"},Wt={class:"border border-gray-300 px-4 py-2"},Xt={class:"font-medium"},Yt={class:"border border-gray-300 px-4 py-2"},Zt=["rowspan"],ta={class:"border border-gray-300 px-4 py-2"},aa={class:"border border-gray-300 px-4 py-2"},ea=["onUpdate:modelValue"],sa={class:"border border-gray-300 px-4 py-2"},ua={class:"font-medium"},oa={class:"border border-gray-300 px-4 py-2"},ra={class:"font-medium"},na={class:"border border-gray-300 px-4 py-2"},la={class:"bg-gray-50 font-bold"},ia={class:"border border-gray-300 px-4 py-2"},ca={class:"border border-gray-300 px-4 py-2"},pa={class:"border border-gray-300 px-4 py-2"},da={class:"mt-8"},ya={class:"overflow-x-auto my-6"},ga={class:"w-full border-collapse border border-gray-300"},ba={class:"border border-gray-300 px-4 py-2 text-center"},ma={class:"border border-gray-300 px-4 py-2"},Da={class:"border border-gray-300 px-4 py-2"},Fa={class:"w-full px-2 py-1"},Ea={class:"border border-gray-300 px-4 py-2"},Ba=["onUpdate:modelValue","onInput"],xa={class:"border border-gray-300 px-4 py-2"},fa={class:"w-full px-2 py-1"},ha={class:"border border-gray-300 px-4 py-2"},_a={class:"w-full px-2 py-1"},Aa={class:"bg-gray-50 font-bold"},va={class:"border border-gray-300 px-4 py-2"},wa={class:"border border-gray-300 px-4 py-2"},Ma={class:"border border-gray-300 px-4 py-2"},Ca={class:"border border-gray-300 px-4 py-2"},Va=nt({__name:"NetProfitStructure",setup(Ta){var H;const R=pt(),b=U(((H=R.query.period)==null?void 0:H.toString())||new Date().toISOString().slice(0,7)),_=U(""),A=U(""),$=()=>({mainBusiness:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"},nonMainBusiness:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"},total:{plan:"0",current:"0",cumulative:"0",progress:"0.00%"}}),q=()=>({equipmentData:[{customerType:"\u519B\u54C1",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u6C11\u54C1",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],componentData:[{customerType:"\u519B\u54C1",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u6C11\u54C1",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],projectData:[{customerType:"\u519B\u54C1",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"},{customerType:"\u6C11\u54C1",plan:"0",currentMonthValue:"0",actual:"0",contribution:"0.00%"}],totalData:{plan:0,currentMonthValue:0,actual:0}}),O=()=>({items:[{id:1,name:"\u6295\u8D44\u6536\u76CA",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:2,name:"\u516C\u5141\u4EF7\u503C\u53D8\u52A8\u6536\u76CA",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:3,name:"\u8D44\u4EA7\u5904\u7F6E\u6536\u76CA",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:4,name:"\u5176\u4ED6\u6536\u76CA",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:5,name:"\u8425\u4E1A\u5916\u6536\u5165",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"},{id:6,name:"\u8425\u4E1A\u5916\u652F\u51FA",plan:"0",currentPeriod:"0",accumulated:"0",progress:"0.00%"}],totalData:{plan:0,currentPeriod:0,accumulated:0,progress:"0.00%"}}),u=k($()),l=k(q()),y=k(O()),f=s=>isNaN(s)?"0.00":s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),v=s=>{const t=parseFloat(u[s].plan.replace(/,/g,"")),e=parseFloat(u[s].cumulative.replace(/,/g,""));if(!isNaN(t)&&!isNaN(e)&&t!==0){const o=(e/t*100).toFixed(2);u[s].progress=`${o}%`}else u[s].progress="0.00%";G()},L=s=>{const t=y.items[s],e=parseFloat(t.plan.replace(/,/g,""))||0,o=parseFloat(t.accumulated.replace(/,/g,""))||0;if(e!==0){const r=(o/e*100).toFixed(2);t.progress=`${r}%`}else t.progress="0.00%";J()},J=()=>{let s=0,t=0,e=0;if(y.items.forEach(o=>{s+=parseFloat(o.plan.replace(/,/g,""))||0,t+=parseFloat(o.currentPeriod.replace(/,/g,""))||0,e+=parseFloat(o.accumulated.replace(/,/g,""))||0}),y.totalData.plan=s,y.totalData.currentPeriod=t,y.totalData.accumulated=e,s!==0){const o=(e/s*100).toFixed(2);y.totalData.progress=`${o}%`}else y.totalData.progress="0.00%"},G=()=>{const s=parseFloat(u.mainBusiness.plan.replace(/,/g,""))||0,t=parseFloat(u.nonMainBusiness.plan.replace(/,/g,""))||0,e=parseFloat(u.mainBusiness.current.replace(/,/g,""))||0,o=parseFloat(u.nonMainBusiness.current.replace(/,/g,""))||0,r=parseFloat(u.mainBusiness.cumulative.replace(/,/g,""))||0,d=parseFloat(u.nonMainBusiness.cumulative.replace(/,/g,""))||0,p=s+t,n=e+o,E=r+d;if(u.total.plan=p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),u.total.current=n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),u.total.cumulative=E.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),p!==0){const i=(E/p*100).toFixed(2);u.total.progress=`${i}%`}else u.total.progress="0.00%"};T(()=>R.query.period,s=>{s&&(b.value=s.toString(),I(s.toString()))}),T(b,(s,t)=>{s&&s!==t&&(console.log(`\u671F\u95F4\u53D1\u751F\u53D8\u5316: ${t} -> ${s}`),I(s),z())}),T(()=>y.items.map(s=>s.currentPeriod),async()=>{await X()},{deep:!0});const X=async()=>{try{const[s]=b.value.split("-");for(let t=0;t<y.items.length;t++){let e=0;for(let o=1;o<=parseInt(b.value.split("-")[1]);o++){const r=`${s}-${o.toString().padStart(2,"0")}`;try{const d=await fetch(`http://47.111.95.19:3000/non-main-business-net-profit/${r}`);if(d.ok){const p=await d.json();if(p.success&&p.data&&Array.isArray(p.data)){const n=p.data.find(E=>E.id===y.items[t].id);n&&(e+=parseFloat(n.currentPeriod||0))}}}catch(d){console.log(`\u8DF3\u8FC7\u671F\u95F4 ${r} \u7684\u6570\u636E\u8BA1\u7B97:`,d)}}y.items[t].accumulated=e.toFixed(2),L(t)}}catch(s){console.error("\u8BA1\u7B97\u975E\u4E3B\u8425\u4E1A\u52A1\u7D2F\u8BA1\u503C\u5931\u8D25:",s)}};T(()=>[u.mainBusiness.current,u.nonMainBusiness.current],async()=>{await Y()},{deep:!0});const Y=async()=>{var s,t,e,o;try{const[r]=b.value.split("-");let d=0,p=0;for(let n=1;n<=parseInt(b.value.split("-")[1]);n++){const E=`${r}-${n.toString().padStart(2,"0")}`;try{const i=await fetch(`http://47.111.95.19:3000/net-profit-structure/${E}`);if(i.ok){const F=await i.json();if(F.success&&F.data){const w=parseFloat(((s=F.data.mainBusiness)==null?void 0:s.current)||((t=F.data.mainBusiness)==null?void 0:t.actual)||0),M=parseFloat(((e=F.data.nonMainBusiness)==null?void 0:e.current)||((o=F.data.nonMainBusiness)==null?void 0:o.actual)||0);d+=w,p+=M}}}catch(i){console.log(`\u8DF3\u8FC7\u671F\u95F4 ${E} \u7684\u6570\u636E\u8BA1\u7B97:`,i)}}u.mainBusiness.cumulative=d.toFixed(2),u.nonMainBusiness.cumulative=p.toFixed(2),u.total.cumulative=(d+p).toFixed(2),v("mainBusiness"),v("nonMainBusiness")}catch(r){console.error("\u8BA1\u7B97\u7D2F\u8BA1\u503C\u5931\u8D25:",r)}},I=async s=>{var t,e,o,r,d,p,n,E,i,F,w,M,K,Q,W;try{console.log(`\u6B63\u5728\u52A0\u8F7D\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E\uFF0C\u671F\u95F4: ${s}`);const C=await fetch(`http://47.111.95.19:3000/net-profit-structure/${s}`);let g=null;if(C.ok){const V=await C.json();console.log("API\u8FD4\u56DE\u6570\u636E:",V),V.success&&V.data&&(g=V.data,console.log("\u6210\u529F\u83B7\u53D6\u6570\u636E\uFF0C\u5F00\u59CB\u5408\u5E76..."),u.mainBusiness={plan:((t=g.mainBusiness)==null?void 0:t.plan)||"0",current:((e=g.mainBusiness)==null?void 0:e.current)||((o=g.mainBusiness)==null?void 0:o.actual)||"0",cumulative:((r=g.mainBusiness)==null?void 0:r.cumulative)||"0",progress:((d=g.mainBusiness)==null?void 0:d.progress)||"0.00%"},u.nonMainBusiness={plan:((p=g.nonMainBusiness)==null?void 0:p.plan)||"0",current:((n=g.nonMainBusiness)==null?void 0:n.current)||((E=g.nonMainBusiness)==null?void 0:E.actual)||"0",cumulative:((i=g.nonMainBusiness)==null?void 0:i.cumulative)||"0",progress:((F=g.nonMainBusiness)==null?void 0:F.progress)||"0.00%"},u.total={plan:((w=g.total)==null?void 0:w.plan)||"0",current:((M=g.total)==null?void 0:M.current)||((K=g.total)==null?void 0:K.actual)||"0",cumulative:((Q=g.total)==null?void 0:Q.cumulative)||"0",progress:((W=g.total)==null?void 0:W.progress)||"0.00%"},G(),console.log("\u5408\u5E76\u540E\u7684\u6570\u636E:",u))}else throw console.log("\u52A0\u8F7D\u6570\u636E\u5931\u8D25"),new Error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25");await Z(s),await tt(s)}catch(C){console.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25:",C);const g=$();u.mainBusiness={...g.mainBusiness},u.nonMainBusiness={...g.nonMainBusiness},u.total={...g.total}}},Z=async s=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u4E3B\u8425\u51C0\u5229\u6DA6\u8D21\u732E\u6570\u636E\uFF0C\u671F\u95F4: ${s}`);const t=await fetch(`http://47.111.95.19:3000/main-business-net-profit/${s}`);if(t.ok){const e=await t.json();if(console.log("\u4E3B\u8425\u4E1A\u52A1API\u8FD4\u56DE\u6570\u636E:",e),e.success&&e.data&&Array.isArray(e.data)){const o=e.data,r=o.filter(n=>n.segment==="\u8BBE\u5907"),d=o.filter(n=>n.segment==="\u5143\u4EF6"),p=o.filter(n=>n.segment==="\u5DE5\u7A0B");l.equipmentData.forEach((n,E)=>{const i=r.find(F=>F.customerType===n.customerType);i&&(n.plan=i.plan||"0",n.currentMonthValue=i.currentMonthValue||"0",n.actual=i.actual||"0",n.contribution=i.contribution||"0.00%")}),l.componentData.forEach((n,E)=>{const i=d.find(F=>F.customerType===n.customerType);i&&(n.plan=i.plan||"0",n.currentMonthValue=i.currentMonthValue||"0",n.actual=i.actual||"0",n.contribution=i.contribution||"0.00%")}),l.projectData.forEach((n,E)=>{const i=p.find(F=>F.customerType===n.customerType);i&&(n.plan=i.plan||"0",n.currentMonthValue=i.currentMonthValue||"0",n.actual=i.actual||"0",n.contribution=i.contribution||"0.00%")}),at()}}else t.status===404&&console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F")}catch(t){console.error("\u52A0\u8F7D\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",t)}},tt=async s=>{try{console.log(`\u6B63\u5728\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u6570\u636E\uFF0C\u671F\u95F4: ${s}`);const t=await fetch(`http://47.111.95.19:3000/non-main-business-net-profit/${s}`);if(t.ok){const e=await t.json();if(console.log("\u975E\u4E3B\u8425\u4E1A\u52A1API\u8FD4\u56DE\u6570\u636E:",e),e.success&&e.data&&Array.isArray(e.data)){const o=e.data;y.items.forEach((r,d)=>{const p=o.find(n=>n.id===r.id);p&&(r.plan=p.plan||"0",r.currentPeriod=p.currentPeriod||"0",r.accumulated=p.accumulated||"0",r.progress=p.progress||"0.00%")}),J()}}else t.status===404&&console.log("\u8BE5\u671F\u95F4\u6682\u65E0\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\uFF0C\u4F7F\u7528\u521D\u59CB\u6A21\u677F")}catch(t){console.error("\u52A0\u8F7D\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",t)}},at=()=>{let s=0,t=0,e=0;l.equipmentData.forEach(o=>{var r;s+=parseFloat(o.plan.replace(/,/g,""))||0,t+=parseFloat((r=o.currentMonthValue)==null?void 0:r.replace(/,/g,""))||0,e+=parseFloat(o.actual.replace(/,/g,""))||0}),l.componentData.forEach(o=>{var r;s+=parseFloat(o.plan.replace(/,/g,""))||0,t+=parseFloat((r=o.currentMonthValue)==null?void 0:r.replace(/,/g,""))||0,e+=parseFloat(o.actual.replace(/,/g,""))||0}),l.projectData.forEach(o=>{var r;s+=parseFloat(o.plan.replace(/,/g,""))||0,t+=parseFloat((r=o.currentMonthValue)==null?void 0:r.replace(/,/g,""))||0,e+=parseFloat(o.actual.replace(/,/g,""))||0}),l.totalData.plan=s,l.totalData.currentMonthValue=t,l.totalData.actual=e},et=async()=>{try{const s={mainBusiness:u.mainBusiness,nonMainBusiness:u.nonMainBusiness,total:u.total},t={period:b.value,data:s};console.log("\u4FDD\u5B58\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E:",t);const e=await fetch("http://47.111.95.19:3000/net-profit-structure",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const o=await e.text();throw new Error(`\u4FDD\u5B58\u51C0\u5229\u6DA6\u7ED3\u6784\u6570\u636E\u5931\u8D25: ${e.status} - ${o}`)}await st(),await ut(),await j(h.NET_PROFIT_STRUCTURE,b.value,s,_.value,A.value),alert("\u4FDD\u5B58\u6210\u529F")}catch(s){console.error("\u4FDD\u5B58\u5931\u8D25:",s),alert("\u4FDD\u5B58\u5931\u8D25: "+(s instanceof Error?s.message:"\u672A\u77E5\u9519\u8BEF"))}},st=async()=>{try{const s=[...l.equipmentData.map(r=>({...r,segment:"\u8BBE\u5907"})),...l.componentData.map(r=>({...r,segment:"\u5143\u4EF6"})),...l.projectData.map(r=>({...r,segment:"\u5DE5\u7A0B"}))],t={period:b.value,data:s};console.log("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",t);const e=await fetch("http://47.111.95.19:3000/main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const r=await e.text();throw new Error(`\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25: ${e.status} - ${r}`)}const o={equipment:l.equipmentData,component:l.componentData,project:l.projectData};await j(h.MAIN_BUSINESS_NET_PROFIT,b.value,o,"","")}catch(s){throw console.error("\u4FDD\u5B58\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",s),s}},ut=async()=>{try{const s={period:b.value,data:y.items};console.log("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E:",s);const t=await fetch("http://47.111.95.19:3000/non-main-business-net-profit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok){const e=await t.text();throw new Error(`\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25: ${t.status} - ${e}`)}await j(h.NON_MAIN_BUSINESS_NET_PROFIT,b.value,y.items,"","")}catch(s){throw console.error("\u4FDD\u5B58\u975E\u4E3B\u8425\u4E1A\u52A1\u6570\u636E\u5931\u8D25:",s),s}},ot=()=>{const s=$();u.mainBusiness={...s.mainBusiness},u.nonMainBusiness={...s.nonMainBusiness},u.total={...s.total};const t=q();l.equipmentData=[...t.equipmentData],l.componentData=[...t.componentData],l.projectData=[...t.projectData],l.totalData={...t.totalData};const e=O();y.items=[...e.items],y.totalData={...e.totalData},console.log("\u5DF2\u91CD\u7F6E\u4E3A\u521D\u59CB\u6570\u636E")},z=async()=>{const{remarks:s,suggestions:t}=await yt(h.NET_PROFIT_STRUCTURE,b.value);_.value=s,A.value=t};return lt(()=>{console.log("\u7EC4\u4EF6\u6302\u8F7D\uFF0C\u5F53\u524D\u671F\u95F4:",b.value),I(b.value),z()}),(s,t)=>(x(),B("div",gt,[a("div",bt,[t[17]||(t[17]=a("h1",{class:"text-2xl font-bold"},"\u51C0\u5229\u6DA6\u7ED3\u6784\u4E0E\u8D28\u91CF\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),t[18]||(t[18]=a("div",{class:"text-gray-500"},"(\u6309\u5E74\u5EA6\u8BA1\u5212\u53E3\u5F84\u5206\u89E3)",-1)),a("div",mt,[m(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),type:"month",class:"px-3 py-2 border rounded"},null,512),[[D,b.value]])])]),a("div",Dt,[a("table",Ft,[t[24]||(t[24]=a("thead",{class:"sticky top-0 bg-white"},[a("tr",{class:"bg-gray-50"},[a("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),a("tbody",null,[a("tr",null,[t[19]||(t[19]=a("td",{class:"border border-gray-300 px-4 py-2 text-center"},"1",-1)),t[20]||(t[20]=a("td",{class:"border border-gray-300 px-4 py-2"},"\u4E3B\u8425\u4E1A\u52A1",-1)),a("td",Et,[m(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>u.mainBusiness.plan=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[D,u.mainBusiness.plan]])]),a("td",Bt,[m(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>u.mainBusiness.current=e),type:"text",class:"w-full px-2 py-1 border rounded",onInput:t[3]||(t[3]=e=>v("mainBusiness"))},null,544),[[D,u.mainBusiness.current]])]),a("td",xt,[m(a("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>u.mainBusiness.cumulative=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[D,u.mainBusiness.cumulative]])]),a("td",ft,[m(a("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>u.mainBusiness.progress=e),type:"text",class:"w-full px-2 py-1 border rounded"},null,512),[[D,u.mainBusiness.progress]])])]),a("tr",null,[t[21]||(t[21]=a("td",{class:"border border-gray-300 px-4 py-2 text-center"},"2",-1)),t[22]||(t[22]=a("td",{class:"border border-gray-300 px-4 py-2"},"\u975E\u4E3B\u8425\u4E1A\u52A1",-1)),a("td",ht,[m(a("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>u.nonMainBusiness.plan=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[D,u.nonMainBusiness.plan]])]),a("td",_t,[m(a("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>u.nonMainBusiness.current=e),type:"text",class:"w-full px-2 py-1 border rounded",onInput:t[8]||(t[8]=e=>v("nonMainBusiness"))},null,544),[[D,u.nonMainBusiness.current]])]),a("td",At,[m(a("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>u.nonMainBusiness.cumulative=e),type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,512),[[D,u.nonMainBusiness.cumulative]])]),a("td",vt,[m(a("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>u.nonMainBusiness.progress=e),type:"text",class:"w-full px-2 py-1 border rounded"},null,512),[[D,u.nonMainBusiness.progress]])])]),a("tr",wt,[t[23]||(t[23]=a("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),a("td",Mt,[m(a("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>u.total.plan=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[D,u.total.plan]])]),a("td",Ct,[m(a("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>u.total.current=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[D,u.total.current]])]),a("td",Vt,[m(a("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>u.total.cumulative=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[D,u.total.cumulative]])]),a("td",Tt,[m(a("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>u.total.progress=e),type:"text",class:"w-full px-2 py-1 border rounded font-bold",readonly:""},null,512),[[D,u.total.progress]])])])])])]),a("div",St,[t[28]||(t[28]=a("h2",{class:"text-xl font-bold mb-4"},"\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),a("div",Nt,[a("table",$t,[t[27]||(t[27]=a("thead",{class:"sticky top-0 bg-white"},[a("tr",{class:"bg-gray-50"},[a("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u677F\u5757"),a("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5BA2\u6237\u5C5E\u6027"),a("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5E74\u5EA6\u8BA1\u5212"),a("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5F53\u6708\u503C"),a("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u7D2F\u8BA1\u503C"),a("th",{class:"border border-gray-300 px-4 py-2",rowspan:"2"},"\u5206\u7C7B\u8D21\u732E\u5360\u6BD4")])],-1)),a("tbody",null,[(x(!0),B(S,null,N(l.equipmentData,(e,o)=>{var r;return x(),B("tr",{key:`equipment-${o}`},[o===0?(x(),B("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:l.equipmentData.length}," \u8BBE\u5907 ",8,It)):P("",!0),a("td",Ut,c(e.customerType),1),a("td",kt,[m(a("input",{"onUpdate:modelValue":d=>e.plan=d,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,Pt),[[D,e.plan]])]),a("td",jt,[a("span",Rt,c(f(parseFloat((r=e.currentMonthValue)==null?void 0:r.replace(/,/g,""))||0)),1)]),a("td",qt,[a("span",Ot,c(e.actual),1)]),a("td",Lt,c(e.contribution),1)])}),128)),(x(!0),B(S,null,N(l.componentData,(e,o)=>{var r;return x(),B("tr",{key:`component-${o}`},[o===0?(x(),B("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:l.componentData.length}," \u5143\u4EF6 ",8,Jt)):P("",!0),a("td",Gt,c(e.customerType),1),a("td",zt,[m(a("input",{"onUpdate:modelValue":d=>e.plan=d,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,Ht),[[D,e.plan]])]),a("td",Kt,[a("span",Qt,c(f(parseFloat((r=e.currentMonthValue)==null?void 0:r.replace(/,/g,""))||0)),1)]),a("td",Wt,[a("span",Xt,c(e.actual),1)]),a("td",Yt,c(e.contribution),1)])}),128)),(x(!0),B(S,null,N(l.projectData,(e,o)=>{var r;return x(),B("tr",{key:`project-${o}`},[o===0?(x(),B("td",{key:0,class:"border border-gray-300 px-4 py-2 text-center",rowspan:l.projectData.length}," \u5DE5\u7A0B ",8,Zt)):P("",!0),a("td",ta,c(e.customerType),1),a("td",aa,[m(a("input",{"onUpdate:modelValue":d=>e.plan=d,type:"text",class:"w-full px-2 py-1 border rounded bg-gray-100",readonly:""},null,8,ea),[[D,e.plan]])]),a("td",sa,[a("span",ua,c(f(parseFloat((r=e.currentMonthValue)==null?void 0:r.replace(/,/g,""))||0)),1)]),a("td",oa,[a("span",ra,c(e.actual),1)]),a("td",na,c(e.contribution),1)])}),128)),a("tr",la,[t[25]||(t[25]=a("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),a("td",ia,c(f(l.totalData.plan)),1),a("td",ca,c(f(l.totalData.currentMonthValue)),1),a("td",pa,c(f(l.totalData.actual)),1),t[26]||(t[26]=a("td",{class:"border border-gray-300 px-4 py-2"}," 100.00% ",-1))])])])])]),a("div",da,[t[31]||(t[31]=a("h2",{class:"text-xl font-bold mb-4"},"\u975E\u4E3B\u8425\u4E1A\u52A1\u51C0\u5229\u6DA6\u8D21\u732E\u60C5\u51B5\uFF08\u5355\u4F4D\uFF1A\u4E07\u5143\uFF09",-1)),a("div",ya,[a("table",ga,[t[30]||(t[30]=a("thead",{class:"sticky top-0 bg-white"},[a("tr",{class:"bg-gray-50"},[a("th",{class:"border border-gray-300 px-4 py-2"},"\u5E8F\u53F7"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u8D22\u52A1\u79D1\u76EE"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u5E74\u5EA6\u8BA1\u5212"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u5F53\u671F"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u7D2F\u8BA1"),a("th",{class:"border border-gray-300 px-4 py-2"},"\u6267\u884C\u8FDB\u5EA6")])],-1)),a("tbody",null,[(x(!0),B(S,null,N(y.items,(e,o)=>(x(),B("tr",{key:o},[a("td",ba,c(e.id),1),a("td",ma,c(e.name),1),a("td",Da,[a("span",Fa,c(e.plan),1)]),a("td",Ea,[m(a("input",{"onUpdate:modelValue":r=>e.currentPeriod=r,type:"text",class:"w-full px-2 py-1 border rounded",onInput:r=>L(o)},null,40,Ba),[[D,e.currentPeriod]])]),a("td",xa,[a("span",fa,c(e.accumulated),1)]),a("td",ha,[a("span",_a,c(e.progress),1)])]))),128)),a("tr",Aa,[t[29]||(t[29]=a("td",{class:"border border-gray-300 px-4 py-2 text-center",colspan:"2"},"\u5408\u8BA1",-1)),a("td",va,c(f(y.totalData.plan)),1),a("td",wa,c(f(y.totalData.currentPeriod)),1),a("td",Ma,c(f(y.totalData.accumulated)),1),a("td",Ca,c(y.totalData.progress),1)])])])])]),a("div",{class:"mt-4 flex justify-end space-x-4"},[a("button",{onClick:et,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," \u4FDD\u5B58 "),a("button",{onClick:ot,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u91CD\u7F6E ")]),it(dt,{"module-id":ct(h).NET_PROFIT_STRUCTURE,period:b.value,remarks:_.value,"onUpdate:remarks":t[15]||(t[15]=e=>_.value=e),suggestions:A.value,"onUpdate:suggestions":t[16]||(t[16]=e=>A.value=e)},null,8,["module-id","period","remarks","suggestions"])]))}});var $a=rt(Va,[["__scopeId","data-v-34823506"]]);export{$a as default};
