import{_ as j,d as Y,r as a,h as k,o as M,j as N,c as b,a as t,y as V,z as I,F as O,l as U,t as d,C as W,q as m,n as F,f as y}from"./index.ef1fdd93.js";import{i as q,L as G}from"./index.0a005eaa.js";const T={class:"p-6 bg-gray-50 min-h-screen"},H={class:"max-w-7xl mx-auto"},J={class:"bg-white p-6 rounded-lg shadow-sm mb-8"},K={class:"flex items-center justify-between"},P={class:"flex items-center space-x-3"},Q=["value"],X={class:"bg-white rounded-lg shadow-sm p-6 mb-8"},Z={class:"flex justify-between items-center mb-6"},ee={class:"text-lg font-semibold text-gray-900"},te={class:"bg-white rounded-lg shadow-sm p-6"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"p-4 border border-gray-200 rounded-lg"},ae={class:"flex justify-between items-center mb-3"},le={class:"w-full bg-gray-200 rounded-full h-3 mb-2"},oe={class:"text-xs text-gray-600"},ne={class:"p-4 border border-gray-200 rounded-lg"},re={class:"flex justify-between items-center mb-3"},ie={class:"w-full bg-gray-200 rounded-full h-3 mb-2"},de={class:"text-xs text-gray-600"},ce=Y({__name:"AssetLiabilityRatioChart",setup(ve){const n=a(new Date().getFullYear().toString()),h=a([]),p=a(!0),x=a(null),r=a(null),o=a(74),l=a(0),i=a([]),c=a([]),v=k(()=>o.value>0?l.value/o.value*100:0),f=e=>e.toLocaleString("zh-CN",{maximumFractionDigits:2}),A=e=>e<=60?"text-green-600":e<=70?"text-blue-600":e<=80?"text-yellow-600":"text-red-600",B=e=>e<=60?"bg-green-500":e<=70?"bg-blue-500":e<=80?"bg-yellow-500":"bg-red-500",S=e=>e>=90&&e<=110?"text-green-600":e>=80&&e<120?"text-blue-600":e>=70&&e<130?"text-yellow-600":"text-red-600",C=e=>e>=90&&e<=110?"bg-green-500":e>=80&&e<120?"bg-blue-500":e>=70&&e<130?"bg-yellow-500":"bg-red-500",z=()=>{const e=new Date().getFullYear(),u=[];for(let s=0;s<5;s++)u.push((e-s).toString());h.value=u},E=async()=>{try{p.value=!0,await R(),$()}catch(e){console.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25:",e),g()}finally{p.value=!1}},R=async()=>{try{const e=await fetch(`http://47.111.95.19:3000/analytics/asset-liability-ratio/${n.value}`);if(e.ok){const u=await e.json();u.success&&u.data?u.data.hasData===!1?(i.value=[],c.value=[],l.value=0):(i.value=u.data.months||[],c.value=u.data.monthlyData||[],l.value=u.data.currentRate||0,o.value=u.data.targetRate||74):g()}else g()}catch(e){console.error("\u83B7\u53D6\u8D44\u4EA7\u8D1F\u503A\u7387\u6570\u636E\u5931\u8D25:",e),g()}},g=()=>{i.value=[],c.value=[],l.value=0},L=()=>{x.value&&(r.value=q(x.value))},$=()=>{if(!r.value)return;if(i.value.length===0||c.value.length===0){const s={title:{text:`${n.value}\u5E74\u6682\u65E0\u8D44\u4EA7\u8D1F\u503A\u7387\u6570\u636E`,textStyle:{fontSize:16,fontWeight:"bold",color:"#9CA3AF"},left:"center",top:"middle"},graphic:{type:"text",left:"center",top:"60%",style:{text:"\u8BF7\u9009\u62E9\u5176\u4ED6\u5E74\u4EFD\u67E5\u770B\u6570\u636E",fontSize:14,fill:"#9CA3AF"}}};r.value.setOption(s,!0);return}const e=i.value.map(()=>o.value),u={title:{text:`${n.value}\u5E74\u8D44\u4EA7\u8D1F\u503A\u7387\u8D8B\u52BF\u5206\u6790`,textStyle:{fontSize:16,fontWeight:"bold",color:"#374151"},left:"center",top:10},tooltip:{trigger:"axis",formatter:function(s){let _=`${s[0].name}<br/>`;return s.forEach(w=>{_+=`${w.seriesName}: ${f(w.value)}%<br/>`}),_}},legend:{top:40,type:"scroll"},grid:{left:"8%",right:"5%",bottom:"15%",top:"20%",containLabel:!0},xAxis:{type:"category",data:i.value,axisLabel:{fontSize:12}},yAxis:{type:"value",name:"\u767E\u5206\u6BD4(%)",nameTextStyle:{fontSize:12},axisLabel:{formatter:function(s){return f(s)+"%"},fontSize:12}},series:[{name:"\u5B9E\u9645\u8D44\u4EA7\u8D1F\u503A\u7387",type:"line",data:c.value,smooth:!0,lineStyle:{color:"#3B82F6",width:3},itemStyle:{color:"#3B82F6"},areaStyle:{color:new G(0,0,0,1,[{offset:0,color:"#3B82F640"},{offset:1,color:"#3B82F610"}])}},{name:"\u76EE\u6807\u7EBF",type:"line",data:e,lineStyle:{color:"#EF4444",width:2,type:"dashed"},itemStyle:{color:"#EF4444"},symbol:"none"}]};r.value.setOption(u,!0)},D=()=>{var e;(e=r.value)==null||e.resize()};return M(async()=>{z(),L(),await E(),window.addEventListener("resize",D)}),N(()=>{var e;(e=r.value)==null||e.dispose(),window.removeEventListener("resize",D)}),(e,u)=>(y(),b("div",T,[t("div",H,[u[7]||(u[7]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"\u8D44\u4EA7\u8D1F\u503A\u7387\u5206\u6790"),t("p",{class:"text-gray-600 mt-2"},"\u8D44\u4EA7\u8D1F\u503A\u7387\u5206\u6790\u4E0E\u8D8B\u52BF\u76D1\u63A7")],-1)),t("div",J,[t("div",K,[u[2]||(u[2]=t("h3",{class:"text-lg font-semibold text-gray-900"},"\u6570\u636E\u5E74\u4EFD\u9009\u62E9",-1)),t("div",P,[u[1]||(u[1]=t("span",{class:"text-sm text-gray-600"},"\u9009\u62E9\u5E74\u4EFD:",-1)),V(t("select",{"onUpdate:modelValue":u[0]||(u[0]=s=>n.value=s),onChange:E,class:"px-3 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},[(y(!0),b(O,null,U(h.value,s=>(y(),b("option",{key:s,value:s},d(s)+"\u5E74",9,Q))),128))],544),[[I,n.value]])])])]),t("div",X,[t("div",Z,[t("h3",ee,d(n.value)+"\u5E74\u8D44\u4EA7\u8D1F\u503A\u7387\u6708\u5EA6\u8D8B\u52BF",1),u[3]||(u[3]=W('<div class="flex items-center space-x-4" data-v-6dee7d2d><div class="flex items-center" data-v-6dee7d2d><div class="w-4 h-4 bg-blue-500 rounded mr-2" data-v-6dee7d2d></div><span class="text-sm text-gray-600" data-v-6dee7d2d>\u5B9E\u9645\u8D44\u4EA7\u8D1F\u503A\u7387</span></div><div class="flex items-center" data-v-6dee7d2d><div class="w-4 h-4 bg-red-500 rounded mr-2" data-v-6dee7d2d></div><span class="text-sm text-gray-600" data-v-6dee7d2d>\u76EE\u6807\u7EBF</span></div></div>',1))]),t("div",{class:"h-[400px]",ref_key:"chartRef",ref:x},null,512)]),t("div",te,[u[6]||(u[6]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"\u5F53\u524D\u8D44\u4EA7\u8D1F\u503A\u7387\u6982\u51B5",-1)),t("div",ue,[t("div",se,[t("div",ae,[u[4]||(u[4]=t("h4",{class:"font-medium text-gray-900"},"\u5F53\u524D\u8D44\u4EA7\u8D1F\u503A\u7387",-1)),t("span",{class:m(["text-2xl font-bold",A(l.value)])},d(f(l.value))+"% ",3)]),t("div",le,[t("div",{class:m(["h-3 rounded-full transition-all duration-300",B(l.value)]),style:F(`width: ${Math.min(Math.abs(l.value/o.value*100),100)}%`)},null,6)]),t("p",oe," \u76EE\u6807: "+d(o.value)+"% ",1)]),t("div",ne,[t("div",re,[u[5]||(u[5]=t("h4",{class:"font-medium text-gray-900"},"\u76EE\u6807\u8FBE\u6210\u60C5\u51B5",-1)),t("span",{class:m(["text-2xl font-bold",S(v.value)])},d(f(v.value))+"% ",3)]),t("div",ie,[t("div",{class:m(["h-3 rounded-full transition-all duration-300",C(v.value)]),style:F(`width: ${Math.min(v.value,100)}%`)},null,6)]),t("p",de," \u57FA\u4E8E\u76EE\u6807\u8D44\u4EA7\u8D1F\u503A\u7387 "+d(o.value)+"% ",1)])])])])]))}});var me=j(ce,[["__scopeId","data-v-6dee7d2d"]]);export{me as default};
