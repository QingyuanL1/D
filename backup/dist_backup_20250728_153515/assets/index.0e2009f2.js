import{d as w,r as m,D as x,b as d,e as o,x as c,k as g,w as v,m as C,y as n,A as a,t as f,f as B,p as D,q as F,v as i}from"./index.7af7369e.js";const h={class:"min-h-screen flex items-center justify-center bg-gray-50"},E={class:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-lg"},k={class:"mt-2 text-center text-sm text-gray-600"},z={class:"rounded-md shadow-sm -space-y-px"},A={key:0,class:"text-sm text-red-500"},V=["disabled"],M={class:"absolute left-0 inset-y-0 flex items-center pl-3"},P={key:0,class:"h-5 w-5 text-blue-500 group-hover:text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},q={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},S=w({__name:"index",setup(j){const b=D(),t=m(!1),l=m(""),r=x({username:"",email:"",password:"",confirmPassword:"",roleCode:""}),y=async()=>{try{if(l.value="",r.password!==r.confirmPassword){l.value="\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4";return}if(!r.roleCode){l.value="\u8BF7\u8F93\u5165\u89D2\u8272\u7801";return}t.value=!0;const s=await fetch("http://47.111.95.19:3000/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.username,email:r.email,password:r.password,roleCode:r.roleCode})});if(!s.ok){const p=await s.json();throw new Error(p.error||"\u6CE8\u518C\u5931\u8D25")}const e=await s.json();if(!e.success)throw new Error(e.error||"\u6CE8\u518C\u5931\u8D25");alert("\u6CE8\u518C\u6210\u529F\uFF01\u5DF2\u4E3A\u60A8\u5206\u914D\u89D2\u8272\uFF1A"+e.data.role_description),b.push("/user/login")}catch(s){console.error("\u6CE8\u518C\u5931\u8D25:",s),l.value=s.message||"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"}finally{t.value=!1}};return(s,e)=>{const p=F("router-link");return i(),d("div",h,[o("div",E,[o("div",null,[e[7]||(e[7]=o("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," \u6CE8\u518C\u8D26\u53F7 ",-1)),o("p",k,[e[6]||(e[6]=c(" \u5DF2\u6709\u8D26\u53F7\uFF1F ")),g(p,{to:"/user/login",class:"text-blue-600 hover:text-blue-500"},{default:v(()=>e[5]||(e[5]=[c(" \u8FD4\u56DE\u767B\u5F55 ")])),_:1})])]),o("form",{class:"mt-8 space-y-6",onSubmit:C(y,["prevent"])},[o("div",z,[o("div",null,[e[8]||(e[8]=o("label",{for:"username",class:"sr-only"},"\u7528\u6237\u540D",-1)),n(o("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=u=>r.username=u),type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u7528\u6237\u540D"},null,512),[[a,r.username]])]),o("div",null,[e[9]||(e[9]=o("label",{for:"password",class:"sr-only"},"\u5BC6\u7801",-1)),n(o("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=u=>r.password=u),type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u5BC6\u7801"},null,512),[[a,r.password]])]),o("div",null,[e[10]||(e[10]=o("label",{for:"email",class:"sr-only"},"\u90AE\u7BB1",-1)),n(o("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=u=>r.email=u),type:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u90AE\u7BB1\u5730\u5740"},null,512),[[a,r.email]])]),o("div",null,[e[11]||(e[11]=o("label",{for:"confirmPassword",class:"sr-only"},"\u786E\u8BA4\u5BC6\u7801",-1)),n(o("input",{id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=u=>r.confirmPassword=u),type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u786E\u8BA4\u5BC6\u7801"},null,512),[[a,r.confirmPassword]])]),o("div",null,[e[12]||(e[12]=o("label",{for:"roleCode",class:"sr-only"},"\u89D2\u8272\u7801",-1)),n(o("input",{id:"roleCode","onUpdate:modelValue":e[4]||(e[4]=u=>r.roleCode=u),type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u89D2\u8272\u7801 (\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u83B7\u53D6)"},null,512),[[a,r.roleCode]])])]),l.value?(i(),d("div",A,f(l.value),1)):B("",!0),o("div",null,[o("button",{type:"submit",disabled:t.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[o("span",M,[t.value?(i(),d("svg",q,e[14]||(e[14]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(i(),d("svg",P,e[13]||(e[13]=[o("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"},null,-1),o("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"},null,-1)])))]),c(" "+f(t.value?"\u6CE8\u518C\u4E2D...":"\u6CE8\u518C"),1)],8,V)])],32)])])}}});export{S as default};
